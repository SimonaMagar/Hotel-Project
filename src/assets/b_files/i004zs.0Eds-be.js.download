(this.$WP=this.$WP||[]).push(["i004zs",(e,t)=>{var i,a,s,r,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k,C,A,N,T,_,I,O,D,j,M,P,z,R,L,U,B,F,$,G,q,H,X,W,K,J,V,Y,Z,Q,ee,et,ei,ea,es,er,en,eo,el,eu,eh,ec,ed,ep,eb,eg,em,ef,ev,ew,ex,ey,eE,eS,ek,eC,eA,eN,eT,e_,eI,eO,eD,ej,eM,eP={init:function(e){void 0===e&&void 0!==eP.zg||(eP.zg=!!e),eP.i||(eP.i=!0)},destroy:function(){eP.i=!1,eP.zg=void 0,eP.vd=void 0},setLogger:function(e){"function"==typeof e?(eP.init(),eP.vd=e):eP.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){eP.init(),eP.zg?eP.zg=!1:eP.zg=!0},info:function(e){if(eP.zg){var t="Braze: "+e;null!=eP.vd?eP.vd(t):console.log(t)}},warn:function(e){if(eP.zg){var t="Braze SDK Warning: "+e+" (v6.1.0)";null!=eP.vd?eP.vd(t):console.warn(t)}},error:function(e){if(eP.zg){var t="Braze SDK Error: "+e+" (v6.1.0)";null!=eP.vd?eP.vd(t):console.error(t)}}},ez={Tn:function(e){for(var t=atob((e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/")),i=new Uint8Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);return i}},eR={CustomEvent:"ce",Pr:"p",uc:"pc",wu:"i",pu:"ie",Ut:"cci",Wt:"ccic",Ht:"ccc",Mt:"ccd",Al:"ss",Dl:"se",Gi:"si",$i:"sc",Fi:"sbc",zo:"iec",lc:"lr",nc:"uae",mc:"lcaa",dc:"lcar",Gn:"inc",Rn:"add",On:"rem",$n:"set",Bn:"ncam",fc:"sgu",Fr:"ffi",ro:"bi",ot:"bc"},eL={oe:function(){var e=(e=!1)=>{var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t};return e()+e(!0)+e(!0)+e()}},eU={_o:"allowCrawlerActivity",Ro:"baseUrl",Wo:"noCookies",Vo:"devicePropertyAllowlist",Aa:"disablePushTokenMaintenance",Yo:"enableLogging",Xo:"enableSdkAuthentication",qa:"manageServiceWorkerExternally",Zo:"minimumIntervalBetweenTriggerActionsInSeconds",Wh:"sessionTimeoutInSeconds",Vh:"appVersion",Kh:"appVersionNumber",Ma:"serviceWorkerLocation",ka:"safariWebsitePushId",Xn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",Jo:"inAppMessageZIndex",Do:"openInAppMessagesInNewTab",Lh:"requireExplicitInAppMessageDismissal",$h:"doNotLoadFontAwesome",Jh:"deviceId",_a:"serviceWorkerScope",Yh:"sdkFlavor",tn:"openCardsInNewTab"};function eB(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&void 0!==e[i]&&t.push(e[i]);return t}function eF(e,t,i,a){var s=eB(e);return -1!==s.indexOf(t)||(er.error(`${i} Valid values from ${a} are "${s.join('"/"')}".`),!1)}function e$(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function eG(e){return"[object Date]"===Object.prototype.toString.call(e)}function eq(e){return"[object Object]"===Object.prototype.toString.call(e)}function eH(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}function eX(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;var i=e.toString();if(i!==t.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,r=t.constructor;if(s!==r&&!("function"==typeof s&&s instanceof s&&"function"==typeof r&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}for(var n=[],o=[],l=n.length;l--;)if(n[l]===e)return o[l]===t;if(n.push(e),o.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!eX(e[l],t[l]))return!1}else{var u,h=eH(e);if(l=h.length,eH(t).length!==l)return!1;for(;l--;)if(u=h[l],!Object.prototype.hasOwnProperty.call(t,u)||!eX(e[u],t[u]))return!1}return n.pop(),o.pop(),!0}function eW(e,t=!1){var i=e/1e3;return t&&(i=Math.floor(i)),i}function eK(e){if(null==e)return null;var t=parseInt(e.toString());return isNaN(t)?null:new Date(1e3*t)}function eJ(e){return null!=e&&eG(e)?e.toISOString().replace(/\.[0-9]{3}Z$/,""):e}function eV(e){return null==e||""===e?null:new Date(e)}function eY(e){return(new Date().valueOf()-e.valueOf())/1e3}function eZ(e){return(e.valueOf()-new Date().valueOf())/1e3}var eQ="inAppMessage must be an InAppMessage object",e0="must be a Card object",e1="setCustomUserAttribute",e3="Braze must be initialized before calling methods.",e5="data-update-subscription-id",e2="Banners are disabled. Make sure you have at least one campaign and relaunch the app.";function e4(e){var t,i=null==e?void 0:e.lt(tf.ct.uE);return i&&(t={label:i.l,name:i.a}),t}var e8=e=>e instanceof Error?e.message:String(e);function e7(e){for(var t=e.length,i=e.length-1;i>=0;i--){var a=e.charCodeAt(i);a>127&&a<=2047?t++:a>2047&&a<=65535&&(t+=2),a>=56320&&a<=57343&&i--}return t}var e6={types:{io:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",mo:"openLink",uo:"openLinkInWebView"},properties:{type:"type",eo:"steps",so:"args"}},e9={Li:"unknownBrazeAction"},te=(e,t)=>e===e9.Li?`${t} contains an unknown braze action type and will not be displayed.`:"";function tt(e){try{var t=e.match(to),i=t?t[0].length:null,a=i?e.substring(i):null;if(null==i||i>e.length-1||!a)return void er.error(`Did not find base64 encoded brazeAction in url to process : ${e}`);var s=function(e){try{e=e.replace(/-/g,"+").replace(/_/g,"/");for(var t=window.atob(e),i=new Uint8Array(t.length),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);var s=new Uint16Array(i.buffer);return String.fromCharCode(...s)}catch(e){return er.error("Unable to decode Base64: "+e),null}}(a);return s?JSON.parse(s):void er.error(`Failed to decode base64 encoded brazeAction: ${a}`)}catch(t){return void er.error(`Failed to process brazeAction URL ${e} : ${e8(t)}`)}}function ti(e,t){var i=!1;if(t){for(var a of t)if(i=i||e(a))return!0}return!1}function ta(e){var t=e6.properties.type,i=e6.properties.eo;try{if(null==e)return!0;var a,s=e[t];return s===e6.types.io?ti(ta,e[i]):(a=!1,Object.keys(e6.types).forEach(e=>{e6.types[e]!==s.toString()||(a=!0)}),!a)}catch(e){return!0}}var ts=/^[^\x00-\x1F\x22]+$/,tr=/[$.]/,tn=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],to=/^brazeActions:\/\/v\d+\//,tl=/^[^\s]+$/;function tu(e,t,i){var a=null!=e&&"string"==typeof e&&(""===e||null!=e.match(ts));return a||er.error(`Cannot ${t} because ${i} "${e}" is invalid.`),a}function th(e){return null!=e&&e.match(tr)&&-1===tn.indexOf(e)&&er.warn("Custom attribute keys cannot contain '$' or '.'"),tu(e,"set custom user attribute","the given key")}function tc(e){var t=typeof e;return null==e||"number"===t||"boolean"===t||eG(e)||"string"===t}function td(e,t,i,a=!1){var s="string"==typeof e||null===e&&a;return s||er.error(`Cannot ${t} because ${i} "${e}" is invalid.`),s}function tp(e,t,i,a,s){if(null==e&&(e={}),"object"!=typeof e||e$(e))return er.error(`${t} requires that ${i} be an object. Ignoring ${s}.`),[!1,null];t===e1?(r=76800,n="75KB"):(r=51200,n="50KB");var r,n,o,l=JSON.stringify(e);if(e7(l)>r)return er.error(`Could not ${a} because ${i} was greater than the max size of ${n}.`),[!1,null];try{o=JSON.parse(l)}catch(e){return er.error(`Could not ${a} because ${i} did not contain valid JSON.`),[!1,null]}for(var u in e){if(t===e1&&!th(u)||!tu(u,a,`the ${s} property name`))return[!1,null];var h=e[u];if(t!==e1&&null==h){delete e[u],delete o[u];continue}if(eG(h)&&(o[u]=eJ(h)),!function(e,t,i,a,s){var r;return(r=eq(e)||e$(e)?function e(t,i,a){var s=-1!==a;if(s&&a>50)return er.error("Nested attributes cannot be more than 50 levels deep."),!1;var r=s?a+1:-1;if(e$(t)&&e$(i)){for(var n=0;n<t.length&&n<i.length;n++)if(eG(t[n])&&(i[n]=eJ(t[n])),!e(t[n],i[n],r))return!1}else{if(!eq(t))return tc(t);for(var o of eH(t)){var l=t[o];if(s&&!th(o)||(eG(l)&&(i[o]=eJ(l)),!e(l,i[o],r)))return!1}}return!0}(e,t,s?1:-1):tc(e))||er.error(`Cannot ${i} because ${a} "${e}" is invalid.`),r}(h,o[u],a,`the ${s} property "${u}"`,t===e1))return[!1,null]}return[!0,o]}function tb(e){if(!(e6.properties.type in e))return!1;switch(e[e6.properties.type]){case e6.types.io:if(e6.properties.eo in e)return!0;break;case e6.types.logCustomEvent:case e6.types.setEmailNotificationSubscriptionType:case e6.types.setPushNotificationSubscriptionType:case e6.types.setCustomUserAttribute:case e6.types.addToSubscriptionGroup:case e6.types.removeFromSubscriptionGroup:case e6.types.addToCustomAttributeArray:case e6.types.removeFromCustomAttributeArray:case e6.types.mo:case e6.types.uo:if(e6.properties.so in e)return!0;break;case e6.types.requestPushPermission:return!0}return!1}var tg={rO:"Chrome",eO:"Edge",oO:"Opera",xg:"Safari",OO:"Firefox"},tm={Pg:"Android",co:"iOS",Og:"Mac",Bg:"Windows"},tf={iu:{su:"ab.storage.userId",Jh:"ab.storage.deviceId",Nl:"ab.storage.sessionId"},ct:{ec:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",Qa:"ab.storage.device",au:"ab.storage.sdk_metadata",du:"ab.storage.session_id_for_cached_metadata",In:"ab.storage.pushToken",rE:"ab.storage.cardImpressions",hl:"ab.storage.serverConfig",oE:"ab.storage.triggers",nE:"ab.storage.triggers.ts",Hl:"ab.storage.messagingSessionStart",Ps:"ab.storage.cc",Gs:"ab.storage.ccLastFullSync",Hs:"ab.storage.ccLastCardUpdated",Pu:"ab.storage.globalRateLimitCurrentTokenCount",Hu:"ab.storage.dynamicRateLimitCurrentTokenCount",Et:"ab.storage.ccClicks",Pt:"ab.storage.ccImpressions",Lt:"ab.storage.ccDismissals",aE:"ab.storage.lastDisplayedTriggerTimesById",iE:"ab.storage.lastDisplayedTriggerTime",EE:"ab.storage.triggerFireInstancesById",jh:"ab.storage.signature",lE:"ab.storage.brazeSyncRetryCount",Qs:"ab.storage.sdkVersion",Ie:"ab.storage.ff",qe:"ab.storage.ffImpressions",Ae:"ab.storage.ffLastRefreshAt",Me:"ab.storage.ff.sessionId",SE:"ab.storage.lastReqToEndpoint",_E:"ab.storage.requestAttempts",Nr:"ab.storage.deferredIam",Lu:"ab.storage.lastSdkReq",uE:"ab.storage.alias",ut:"ab.storage.banners",It:"ab.storage.banners.impressions",gt:"ab.storage.banners.sessionId"},ie:"ab.optOut"},tv={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"},tw={gu:"invalid_api_key",bu:"blacklisted",qu:"no_device_identifier",Ru:"invalid_json_response",vu:"empty_response"},tx={H:{Tu:"data",bi:"content_cards/sync",$e:"feature_flags/sync",Ir:"template",G:"banners/sync"},Yu:e=>null==e?void 0:e.lt(tf.ct.SE),sm:e=>null==e?void 0:e.lt(tf.ct._E),nm:(e,t)=>{null==e||e.ft(tf.ct.SE,t)},rm:(e,t)=>{null==e||e.ft(tf.ct._E,t)},Cu:(e,t)=>{if(!e||!t)return -1;var i=tx.Yu(e);if(null==i)return -1;var a=i[t];return null==a||isNaN(a)?-1:a},Su:(e,t)=>{var i=1;if(!e||!t)return i;var a=tx.sm(e);return null==a?i:null==(i=a[t])||isNaN(i)?1:i},K:(e,t,i)=>{if(e&&t){var a=tx.Yu(e);null==a&&(a={}),a[t]=i,tx.nm(e,a)}},Bu:(e,t,i)=>{if(e&&t){var a=tx.sm(e);null==a&&(a={}),a[t]=i,tx.rm(e,a)}},Ci:(e,t)=>{e&&t&&tx.Bu(e,t,1)},Ku:(e,t)=>{if(e&&t){var i=tx.Su(e,t);tx.Bu(e,t,i+1)}}},ty={O:e=>{var t,i;try{var a=!1;if(window.XMLHttpRequest&&(a=!0),!a)return void er.error("This browser does not have any supported ajax options!");t=new XMLHttpRequest;var s=i=>{"function"==typeof e.error&&e.error(t.status),"function"==typeof e.tt&&e.tt(!1,i)};for(var r of(t.onload=()=>{var i,a=!1;if(4===t.readyState){a=t.status>=200&&t.status<300||304===t.status;var r=t.getAllResponseHeaders();if(a){if("function"==typeof e.W){try{i=JSON.parse(t.responseText)}catch(i){var n={error:""===t.responseText?tw.vu:tw.Ru,response:t.responseText};(0,e.W)(n,r)}i&&e.W(i,r)}"function"==typeof e.tt&&e.tt(!0,r)}else s(r)}},t.onerror=()=>{s(t.getAllResponseHeaders())},t.ontimeout=()=>{s()},i=JSON.stringify(e.data),t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.headers||[]))t.setRequestHeader(r[0],r[1]);t.send(i)}catch(e){er.error(`Network request error: ${e8(e)}`)}}},tE=e=>{var t,i,a={},s=e.toString().split("\r\n");if(!s)return a;for(var r of s)r&&(t=r.slice(0,r.indexOf(":")).toLowerCase().trim(),i=r.slice(r.indexOf(":")+1).trim(),a[t]=i);return a},tS=(e,t)=>(e=Math.ceil(e),Math.floor(Math.random()*((t=Math.floor(t))-e+1))+e),tk={pn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,yn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>tk.pn()||tk.yn(),isPushBlocked:()=>{var e=tk.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=tk.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return e||t},isPushPermissionGranted:()=>tk.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Qi:()=>tk.isPushBlocked()?{Ui:!1,reason:"blocked"}:tk.isPushSupported()?tk.isPushPermissionGranted()?{Ui:!1,reason:"permissionGranted"}:{Ui:!0}:{Ui:!1,reason:"unsupported"},Vi:(e,t)=>"blocked"===e?`${t} containing a push prompt is not being shown because the user has already declined push permission prompt.`:"unsupported"===e?`${t} containing a push prompt is not being shown because the browser doesn't support push notifications.`:`${t} containing a push prompt is not being shown because the user has already accepted the permission prompt.`},tC={La:function(e,t=!1){var i,a=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(tf.ct.ec,"true"),localStorage.getItem(tf.ct.ec)&&(localStorage.removeItem(tf.ct.ec),a=!0)}catch(e){if(!(e instanceof Error&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0))throw e;a=!0}}catch(e){er.info("Local Storage not supported!")}var s=tC.oc(),r=new m.tc(e,s&&!t,a);return i=a?new m.rc(e):new m.ac,new m(r,i)},oc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}};function tA(e,t=!1,i=!1,a=!1){if(null==e)return!1;t=t||!1,i=i||!1;var s=e.getBoundingClientRect();return null!=s&&(s.top>=0&&s.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(s.left>=0||!a)&&(s.bottom>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(s.right<=(window.innerWidth||document.documentElement.clientWidth)||!a)}var tN={ko:"up",xo:"down",Zt:"left",ae:"right"};function tT(){if(null==eb.Ic){eb.Ic=!1;try{var e=Object.defineProperty({},"passive",{get:()=>{eb.Ic=!0}});window.addEventListener("testPassive",()=>{},e),window.removeEventListener("testPassive",()=>{},e)}catch(e){er.error(e8(e))}}return eb.Ic}function t_(e,t,i=()=>{}){e.addEventListener(t,i,!!tT()&&{passive:!0})}function tI(e){return eb.Mo(e,!0,!1,!1)}function tO(e){return eb.Mo(e,!1,!0,!1)}function tD(e){if(e.onclick){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.onclick.apply(e,[t])}}function tj(e,t,i){var a=null,s=null;t_(e,"touchstart",e=>{a=e.touches[0].clientX,s=e.touches[0].clientY}),t_(e,"touchmove",r=>{if(null!=a&&null!=s){var n=a-r.touches[0].clientX,o=s-r.touches[0].clientY;Math.abs(n)>Math.abs(o)&&Math.abs(n)>=25?((n>0&&t===tN.Zt||n<0&&t===tN.ae)&&i(r),a=null,s=null):Math.abs(o)>=25&&((o>0&&t===tN.ko&&e.scrollTop===e.scrollHeight-e.offsetHeight||o<0&&t===tN.xo&&0===e.scrollTop)&&i(r),a=null,s=null)}})}function tM(e,t,i){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"svg");s.setAttribute("viewBox",e),s.setAttribute("xmlns",a);var r=document.createElementNS(a,"path");return r.setAttribute("d",t),null!=i&&r.setAttribute("fill",i),s.appendChild(r),s}var tP={lo:32,yo:9,Ze:13,Oh:27},tz=e=>null!==e&&"IFRAME"===e.tagName;function tR(e){if(!e)return null;if(e.is_control)return N.fromJson(e);var t,i=e.type;null!=i&&(i=i.toUpperCase());var a=e.message,s=e.text_align_message,r=e.slide_from,n=e.extras,o=e.trigger_id,l=e.click_action,u=e.uri,h=e.open_target,c=e.message_close,d=e.duration,p=e.icon,b=e.image_url,g=e.image_style,m=e.icon_color,f=e.icon_bg_color,v=e.bg_color,w=e.text_color,x=e.close_btn_color,y=e.header,E=e.text_align_header,S=e.header_text_color,k=e.frame_color,C=[],A=e.btns;null==A&&(A=[]);for(var M=0;M<A.length;M++)C.push(I.fromJson(A[M]));var P=e.crop_type,z=e.orientation,R=e.animate_in,L=e.animate_out,U=e.html_id,B=e.css;null!=U&&""!==U&&null!=B&&""!==B||(U=void 0,B=void 0);var F=e.message_extras,$=e.language,G=e.image_alt;if(i===D.es||i===T.Ke.Io)t=new D(a,s,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,R,L,y,E,S,k,C,P,U,B,F,$,G);else if(i===O.es)t=new O(a,s,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,R,L,y,E,S,k,C,P,z,U,B,F,$,G);else if(i===j.es)t=new j(a,s,r,n,o,l,u,h,c,d,p,b,m,f,v,w,x,R,L,U,B,F,$,G);else{if(i!==_.es&&i!==T.Ke.Je&&i!==T.Ke.Ao)return void er.error("Ignoring message with unknown type "+i);var q=e.message_fields;(t=new _(a,n,o,c,d,R,L,k,U,B,q,F)).trusted=e.trusted||!1}return t.He=i,t}function tL(e){var t=[];for(var i of e)t.push(new I(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return t}var tU={OPEN:"open",Rr:"purchase",vr:"push_click",pe:"custom_event",Qr:"iam_click",qs:"test"};function tB(e,t,i){var a=e||document.querySelector("head"),s=`ab-${t}-css-definitions-${"6.1.0".replace(/\./g,"-")}`;if(a){var r=a.ownerDocument||document;if(null==r.getElementById(s)){var n=r.createElement("style");n.innerHTML=i||"",n.id=s;var o=ew.ee(ih.er);null!=o&&n.setAttribute("nonce",o),a.appendChild(n)}}}function tF(){if(!ew.ee(ih.$h)){var e="https://use.fontawesome.com/7f85a56ba4.css";if(!(null!==document.querySelector('link[rel=stylesheet][href="'+e+'"]'))){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)}}}function t$(){tB(void 0,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333;color-scheme:normal}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron.rtl{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text[dir=rtl]{border-width:5px 10px 5px 25px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=rtl]{left:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button[dir=ltr]{right:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img img{width:100%;height:100%;object-fit:cover;object-position:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron.rtl{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}"),tF()}function tG(e,t,i,a="ltr"){var s=document.createElement("button");s.setAttribute("aria-label",e),s.setAttribute("role","button"),s.dir=a,t_(s,"touchstart"),s.className="ab-close-button";var r=tM("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",t);return s.appendChild(r),r.setAttribute("aria-hidden","true"),s.addEventListener("keydown",e=>{e.keyCode!==tP.lo&&e.keyCode!==tP.Ze||(i(),e.stopPropagation())}),s.onclick=e=>{i(),e.stopPropagation()},s}function tq(e,t){return null==e||isNaN(e=parseInt(e.toString()))?"":(t&&!isNaN(parseFloat(t.toString()))||(t=1),"rgba("+[(16711680&(e>>>=0))>>>16,(65280&e)>>>8,255&e,((4278190080&e)>>>24)/255*t].join(",")+")")}function tH(e){if(!ew.rr())return!1;if(!(e instanceof T||e instanceof N))return er.error(eQ),!1;var t=e instanceof N?eR.zo:eR.Gi;return ev.ea().rt(e,t).W}function tX(e){if(!ew.rr())return!1;if(!(e instanceof T))return er.error(eQ),!1;var t=ev.ea().rt(e,eR.$i);if(t){e.Ur()||tH(e);for(var i=0;i<t.ue.length;i++)iu.o().ve(tU.Qr,[e.triggerId],t.ue[i])}return t.W}var tW={PORTRAIT:0,LANDSCAPE:1};function tK(){return screen.width<=600}function tJ(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?tW.LANDSCAPE:tW.PORTRAIT;var e=window;if("screen"in e){var t=e.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=t&&"object"==typeof t&&(t=t.type),"landscape-primary"===t||"landscape-secondary"===t?tW.LANDSCAPE:tW.PORTRAIT}return tW.PORTRAIT}function tV(e,t,i){e&&(t||null!=i&&i.metaKey?window.open(e):window.location=e)}function tY(){return window.location.href}function tZ(){if(ew.rr())return ew.gr()}function tQ(e,t,i){if(ew.rr()){if(to.test(e)){var a=tt(e);if(a){var s=e=>{if(!tb(e))return void er.error(`Decoded Braze Action json is invalid: ${JSON.stringify(e,null,2)}`);var t=e6.properties.type,i=e6.properties.eo,a=e6.properties.so,r=e[t];if(r===e6.types.io)for(var n of e[i])s(n);else{var o,l,u=e[a];switch(r){case e6.types.logCustomEvent:Promise.resolve().then(function(){return eC}).then(({logCustomEvent:e})=>{ew.ao()?e(...l=Array.prototype.slice.call(u)):er.error(e3)});break;case e6.types.requestPushPermission:Promise.resolve().then(function(){return eI}).then(({requestPushPermission:e})=>{ew.ao()?"Safari"===eu.browser&&eu.OS===tm.co?window.navigator.standalone&&e():e():er.error(e3)});break;case e6.types.setEmailNotificationSubscriptionType:case e6.types.setPushNotificationSubscriptionType:case e6.types.setCustomUserAttribute:case e6.types.addToSubscriptionGroup:case e6.types.removeFromSubscriptionGroup:case e6.types.addToCustomAttributeArray:case e6.types.removeFromCustomAttributeArray:(o=tZ())&&o[r](...Array.prototype.slice.call(u));break;case e6.types.mo:case e6.types.uo:l=Array.prototype.slice.call(u),eg.openUri(...l);break;default:er.info(`Ignoring unknown Braze Action: ${r}`)}}};s(a)}}else eg.openUri(e,t,i)}}function t0(e,t){tQ(e,t)}function t1(e){null==e&&(e="");var t=e.split("?").slice(1).join("?"),i={};if(null!=t)for(var a=t.split("&"),s=0;s<a.length;s++){var r=a[s].split("=");""!==r[0]&&(i[r[0]]=r[1])}return i}function t3(e){return!(!e||0!==(e=e.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==e.lastIndexOf("data:",0))}function t5(e,t,i){if(!ew.rr())return!1;if(!(e instanceof _))return er.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;var a=eR.$i;null!=t&&(a=eR.Fi);var s=ev.ea().rt(e,a,t,i);if(s.W)for(var r=0;r<s.ue.length;r++)iu.o().ve(tU.Qr,[e.triggerId,t],s.ue[r]);return s.W}var t2=(e,t,i,a)=>{var s=i.getAttribute("href"),r=i.onclick;return n=>{if(null==r||"function"!=typeof r||!1!==r.bind(i)(n)){var o=t1(s).abButtonId;if(null!=o&&""!==o||(o=i.getAttribute("id")||void 0),null!=s&&""!==s&&0!==s.indexOf("#")){var l="blank"===(i.getAttribute("target")||"").toLowerCase().replace("_",""),u=a||e.openTarget===T.OpenTarget.BLANK||l,h=()=>{t5(e,o,s),eg.openUri(s,u,n)};u?h():e.ll(t,h)}else t5(e,o,s||void 0);return n.stopPropagation(),!1}}},t4=(e,t)=>{var i={display:{},web:{}},a=function(){return function(){var e=arguments;Promise.resolve().then(function(){return eI}).then(t=>{ew.ao()?t.requestPushPermission(...Array.prototype.slice.call(e)):er.error(e3)})}},s={requestImmediateDataFlush:function(){var e=arguments;Promise.resolve().then(function(){return eN}).then(({requestImmediateDataFlush:t})=>{ew.ao()?t(...Array.prototype.slice.call(e)):er.error(e3)})},logCustomEvent:function(){var e=arguments;Promise.resolve().then(function(){return eC}).then(({logCustomEvent:t})=>{if(!ew.ao())return void er.error(e3);t(...Array.prototype.slice.call(e))})},logPurchase:function(){var e=arguments;Promise.resolve().then(function(){return eA}).then(({logPurchase:t})=>{if(!ew.ao())return void er.error(e3);t(...Array.prototype.slice.call(e))})},unregisterPush:function(){var e=arguments;Promise.resolve().then(function(){return eO}).then(({unregisterPush:t})=>{ew.ao()?t(...Array.prototype.slice.call(e)):er.error(e3)})},requestPushPermission:a(),changeUser:function(){var e=arguments;Promise.resolve().then(function(){return ek}).then(({changeUser:t})=>{if(!ew.ao())return void er.error(e3);t(...Array.prototype.slice.call(e))})}},r=function(e){return function(){s[e](...Array.prototype.slice.call(arguments))}};for(var n of eH(s))i[n]=r(n);for(var o=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup","setLineId"],l=function(e){return function(){var t=tZ();t&&t[e](...Array.prototype.slice.call(arguments))}},u={},h=0;h<o.length;h++)u[o[h]]=l(o[h]);i.getUser=function(){return u};var c={},d=function(i){return function(){var a=arguments;"function"!=typeof t?c[i](...Array.prototype.slice.call(a)):t(e,function(){c[i](...Array.prototype.slice.call(a))})}},p=i.display;for(var b of eH(c))p[b]=d(b);var g={registerAppboyPushMessages:a()},m=function(e){return function(){g[e](...Array.prototype.slice.call(arguments))}},f=i.web;for(var v of eH(g))f[v]=m(v);return i},t8=(e,t,i)=>{var a=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${i}['"]\\)`,s=e.match(new RegExp(a));if(s){var r=`${s[1]}.setAttribute("nonce", "${t}")`;return`${e.slice(0,s.index+s[0].length)};${r};${e.slice(s.index+s[0].length)}`}return null},t7=(e,t,i)=>{var a=null;if(null!=i){(a=document.createElement("html")).innerHTML=t||"";for(var s=a.getElementsByTagName("style"),r=0;r<s.length;r++)s[r].setAttribute("nonce",i);for(var n=a.getElementsByTagName("script"),o=0;o<n.length;o++){n[o].setAttribute("nonce",i),n[o].innerHTML=n[o].innerHTML.replace(/<style>/g,`<style nonce='${i}'>`);var l=t8(n[o].innerHTML,i,"script");l&&(n[o].innerHTML=l);var u=t8(n[o].innerHTML,i,"style");u&&(n[o].innerHTML=u)}}e.srcdoc=a?a.innerHTML:t||""};function t6(e,t){if(!ew.rr())return!1;if(!(e instanceof I))return er.error("button must be an InAppMessageButton object"),!1;if(!(t instanceof T))return er.error(eQ),!1;var i,a=ev.ea().Xi(e,t);if(a.W)for(var s=0;s<a.ue.length;s++)iu.o().ve(tU.Qr,[t.triggerId,null===(i=e.id)||void 0===i?void 0:i.toString()],a.ue[s]);return a.W}var t9={wo:e=>{for(var t=e.querySelectorAll(".ab-close-button, .ab-message-button"),i=0;i<t.length;i++)t[i].tabIndex=0;if(t.length>0){var a=t[0],s=t[t.length-1];e.addEventListener("keydown",t=>{var i=document.activeElement;t.keyCode!==tP.yo||(t.shiftKey||i!==s&&i!==e?t.shiftKey&&(i===a||i===e)&&(t.preventDefault(),s.focus()):(t.preventDefault(),a.focus()))})}},vo:(e,t)=>{t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),e?t.setAttribute("aria-labelledby",e):t.setAttribute("aria-label","Modal Message")},jo:(e,t,i)=>{if(e.buttons&&e.buttons.length>0){var a=document.createElement("div");a.className="ab-message-buttons",t.appendChild(a);var s=t.getElementsByClassName("ab-message-text")[0];null!=s&&(s.className+=" ab-with-buttons");for(var r=a=>s=>(e.ll(t,()=>{t6(a,e),a.clickAction===T.ClickAction.URI&&tQ(a.uri||"",i||e.openTarget===T.OpenTarget.BLANK,s)}),s.stopPropagation(),!1),n=0;n<e.buttons.length;n++){var o=e.buttons[n],l=document.createElement("button");l.className="ab-message-button",l.setAttribute("type","button"),t_(l,"touchstart");var u=o.text;""===o.text&&(u="\xa0"),l.appendChild(document.createTextNode(u)),e.Oe()||(l.style.backgroundColor=tq(o.backgroundColor),l.style.color=tq(o.textColor),l.style.borderColor=tq(o.borderColor)),l.onclick=r(o),a.appendChild(l)}}}},ie={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chv\xedli pro v\xe1s nem\xe1me \xe1dn\xe9 aktualizace.<br/>Zkontrolujte pros\xedm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Pros\xedm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Pr\xf8v venligst senere.",FEED_TIMEOUT_MESSAGE:"Pr\xf8v venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verf\xfcgbar.<br/>Bitte sp\xe4ter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte sp\xe4ter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compru\xe9belo m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor int\xe9ntelo m\xe1s tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizaci\xf3n.<br/>Vuelva a verificar m\xe1s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo m\xe1s tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"P\xe4ivityksi\xe4 ei ole saatavilla.<br/>Tarkista my\xf6hemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit\xe4 my\xf6hemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise \xe0 jour disponible.<br/>Veuillez v\xe9rifier ult\xe9rieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez r\xe9essayer ult\xe9rieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi\xf9 tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi\xf9 tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst pr\xf8v igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie p\xf3niej.",FEED_TIMEOUT_MESSAGE:"Prosz spr\xf3bowa ponownie p\xf3niej."},pt:{NO_CARDS_MESSAGE:"N\xe3o temos atualiza\xe7\xf5es.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"N\xe3o temos nenhuma atualiza\xe7\xe3o.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>F\xf6rs\xf6k igen senare.",FEED_TIMEOUT_MESSAGE:"F\xf6rs\xf6k igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Ch\xfang t\xf4i kh\xf4ng c\xf3 cp nht n\xe0o.<br/>Vui l\xf2ng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui l\xf2ng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}},it={i:!1,aa:null,ea:()=>{if(it.t(),!it.aa){var e=eu.language,t=!1;ew.ee(ih.Xn)&&(e=ew.ee(ih.Xn),t=!0),it.aa=new q(e,t)}return it.aa},t:()=>{it.i||(ew.g(it),it.i=!0)},destroy:()=>{it.aa=null,it.i=!1}};function ii(e,t,i){if(ew.rr()){if(t$(),null==e)return!1;if(e instanceof N)return er.info("User received control for a multivariate test, logging to Braze servers."),tH(e),!0;if(!(e instanceof T)||e.constructor===T)return!1;e._h();var a,s=e instanceof _;if(s&&!e.trusted&&!ew.tr())return er.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),!1;if(null==t&&(t=document.body),e.Ve()&&t.querySelectorAll(".ab-modal-interactions").length>0)return er.info(`Cannot show in-app message ${e.message} because another message is being shown.`),!1;if(eg.Uo()){var r=eg.$o();if(r===tW.PORTRAIT&&e.orientation===T.Orientation.LANDSCAPE||r===tW.LANDSCAPE&&e.orientation===T.Orientation.PORTRAIT){var n=r===tW.PORTRAIT?"portrait":"landscape",o=e.orientation===T.Orientation.PORTRAIT?"portrait":"landscape";return er.info(`Not showing ${o} in-app message ${e.message} because the screen is currently ${n}`),!1}}if(!ew.tr()){var l=!1;if(e.buttons&&e.buttons.length>0)for(var u=e.buttons,h=0;h<u.length;h++)u[h].clickAction===T.ClickAction.URI&&(l=t3(u[h].uri));else e.clickAction===T.ClickAction.URI&&(l=t3(e.uri));if(l)return er.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),!1}var c=document.createElement("div");if(c.className="ab-iam-root v3",c.className+=(a="",e.animateIn&&(a+=" ab-animate-in"),e.animateOut&&(a+=" ab-animate-out"),e instanceof O?a+=" ab-effect-fullscreen":e instanceof _?a+=" ab-effect-html":e instanceof D?a+=" ab-effect-modal":e instanceof j&&(a+=" ab-effect-slide"),a),e.language&&!s&&(c.lang=e.language),e.Le()&&(c.id=e.htmlId),ew.ee(ih.Jo)&&(c.style.zIndex=(ew.ee(ih.Jo)+1).toString()),t.appendChild(c),e.Oe()){var d=document.createElement("style");d.innerHTML=e.css,d.id=e.Ge(),null!=ew.ee(ih.er)&&d.setAttribute("nonce",ew.ee(ih.er)),document.getElementsByTagName("head")[0].appendChild(d)}var p=e instanceof j,b=function(e,t,i,a,s,r,n=document.body,o="ltr"){if(e.Qe=document.activeElement,e instanceof _)return function(e,t,i,a,s){var r=document.createElement("iframe");if(r.setAttribute("title","Modal Message"),a&&(r.style.zIndex=(a+1).toString()),t7(r,e.message,s),r.onload=()=>{var a=r.contentWindow;a.focus();var n=a.document.getElementsByTagName("head")[0];if(null!=n){if(e.Oe()){var o=document.createElement("style");o.innerHTML=e.css||"",o.id=e.Ge()||"",null!=s&&o.setAttribute("nonce",s),n.appendChild(o)}var l=a.document.createElement("base");null!=l&&(l.setAttribute("target","_parent"),n.appendChild(l))}var u=a.document.getElementsByTagName("title");u&&u.length>0&&r.setAttribute("title",u[0].textContent||"");var h=Object.assign(Object.assign({},t4(r,(t,i)=>e.ll(t,i))),{closeMessage:function(){e.ll(r)},logClick:function(){t5(e,...arguments)}});if(a.appboyBridge=h,a.brazeBridge=h,e.He!==T.Ke.Je){for(var c=a.document.getElementsByTagName("a"),d=0;d<c.length;d++)c[d].onclick=t2(e,r,c[d],i);for(var p=a.document.getElementsByTagName("button"),b=0;b<p.length;b++)p[b].onclick=t2(e,r,p[b],i)}var g=a.document.body;if(null!=g){e.Le()&&(g.id=e.htmlId||"");var m=document.createElement("hidden");m.onclick=h.closeMessage,m.className="ab-programmatic-close-button",g.appendChild(m)}a.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==r.className.indexOf("ab-start-hidden")&&(r.className=r.className.replace("ab-start-hidden",""),t(r))},r.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",eu.OS===tm.co){var n=document.createElement("div");return n.className="ab-ios-scroll-wrapper",n.appendChild(r),e.Pe=n,n}return e.Pe=r,r}(e,t,a,s,r);var l=function(e,t,i,a,s,r=document.body,n="ltr"){var o,l=null,u=document.createElement("div");u.dir=n,u.className="ab-in-app-message ab-start-hidden ab-background",s&&(u.style.zIndex=(s+1).toString()),e.Ve()&&(u.className+=" ab-modal-interactions",u.setAttribute("tabindex","-1")),e.Oe()||(u.style.color=tq(e.textColor),u.style.backgroundColor=tq(e.backgroundColor),null==(o=e.backgroundColor)||isNaN(o=parseInt(o.toString()))||(4278190080&o)>>>24!=0||(u.className+=" ab-no-shadow"));var h=()=>{-1!==u.className.indexOf("ab-start-hidden")&&(u.className=u.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?i(`Cannot show in-app message ${e.message} because another message is being shown.`,T.Ye.We):t(u))},c=(t=!0)=>{var i=document.querySelectorAll(".ab-iam-root");i&&0!==i.length||(i=r.querySelectorAll(".ab-iam-root")),i&&i.length>0&&(i[0].classList.remove("ab-iam-img-loading"),l&&(clearTimeout(l),l=null),t?h():er.error(`Cannot show in-app message ${e.message} because the image failed to load.`))};if(e.imageStyle===T.ImageStyle.GRAPHIC&&(u.className+=" graphic"),e.orientation===T.Orientation.LANDSCAPE&&(u.className+=" landscape"),null!=e.buttons&&0===e.buttons.length){e.clickAction!==T.ClickAction.NONE&&(u.className+=" ab-clickable");var d=t=>(e.ll(u,()=>{tX(e),e.clickAction===T.ClickAction.URI&&tQ(e.uri||"",a||e.openTarget===T.OpenTarget.BLANK,t)}),t.stopPropagation(),!1);u.onclick=d,u.addEventListener("keydown",e=>{if(e.keyCode===tP.Ze||e.keyCode===tP.lo)return d(e)})}var p=tG("Close Message",e.Oe()?void 0:tq(e.closeButtonColor),()=>{e.ll(u)},n);u.appendChild(p),s&&(p.style.zIndex=(s+2).toString());var b=document.createElement("div");b.className="ab-message-text",b.dir=n,b.setAttribute("role","article");var g=(e.messageAlignment||e.do).toLowerCase();b.className+=" "+g+"-aligned";var m=!1,f=document.createElement("div");if(f.className="ab-image-area",e.imageUrl){var v=document.createElement("img");if(v.setAttribute("src",e.imageUrl),e.bo(v),0===document.querySelectorAll(".ab-iam-img-loading").length){m=!0;var w=document.querySelectorAll(".ab-iam-root");w&&w.length>0&&w[0].classList.add("ab-iam-img-loading"),l=window.setTimeout(()=>{c(!1)},6e4),v.onload=()=>{c()},v.onerror=()=>{c(!1)}}if(e.cropType===T.CropType.CENTER_CROP){var x=document.createElement("div");x.className="ab-center-cropped-img",x.appendChild(v),f.appendChild(x)}else f.appendChild(v);u.appendChild(f),b.className+=" ab-with-image"}else if(e.icon){f.className+=" ab-icon-area";var y=document.createElement("span");y.className="ab-icon",e.Oe()||(y.style.backgroundColor=tq(e.iconBackgroundColor),y.style.color=tq(e.iconColor));var E=document.createElement("i");E.className="fa",E.appendChild(document.createTextNode(e.icon)),E.setAttribute("aria-hidden","true"),y.appendChild(E),f.appendChild(y),u.appendChild(f),b.className+=" ab-with-icon"}if(t_(b,"touchstart"),e.header&&e.header.length>0){var S=document.createElement("h1");S.className="ab-message-header",e.po=eo.oe(),S.id=e.po;var k=(e.headerAlignment||T.TextAlignment.CENTER).toLowerCase();S.className+=" "+k+"-aligned",e.Oe()||(S.style.color=tq(e.headerTextColor)),S.appendChild(document.createTextNode(e.header)),b.appendChild(S)}var C=e.ho();return b.appendChild(C),u.appendChild(b),m||h(),e.Pe=u,u}(e,t,i,a,s,n,o);if(e instanceof O||e instanceof D){var u=e instanceof O?"ab-fullscreen":"ab-modal";l.className+=` ${u} ab-centered`,em.jo(e,l,a),em.wo(l),em.vo(e.po,l)}else if(e instanceof j){l.className+=" ab-slideup",l.setAttribute("tabindex","0"),l.setAttribute("role","alert");var h,c,d=l.getElementsByClassName("ab-close-button")[0];if(null!=d){var p=tM("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",e.Oe()?void 0:tq(e.closeButtonColor));p.setAttribute("class",`ab-chevron ${o}`),d.appendChild(p)}tj(l,tN.Zt,e=>{l.className+=" ab-swiped-left",null!=d&&null!=d.onclick&&d.onclick(e)}),tj(l,tN.ae,e=>{l.className+=" ab-swiped-right",null!=d&&null!=d.onclick&&d.onclick(e)}),e.slideFrom===T.SlideFrom.TOP?(h=tN.ko,c=" ab-swiped-up"):(h=tN.xo,c=" ab-swiped-down"),tj(l,h,e=>{l.className+=c,null!=d&&null!=d.onclick&&d.onclick(e)})}return l}(e,t=>{if(e.Ve()&&e.Bo()){var a=document.createElement("div");if(a.className="ab-page-blocker",e.Oe()||(a.style.backgroundColor=tq(e.frameColor)),ew.ee(ih.Jo)&&(a.style.zIndex=ew.ee(ih.Jo).toString()),c.appendChild(a),!ew.ee(ih.Lh)){var r=new Date().valueOf();a.onclick=i=>{new Date().valueOf()-r>T.Ph&&(e.ll(t),i.stopPropagation())}}c.appendChild(t),t.focus(),e.Ah(c)}else if(p){for(var n=document.querySelectorAll(".ab-slideup"),o=null,l=n.length-1;l>=0;l--)if(n[l]!==t){o=n[l];break}if(e.slideFrom===T.SlideFrom.TOP){var u=0;null!=o&&(u=o.offsetTop+o.offsetHeight),t.style.top=Math.max(u,0)+"px"}else{var h=0;null!=o&&(h=(window.innerHeight||document.documentElement.clientHeight)-o.offsetTop),t.style.bottom=Math.max(h,0)+"px"}}else s&&!ew.ee(ih.Lh)&&tz(t)&&t.contentWindow&&t.contentWindow.addEventListener("keydown",function(t){t.keyCode===tP.Oh&&e.closeMessage()});tH(e),e.dismissType===T.DismissType.AUTO_DISMISS&&setTimeout(()=>{c.contains(t)&&e.ll(t)},e.duration),"function"==typeof i&&i()},e=>{er.info(e)},ew.ee(ih.Do),ew.ee(ih.Jo),ew.ee(ih.er),t,ef.ea().So());return(s||p)&&(c.appendChild(b),e.Ah(c)),!0}}function ia(e){if(ew.rr())return"function"!=typeof e?null:ev.ea().qi(function(t){return e(t[0]),t.slice(1)})}function is(){if(ew.rr()){t$();var e=ev.ea();if(null==e.xi()){var t=ia(e=>ii(e));e.Pi(t)}return e.xi()}}function ir(e){if(ew.rr())return e instanceof N?(er.info("Not deferring since this is a ControlMessage."),!1):e instanceof T?ev.ea().Ee(e):(er.info("Not an instance of InAppMessage, ignoring."),!1)}function io(){if(ew.rr())return ev.ea().zr()}var il={aa:null,i:!1,ea:()=>(il.t(),il.aa||(il.aa=new H(ew.m(),ew.u(),ew.p(),ew.ir())),il.aa),t:()=>{il.i||(ew.g(il),il.i=!0)},destroy:()=>{il.aa=null,il.i=!1}},iu={i:!1,provider:null,o:()=>(iu.t(),iu.provider||iu.rg(),iu.provider),rg:()=>{if(!iu.provider){var e=ew.ee(ih.Zo);iu.provider=new W(null!=e?e:30,ev.ea()._i(),ew.p(),ew.nn(),ev.ea()),ew.v(iu.provider)}},t:()=>{iu.i||(iu.rg(),ew.g(iu),iu.i=!0)},destroy:()=>{iu.provider=null,iu.i=!1}},ih={_o:"allowCrawlerActivity",Ro:"baseUrl",Wo:"noCookies",Aa:"disablePushTokenMaintenance",Yo:"enableLogging",Xo:"enableSdkAuthentication",qa:"manageServiceWorkerExternally",Zo:"minimumIntervalBetweenTriggerActionsInSeconds",Wh:"sessionTimeoutInSeconds",Vh:"appVersion",Kh:"appVersionNumber",Ma:"serviceWorkerLocation",ka:"safariWebsitePushId",Xn:"localization",er:"contentSecurityNonce",re:"allowUserSuppliedJavascript",Jo:"inAppMessageZIndex",Do:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",$h:"doNotLoadFontAwesome",Jh:"deviceId",_a:"serviceWorkerScope",Yh:"sdkFlavor"},ic={rt:(e,t,i)=>{var a,s,r=new E,n=ew.u();if(!n)return er.info(`Not logging event with type "${e}" because the current session ID could not be found.`),r;var o=n.qo();return r.ue.push(new u(i||(null===(a=ew.ir())||void 0===a?void 0:a.getUserId()),e,new Date().valueOf(),o,t)),r.W=(null===(s=ew.p())||void 0===s?void 0:s.Eo(r.ue))||!1,r}},id={i:!1,aa:null,ea:()=>(id.t(),id.aa||(id.aa=new V(ew.p())),id.aa),t:()=>{id.i||(ew.g(id),id.i=!0)},destroy:()=>{id.aa=null,id.i=!1}};function ip(e){return!!ew.rr()&&(e instanceof s?ey.ea().Jt(e).W:(er.error("card "+e0),!1))}function ib(e){if(!ew.rr())return!1;if(!e$(e))return er.error("cards must be an array"),!1;for(var t of e)if(!(t instanceof s))return er.error(`Each card in cards ${e0}`),!1;return ey.ea().Ot(e).W}function ig(e){return!!ew.rr()&&(e instanceof s?ey.ea().logClick(e).W:(er.error("card "+e0),!1))}function im(e,t,i,a,u,h,c,d,p,b,g,m,f,v,w,x,y,E){var S;if(t===s.es.oi||t===s.es.ai)S=new o(e,i,a,u,h,c,d,p,b,g,m,f,v,w,y,E);else if(t===s.es.hs)S=new n(e,i,a,u,h,c,d,p,b,g,m,f,v,w,y,E);else if(t===s.es.Ii)S=new r(e,i,u,c,d,p,g,m,f,v,w,y,E);else{if(t!==s.es.Ni)return er.error("Ignoring card with unknown type "+t),null;S=new l(e,i,c,d,m,f)}return x&&(S.test=x),S}function iv(e){return e[s.ui.Ei]?null:im(e[s.ui.rs],e[s.ui.ts],e[s.ui.os],e[s.ui.cs],e[s.ui.ns],e[s.ui.ds],eK(e[s.ui.ps]),e[s.ui.us]===s.Ti?null:eK(e[s.ui.us]),e[s.ui.URL],e[s.ui.ls],e[s.ui.fs],e[s.ui.xs],e[s.ui.bs],e[s.ui.gs],e[s.ui.js],e[s.ui.qs]||!1,e[s.ui.zs],e[s.ui.ks])}var iw={i:!1,provider:null,o:()=>(iw.t(),iw.provider||(iw.provider=new Y(ew.ir(),ew.p(),ew.l(),ew.tr(),ew.m()),ew.v(iw.provider)),iw.provider),t:()=>{iw.i||(ew.g(iw),iw.i=!0)},destroy:()=>{iw.provider=null,iw.i=!1}};function ix(e,t){if(ew.rr())return eE.o().fi(e,t,!0)}function iy(){if(ew.rr())return eE.o().Ws(!1)}function iE(e){if(null!=e){var t=e.querySelectorAll(".ab-unread-indicator")[0];null==t||t.classList.contains("read")||(t.className+=" read")}}function iS(e){ew.rr()&&ew.removeSubscription(e)}function ik(e){return null!=e&&!!e.getAttribute("data-ab-had-top-impression")}function iC(e){null!=e&&e.setAttribute("data-ab-had-top-impression","true")}function iA(e){return null!=e&&!!e.getAttribute("data-ab-had-bottom-impression")}function iN(e){null!=e&&e.setAttribute("data-ab-had-bottom-impression","true")}var iT={};function i_(e){e&&(e.className=e.className.replace("ab-show","ab-hide"),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Z.cr));var t=e.getAttribute(e5);null!=t&&iS(t);var i=e.getAttribute("data-listener-id");null!=i&&(window.removeEventListener("scroll",iT[i]),delete iT[i])}function iI(e,t){var i=ef.ea(),a=document.createElement("div");if(a.className="ab-feed-body",a.setAttribute("aria-label","Feed"),a.setAttribute("role","feed"),null==e.lastUpdated){var s=document.createElement("div");s.className="ab-no-cards-message";var r=document.createElement("i");r.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",s.appendChild(r),a.appendChild(s)}else{var n=!1,o=t=>e.nr(t);for(var u of e.cards){var h=u instanceof l;!h||e.ar()?(a.appendChild(function(e,t,i,a="ltr"){var s=document.createElement("div");s.dir=a,e.language&&(s.lang=e.language),s.className="ab-card ab-effect-card "+e.Xt,e.id&&(s.setAttribute("data-ab-card-id",e.id),s.setAttribute("id",e.id)),s.setAttribute("role","article");var r="",n=!1;e.url&&""!==e.url&&(r=e.url,n=!0);var o=a=>(iE(s),n&&(t(e),tQ(r,i,a)),!1);if(e.pinned){var l=document.createElement("div");l.className="ab-pinned-indicator";var u=document.createElement("i");u.className="fa fa-star",l.appendChild(u),s.appendChild(l)}if(e.imageUrl&&""!==e.imageUrl){var h=document.createElement("div");h.dir=a,h.className="ab-image-area";var c=document.createElement("img");if(c.setAttribute("src",e.imageUrl),c.onload=()=>{s.style.height="auto"},function(e,t){t.setAttribute("alt",e.altImageText||"")}(e,c),h.appendChild(c),s.className+=" with-image",n&&!e.Yt){var d=document.createElement("a");d.setAttribute("href",r),d.onclick=o,e.altImageText||(e.title?d.setAttribute("aria-label",e.title):d.setAttribute("aria-label","Feed Image")),d.appendChild(h),s.appendChild(d)}else s.appendChild(h)}var p=document.createElement("div");if(p.className="ab-card-body",p.dir=a,e.dismissible){e.logCardDismissal=()=>ip(e);var b=tG("Dismiss Card",void 0,e.dismissCard.bind(e),a);s.appendChild(b),tj(p,tN.Zt,e=>{s.className+=" ab-swiped-left",b.onclick(e)}),tj(p,tN.ae,e=>{s.className+=" ab-swiped-right",b.onclick(e)})}var g="",m=!1;if(e.title&&""!==e.title&&(g=e.title,m=!0),m){var f=document.createElement("h1");if(f.className="ab-title",f.id=eo.oe(),s.setAttribute("aria-labelledby",f.id),n){var v=document.createElement("a");v.setAttribute("href",r),v.onclick=o,v.appendChild(document.createTextNode(g)),f.appendChild(v)}else f.appendChild(document.createTextNode(g));p.appendChild(f)}var w=document.createElement("div");if(w.className=m?"ab-description":"ab-description ab-no-title",e.language&&(w.lang=e.language),e.description&&w.appendChild(document.createTextNode(e.description)),n){var x=document.createElement("div");x.className="ab-url-area";var y=document.createElement("a");y.setAttribute("href",r),e.linkText&&y.appendChild(document.createTextNode(e.linkText)),y.onclick=o,x.appendChild(y),w.appendChild(x)}p.appendChild(w),s.appendChild(p);var E=document.createElement("div");return E.className="ab-unread-indicator",e.viewed&&(E.className+=" read"),s.appendChild(E),e._t=s,s}(u,o,t,i.So())),n=n||!h):er.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!n){var c=document.createElement("div");c.className="ab-no-cards-message",c.innerHTML=i.get("NO_CARDS_MESSAGE")||"",c.setAttribute("role","article"),a.appendChild(c)}}return a}function iO(e,t){if(null!=e&&null!=t){var i=[],a=t.querySelectorAll(".ab-card");e.Qn||(e.Qn={});for(var s=0;s<a.length;s++){var r=a[s].getAttribute("data-ab-card-id"),n=tI(a[s]),o=tO(a[s]);if(e.Qn[r]){n||o||iE(a[s]);continue}var l=ik(a[s]),u=iA(a[s]),h=l,c=u;if(!l&&n&&(l=!0,iC(a[s])),!u&&o&&(u=!0,iN(a[s])),l&&u){if(h&&c)continue;for(var d of e.cards)if(d.id===r){e.Qn[d.id]=!0,i.push(d);break}}}i.length>0&&e.sr(i)}}function iD(e,t){if(null!=e&&null!=t){t.setAttribute("aria-busy","true");var i=t.querySelectorAll(".ab-refresh-button")[0];null!=i&&(i.className+=" fa-spin");var a=new Date().valueOf().toString();t.setAttribute("data-last-requested-refresh",a),setTimeout(()=>{if(t.getAttribute("data-last-requested-refresh")===a){for(var e=t.querySelectorAll(".fa-spin"),i=0;i<e.length;i++)e[i].className=e[i].className.replace(/fa-spin/g,"");var s=t.querySelectorAll(".ab-initial-spinner")[0];if(null!=s){var r=document.createElement("span");r.innerHTML=ef.ea().get("FEED_TIMEOUT_MESSAGE")||"",null!=s.parentNode&&(s.parentNode.appendChild(r),s.parentNode.removeChild(s))}"true"===t.getAttribute("aria-busy")&&t.setAttribute("aria-busy","false")}},Z.Cr),e.dr()}}function ij(e,t,i,a,r){if(e$(t)){var n=[];for(var o of t)if(o instanceof s){if(o.url&&to.test(o.url)&&ta(tt(o.url))){er.error(te(e9.Li,"Content Card"));continue}n.push(o)}if(e.cards=n,e.lastUpdated=i,null!=a){if(a.setAttribute("aria-busy","false"),null==e.lastUpdated)i_(a);else{var l=a.querySelectorAll(".ab-feed-body")[0];if(null!=l){var u=iI(e,r);l.parentNode&&l.parentNode.replaceChild(u,l),iO(e,u.parentNode)}}}}}function iM(e){if(ew.rr())for(var t=document.querySelectorAll(".ab-feed"),i=0;i<t.length;i++)(null==e||null!=e&&t[i].parentNode===e)&&i_(t[i])}function iP(e,t){if(ew.rr()){tB(void 0,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button[dir=rtl]{left:0}.ab-feed .ab-card .ab-close-button[dir=ltr]{right:0}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=ltr]{padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body[dir=rtl]{padding-right:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area[dir=rtl]{padding:20px 25px 25px 0}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),tF();var i,a,s=!1;null==e&&(e=document.body,s=!0);var r=ew.ee(ih.tn)||!1,n=eE.o().Ws(!1);"function"==typeof t&&ij(n,t(n.cards.slice()),n.lastUpdated,null,r);var o=function(e,t,i){var a=document.createElement("div");a.className="ab-feed ab-hide ab-effect-slide",a.setAttribute("role","dialog"),a.setAttribute("aria-label","Feed"),a.setAttribute("tabindex","-1");var s=document.createElement("div");s.className="ab-feed-buttons-wrapper",s.setAttribute("role","group"),a.appendChild(s);var r=document.createElement("i");r.className="fa fa-times ab-close-button",r.setAttribute("aria-label","Close Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");var n=e=>{i_(a),e.stopPropagation()};r.addEventListener("keydown",e=>{e.keyCode!==tP.lo&&e.keyCode!==tP.Ze||n(e)}),r.onclick=n;var o=document.createElement("i");o.className="fa fa-refresh ab-refresh-button",e&&null==e.lastUpdated&&(o.className+=" fa-spin"),o.setAttribute("aria-label","Refresh Feed"),o.setAttribute("tabindex","0"),o.setAttribute("role","button");var l=t=>{iD(e,a),t.stopPropagation()};o.addEventListener("keydown",e=>{e.keyCode!==tP.lo&&e.keyCode!==tP.Ze||l(e)}),o.onclick=l,s.appendChild(o),s.appendChild(r),a.appendChild(iI(e,t));var u=()=>iO(e,a);if(a.addEventListener("scroll",u),!i){window.addEventListener("scroll",u);var h=eo.oe();iT[h]=u,a.setAttribute("data-listener-id",h)}return a}(n,r,s),l=eE.o(),u=l.Bs();(null==n.lastUpdated||new Date().valueOf()-n.lastUpdated.valueOf()>Z.ur)&&(null==u||new Date().valueOf()-u>Z.ur)&&(er.info(`Cached content cards were older than max TTL of ${Z.ur} ms, requesting an update from the server.`),iD(n,o),l.Es(new Date().valueOf()));var h=new Date().valueOf();(i=iz(function(e){var i=o.querySelectorAll(".ab-refresh-button")[0];if(null!=i){var a,s=a=500-(new Date().valueOf()-h),l=o.getAttribute("data-last-requested-refresh");l&&(isNaN(s=parseInt(l))||(a-=new Date().valueOf()-s)),setTimeout(function(){i.className=i.className.replace(/fa-spin/g,"")},Math.max(a,0))}var u=e.cards;"function"==typeof t&&(u=t(u.slice())),ij(n,u,e.lastUpdated,o,r)}))&&o.setAttribute(e5,i);var c=function(e){for(var t=e.querySelectorAll(".ab-feed"),i=null,a=0;a<t.length;a++)t[a].parentNode===e&&(i=t[a]);null!=i?(i_(i),null!=i.parentNode&&i.parentNode.replaceChild(o,i)):e.appendChild(o),setTimeout(function(){o.className=o.className.replace("ab-hide","ab-show")},0),s&&o.focus(),iO(n,o),function(e,t){var i,a=t.querySelectorAll(".ab-image-area"),s=0;for(var r of(a.length>0&&(s=a[0].offsetWidth),e))if((i=r._t)&&r.imageUrl&&"number"==typeof r.aspectRatio){var n=s/r.aspectRatio;n&&(i.style.height=`${n}px`)}}(n.cards,e)};null!=e?c(e):window.onload=(a=window.onload,function(){"function"==typeof a&&a(new Event("oldLoad")),c(document.body)})}}function iz(e){if(ew.rr()){var t=eE.o(),i=t.St(e);if(!t.jt()){var a=ew.nn();if(a){var s=a.rn(()=>{t.fi(void 0,void 0,!0)});s&&t.yt(s)}}return i}}function iR(e,t){ew.rr()&&(document.querySelectorAll(".ab-feed").length>0?iM():iP(e,t))}var iL={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"};function iU(e){if(ew.rr()){var t=ew.m();if(t){if(!e$(e))return er.error("Cannot set SDK metadata because metadata is not an array."),!1;for(var i of e)if(!eF(iL,i,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return t.addSdkMetadata(e),!0}}}function iB(e,t){if(ew.rr()){if(null==e||0===e.length||e!=e)return void er.error("changeUser requires a non-empty userId.");if(e7(e)>c.mr)return void er.error(`Rejected user id "${e}" because it is longer than ${c.mr} bytes.`);if(null==t||td(t,"set signature for new user","signature")){var i=ew.nn();i&&i.changeUser(e.toString(),ew.lr(),t)}}}function iF(){er.info("Destroying Braze instance"),ew.destroy(!0)}function i$(){var e=ew.nn();e&&e.requestImmediateDataFlush();var t=new m.ne(null,!0),a="This-cookie-will-expire-in-"+t.se();t.store(tf.ie,a);var s=i.Us.Rs;new i(s,er).setItem(s.Fs.le,s.me,!0),er.info("disableSDK was called"),ew.destroy(!1),ew.ce(!0)}function iG(){new m.ne(null,!0).remove(tf.ie);var e=i.Us.Rs;new i(e,er).be(e.Fs.le,e.me),er.info("enableSDK was called"),ew.destroy(!1),ew.ce(!1)}function iq(e){if(ew.rr()){var t=ew.de();if(t){var i=t.fe().id;if("function"!=typeof e)return i;er.warn("The callback for getDeviceId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getDeviceId()`)"),e(i)}}}function iH(e,t){return ew.initialize(e,t)}function iX(){return!!new m.ne(null,!0).br(tf.ie)}function iW(){return ew.ao()}function iK(e,t){if(!ew.rr())return!1;if(null==e||e.length<=0)return er.error(`logCustomEvent requires a non-empty eventName, got "${e}". Ignoring event.`),!1;if(!tu(e,"log custom event","the event name"))return!1;var[i,a]=tp(t,"logCustomEvent","eventProperties",`log custom event "${e}"`,"event");if(!i)return!1;var s=ew.l();if(s&&s.ge(e))return er.info(`Custom Event "${e}" is blocklisted, ignoring.`),!1;var r=ex.rt(eR.CustomEvent,{n:e,p:a});if(r.W)for(var n of(er.info(`Logged custom event "${e}".`),r.ue))iu.o().ve(tU.pe,[e,t],n);return r.W}function iJ(e,t,i,a,s){if(!ew.rr())return!1;if(null==i&&(i="USD"),null==a&&(a=1),null==e||e.length<=0)return er.error(`logPurchase requires a non-empty productId, got "${e}", ignoring.`),!1;if(!tu(e,"log purchase","the purchase name"))return!1;if(null==t||isNaN(parseFloat(t.toString())))return er.error(`logPurchase requires a numeric price, got ${t}, ignoring.`),!1;var r=parseFloat(t.toString()).toFixed(2);if(null==a||isNaN(parseInt(a.toString())))return er.error(`logPurchase requires an integer quantity, got ${a}, ignoring.`),!1;var n=parseInt(a.toString());if(n<1||n>100)return er.error(`logPurchase requires a quantity >1 and <100, got ${n}, ignoring.`),!1;if(-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(i=null!=i?i.toUpperCase():i))return er.error(`logPurchase requires a valid currencyCode, got ${i}, ignoring.`),!1;var[o,l]=tp(s,"logPurchase","purchaseProperties",`log purchase "${e}"`,"purchase");if(!o)return!1;var u=ew.l();if(u&&u.Dr(e))return er.info(`Purchase "${e}" is blocklisted, ignoring.`),!1;var h=ex.rt(eR.Pr,{pid:e,c:i,p:r,q:n,pr:l});if(h.W)for(var c of(er.info(`Logged ${n} purchase${n>1?"s":""} of "${e}" for ${i} ${r}.`),h.ue))iu.o().ve(tU.Rr,[e,s],c);return h.W}function iV(){if(ew.rr()){var e=ew.nn();if(e){e.openSession();var t=i.Us.Rs,a=new i(t,er);a.jr(t.Fs.hr,(i,s)=>{var r=s.lastClick,n=s.trackingString;er.info(`Firing push click trigger from ${n} push click at ${r}`);var o=e.kr(r,n),l=function(){iu.o().ve(tU.vr,[n],o)};e.$r(l,l),a.be(t.Fs.hr,i)}),a.Ds(t.Fs.wr,function(t){e.yr(t)})}}}function iY(){ew.rr()&&ew.removeAllSubscriptions()}function iZ(e){if(ew.rr()){var t=ew.nn();t&&t.requestImmediateDataFlush(e)}}function iQ(e){er.setLogger(e)}function i0(e){if(!ew.rr()||""===e||!td(e,"set signature","signature",!1))return!1;var t=ew.Sr();return!!t&&(t.setSdkAuthenticationSignature(e),!0)}function i1(e){var t;if(ew.rr())return null===(t=ew.Sr())||void 0===t?void 0:t.subscribeToSdkAuthenticationFailures(e)}function i3(){er.toggleLogging()}function i5(){var e=ew.p();if(null==e)return void er.warn(e3);e.clearData();for(var t=eH(i.Us),a=0;a<t.length;a++){var s=t[a],r=i.Us[s];new i(r,er).clearData()}if(ew.rr())for(var n of ew.lr())n.clearData(!0);var o=ew.m();o&&o.fo()}function i2(){if(ew.rr())return ed.isPushBlocked()}function i4(){if(ew.rr())return ed.isPushPermissionGranted()}function i8(){if(ew.rr())return ed.isPushSupported()}var i7={i:!1,aa:null,ea:()=>(i7.t(),i7.aa||(i7.aa=new Q(ew.gr(),ew.ba(),ew.de(),ew.V(),ew.ee(ih.Ma),ew.ee(ih._a),ew.ee(ih.ka),ew.l(),ew.ee(ih.qa),ew.ee(ih.Aa),ew.p())),i7.aa),t:()=>{i7.i||(ew.g(i7),i7.i=!0)},destroy:()=>{i7.aa=null,i7.i=!1}};function i6(e,t){if(ew.rr())return eT.ea().subscribe((t,i,a)=>{var s=ew.nn();s&&s.requestImmediateDataFlush(),"function"==typeof e&&e(t,i,a)},t)}function i9(e,t){if(ew.rr())return eT.ea().unsubscribe(e,t)}var ae={i:!1,provider:null,o:()=>(ae.t(),ae.provider||(ae.provider=new ei(ew.l(),ew.m(),ew.p(),ew.u()),ew.v(ae.provider)),ae.provider),t:()=>{ae.i||(ew.g(ae),ae.i=!0)},destroy:()=>{ae.provider=null,ae.i=!1}};function at(e,t,i=!1){if(ew.rr())return eD.o().refreshFeatureFlags(e,t,i)}function ai(e,t){at(e,t)}function aa(e){if(ew.rr()){var t=ew.l();if(t&&!t.Re())return null;var i=eD.o().De();return i[e]?i[e]:null}}function as(){if(ew.rr()){var e=[],t=ew.l();if(t&&!t.Re())return e;var i=eD.o().De();for(var a in i)e.push(i[a]);return e}}function ar(e){if(ew.rr()){var t=eD.o();if(t._e()){var i=as();i&&"function"==typeof e&&e(i)}return t.St(e)}}function an(e){if(ew.rr()){if(!e)return!1;var t="Not logging a feature flag impression. The feature flag was not part of any matching experiment.",i=eD.o().De();if(!i[e])return er.info(t),!1;var a=i[e].trackingString;if(!a)return er.info(t),!1;var s=eD.o().Se();return s[a]?(er.info("Not logging another feature flag impression. This ID was already logged this session."),!1):(s[a]=!0,eD.o().Ne(s),ex.rt(eR.Fr,{fid:e,fts:a}).W)}}var ao={i:!1,provider:null,o:()=>(ao.t(),ao.provider||(ao.provider=new es(ew.l(),ew.m(),ew.p(),ew.u()),ew.v(ao.provider)),ao.provider),t:()=>{ao.i||(ew.g(ao),ao.i=!0)},destroy:()=>{ao.provider=null,ao.i=!1}};function al(e,t){var i=e[t];if(!i)return null;var a=i.zt,s=new Date().valueOf();return -1!==a&&1e3*a<s?(er.info(`Banner with ID: ${i.id} and placement ID: ${t} has expired.`),null):i}function au(e){if(ew.rr()){!1===(null===(t=ew.l())||void 0===t?void 0:t.Dt())&&er.error(e2);var t,i=eM.o();return i.k()?al(i.ht(),e):null}}var ah="data-ab-banner-placement-id";function ac(e,t){if(e.At()){var i;return(i=document.createElement("div")).id=e.id,i.className="ab-html-control-banner",i.setAttribute(ah,e.placementId),i}var a=document.createElement("iframe");return a.id=e.id,t&&a.setAttribute("nonce",t),a.className="ab-html-banner",a.setAttribute(ah,e.placementId),a.setAttribute("title","Banner"),t7(a,e.html,t),a.onload=()=>{var t=a.contentWindow,i=t.document.getElementsByTagName("title");i&&i.length>0&&a.setAttribute("title",i[0].textContent||"");var s=Object.assign(Object.assign({},t4(a)),{logClick:function(){(function(e,t){if(ew.rr()){if(!(e instanceof ea))return er.error("Banner argument to logBannerClick must be an Banner object.");var i=eM.o(),a=i.ht();0===eH(a).length?er.info("Not logging banner click. No banners exist."):a[e.placementId]?i.nt(e,t):er.info(`Not logging banner click for ID ${e.placementId}. The placement ID did not correspond to any banner.`)}})(e,...arguments)},closeMessage:function(){},setBannerHeight:e=>{isNaN(e)||!isFinite(e)||e<0?er.warn(`Invalid banner height: ${e}`):a.style.height=`${e}px`}});t.brazeBridge=s,t.appboyBridge=s,t.dispatchEvent(new CustomEvent("ab.BridgeReady"))},a}function ad(){for(var e=document.querySelectorAll(".ab-html-banner, .ab-html-control-banner"),t=[],i=0;i<e.length;i++){var a=e[i],s=a.getAttribute(ah);if(s){var r=eS.oo(a),n=eS.no(a);if(!r||!n){var o=tI(a),l=tO(a);o&&!r&&iC(a),l&&!n&&iN(a),eS.oo(a)&&eS.no(a)&&t.push(s)}}}t.length>0&&function(e){if(ew.rr()&&e&&!(e.length<=0)){var t=eM.o(),i=t.ht();if(0===eH(i).length)return er.info("Not logging banners impression. No banners exist.");var a=t.Tt(),s=[];for(var r of e){var n=i[r];n?a[n.placementId]?er.info(`Not logging banners impression for ID ${r}. This ID was already logged this session.`):(a[n.placementId]=!0,s.push(n.id)):er.info(`Not logging banners impression for ID ${r}. The placement ID did not correspond to any banner.`)}0!==s.length&&(t.Rt(a),ex.rt(eR.ro,{ids:s}).W)}}(t)}function ap(){if(ew.rr()){var e={},t=ew.l();if(!1===(null==t?void 0:t.Dt())&&er.error(e2),!(null==t?void 0:t.Dt()))return e;var i=eM.o().ht();for(var a in i)e[a]=al(i,a);return e}}function ab(e){if(ew.rr()){var t,i=eM.o();if(i.Ct()){var a=ap();a&&"function"==typeof e&&e(a)}var s=i.St(e);if(!i.jt()){var r=null===(t=ew.nn())||void 0===t?void 0:t.rn(()=>{var e=i.et();e&&e.length>0&&i.M(e)});r&&i.yt(r)}return s}}function ag(e,t){if(ew.rr()){if(!e)return void er.error("Not inserting banner: banner was not provided.");if(!t)return void er.error("Not inserting banner: parentNode was not provided.");if(!ew.ee(ih.re))return void er.error("Banners are disabled. Use the 'allowUserSuppliedJavascript' option for braze.initialize to enable these messages.");tB(void 0,"banner",".ab-html-banner{width:100%;height:100%;border:none;display:block}.ab-html-control-banner{width:0;height:0;margin:0;border:none}");var i=ac(e,ew.ee(ih.er)),a=ab(a=>{var s,r=a[e.placementId];r?t.replaceChildren(ac(r,ew.ee(ih.er))):(null!=(s=i.getAttribute(e5))&&iS(s),i&&i.parentNode&&i.parentNode.removeChild(i))});a&&i.setAttribute(e5,a),t.replaceChildren(i),t_(window,"scroll",ad),ad()}}function am(e,t,i){if(!ew.rr())return void er.warn(e3);var a=ew.l();if(a){if(!e$(e)||0===e.length)return void er.warn("placementIds should be a non-empty array.");if(!ew.ee(ih.re))return void er.error("Banners are disabled. Use the 'allowUserSuppliedJavascript' option for braze.initialize to enable these messages.");var s=eM.o();if(!1===a.Dt()&&er.error(e2),!s.k())return void a.P(()=>{am(e,t,i)});var r=a.te();e.length>r&&(er.warn(`Number of placement IDs requested exceeds the max allowed. Trimming placementIds array from length ${e.length} to ${r} (max allowed).`),e=e.slice(0,r)),0!==(e=e.filter(e=>!!tl.test(e)||(er.warn(`Placement ID should be a valid utf8 string with no whitespaces, filtering out: ${e}`),!1))).length&&(er.info(`Requesting banners for placement IDs: ${JSON.stringify(e)}`),s.M(e,t,i))}}return e({addSdkMetadata:iU,automaticallyShowInAppMessages:is,changeUser:iB,deferInAppMessage:ir,destroy:iF,disableSDK:i$,enableSDK:iG,getAllBanners:ap,getAllFeatureFlags:as,getBanner:au,getCachedContentCards:iy,getDeferredInAppMessage:io,getDeviceId:iq,getFeatureFlag:aa,getUser:tZ,handleBrazeAction:t0,hideContentCards:iM,initialize:iH,insertBanner:ag,isDisabled:iX,isInitialized:iW,isPushBlocked:i2,isPushPermissionGranted:i4,isPushSupported:i8,logCardDismissal:ip,logContentCardClick:ig,logContentCardImpressions:ib,logCustomEvent:iK,logFeatureFlagImpression:an,logInAppMessageButtonClick:t6,logInAppMessageClick:tX,logInAppMessageHtmlClick:t5,logInAppMessageImpression:tH,logPurchase:iJ,openSession:iV,refreshFeatureFlags:ai,removeAllSubscriptions:iY,removeSubscription:iS,requestBannersRefresh:am,requestContentCardsRefresh:ix,requestImmediateDataFlush:iZ,requestPushPermission:i6,setLogger:iQ,setSdkAuthenticationSignature:i0,showContentCards:iP,showInAppMessage:ii,subscribeToBannersUpdates:ab,subscribeToContentCardsUpdates:iz,subscribeToFeatureFlagsUpdates:ar,subscribeToInAppMessage:ia,subscribeToSdkAuthenticationFailures:i1,toggleContentCards:iR,toggleLogging:i3,unregisterPush:i9,wipeData:i5}),[()=>{er=eP,en=ez,eo=eL,(i=class{constructor(e,t){this.database=e,this.vd=t,this.parent="undefined"==typeof window?self:window,this.database=e,this.vd=t}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var e;try{if(null==this.Dd())return!1;var t=null===(e=this.Dd())||void 0===e?void 0:e.open("Braze IndexedDB Support Test");if(t&&(t.onupgradeneeded=()=>t.result.close(),t.onsuccess=()=>t.result.close()),"undefined"!=typeof window){var i=window,a=i.chrome||i.browser||i.pd;if(a&&a.runtime&&a.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(e){return this.vd.info("Not using IndexedDB for storage due to following error: "+e),!1}}Bd(e,t){var i,a=null===(i=this.Dd())||void 0===i?void 0:i.open(this.database.Sd,this.database.VERSION);if(null==a)return"function"==typeof t&&t(),!1;var s=this;return a.onupgradeneeded=e=>{s.vd.info("Upgrading indexedDB "+s.database.Sd+" to v"+s.database.VERSION+"...");var t,i=null===(t=e.target)||void 0===t?void 0:t.result;for(var a in s.database.Fs)s.database.Fs.hasOwnProperty(a)&&!i.objectStoreNames.contains(s.database.Fs[a])&&i.createObjectStore(s.database.Fs[a])},a.onsuccess=i=>{var a,r=null===(a=i.target)||void 0===a?void 0:a.result;r.onversionchange=()=>{r.close(),"function"==typeof t&&t(),s.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},e(r)},a.onerror=e=>{var i;return s.vd.info("Could not open indexedDB "+s.database.Sd+" v"+s.database.VERSION+": "+(null===(i=e.target)||void 0===i?void 0:i.errorCode)),"function"==typeof t&&t(),!0},!0}setItem(e,t,i,a,s){if(!this.isSupported())return"function"==typeof s&&s(),!1;var r=this;return this.Bd(n=>{if(!n.objectStoreNames.contains(e))return r.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof s&&s(),void n.close();var o=n.transaction([e],"readwrite");o.oncomplete=()=>n.close();var l=o.objectStore(e).put(i,t);l.onerror=()=>{r.vd.error("Could not store object "+t+" in "+e+" on indexedDB "+r.database.Sd),"function"==typeof s&&s()},l.onsuccess=()=>{"function"==typeof a&&a()}},s)}getItem(e,t,i){if(!this.isSupported())return!1;var a=this;return this.Bd(s=>{if(!s.objectStoreNames.contains(e))return a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),void s.close();var r=s.transaction([e],"readonly");r.oncomplete=()=>s.close();var n=r.objectStore(e).get(t);n.onerror=()=>{a.vd.error("Could not retrieve object "+t+" in "+e+" on indexedDB "+a.database.Sd)},n.onsuccess=e=>{var t,a=null===(t=e.target)||void 0===t?void 0:t.result;null!=a&&i(a)}})}jr(e,t,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;var a=this;return this.Bd(s=>{if(!s.objectStoreNames.contains(e))return a.vd.error("Could not retrieve last record from "+e+" on indexedDB "+a.database.Sd+" - "+e+" is not a valid objectStore"),"function"==typeof i&&i(),void s.close();var r=s.transaction([e],"readonly");r.oncomplete=()=>s.close();var n=r.objectStore(e).openCursor(null,"prev");n.onerror=()=>{a.vd.error("Could not open cursor for "+e+" on indexedDB "+a.database.Sd),"function"==typeof i&&i()},n.onsuccess=e=>{var a,s=null===(a=e.target)||void 0===a?void 0:a.result;null!=s&&null!=s.value&&null!=s.key?t(s.key,s.value):"function"==typeof i&&i()}},i)}be(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var s=a.transaction([e],"readwrite");s.oncomplete=()=>a.close(),s.objectStore(e).delete(t).onerror=()=>{i.vd.error("Could not delete record "+t+" from "+e+" on indexedDB "+i.database.Sd)}})}Ds(e,t){if(!this.isSupported())return!1;var i=this;return this.Bd(a=>{if(!a.objectStoreNames.contains(e))return i.vd.error("Could not retrieve objects from "+e+" on indexedDB "+i.database.Sd+" - "+e+" is not a valid objectStore"),void a.close();var s=a.transaction([e],"readwrite");s.oncomplete=()=>a.close();var r=s.objectStore(e),n=r.openCursor(),o=[];n.onerror=()=>{o.length>0?(i.vd.info("Cursor closed midway through for "+e+" on indexedDB "+i.database.Sd),t(o)):i.vd.error("Could not open cursor for "+e+" on indexedDB "+i.database.Sd)},n.onsuccess=e=>{var i,a=null===(i=e.target)||void 0===i?void 0:i.result;null!=a?(null!=a.value&&null!=a.key&&(r.delete(a.key).onsuccess=()=>{o.push(a.value)}),"function"==typeof a.continue&&a.continue()):o.length>0&&t(o)}})}clearData(){if(!this.isSupported())return!1;var e=[];for(var t in this.database.Fs)this.database.Fs.hasOwnProperty(t)&&this.database.Fs[t]!==this.database.Fs.le&&e.push(this.database.Fs[t]);var i=this;return this.Bd(function(t){var a=t.transaction(e,"readwrite");a.oncomplete=()=>t.close();for(var s=0;s<e.length;s++){var r=e[s];a.objectStore(r).clear().onerror=function(){i.vd.error("Could not clear "+this.source.name+" on indexedDB "+i.database.Sd)}}a.onerror=function(){i.vd.error("Could not clear object stores on indexedDB "+i.database.Sd)}})}}).Us={Rs:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,Fs:{Tu:"data",hr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",As:"cardUpdates",le:"optOut",wr:"pendingData",xh:"sdkAuthenticationSignature"},me:1}},a=class{constructor(){this.yi={}}wt(e){if("function"!=typeof e)return null;var t=eo.oe();return this.yi[t]=e,t}removeSubscription(e){delete this.yi[e]}removeAllSubscriptions(){this.yi={}}sc(){return Object.keys(this.yi).length}L(e){var t=[];for(var i in this.yi){var a=this.yi[i];t.push(a(e))}return t}},e("Card",s=class e{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g){this.id=e,this.viewed=t,this.title=i,this.imageUrl=a,this.description=s,this.updated=r,this.expiresAt=n,this.url=o,this.linkText=l,this.aspectRatio=u,this.extras=h,this.pinned=c,this.dismissible=d,this.clicked=p,this.language=b,this.altImageText=g,this.id=e,this.viewed=t||!1,this.title=i||"",this.imageUrl=a,this.description=s||"",this.updated=r||null,this.expiresAt=n||null,this.url=o,this.linkText=l,null==u?this.aspectRatio=null:(u=parseFloat(u.toString()),this.aspectRatio=isNaN(u)?null:u),this.extras=h||{},this.pinned=c||!1,this.dismissible=d||!1,this.dismissed=!1,this.clicked=p||!1,this.isControl=!1,this.language=b||null,this.altImageText=g||null,this.test=!1,this.ti=null,this.ii=null,this.si=null}subscribeToClickedEvent(e){return this.hi().wt(e)}subscribeToDismissedEvent(e){return this.li().wt(e)}removeSubscription(e){this.hi().removeSubscription(e),this.li().removeSubscription(e)}removeAllSubscriptions(){this.hi().removeAllSubscriptions(),this.li().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){"function"==typeof this.logCardDismissal&&this.logCardDismissal();var t=this._t;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout(function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},e.ni))},500))}}hi(){return null==this.ti&&(this.ti=new a),this.ti}li(){return null==this.ii&&(this.ii=new a),this.ii}Qt(){var t=new Date().valueOf();return!(null!=this.si&&t-this.si<e.ei)&&(this.si=t,this.viewed=!0,!0)}$t(){this.viewed=!0,this.clicked=!0,this.hi().L()}Kt(){return!(!this.dismissible||this.dismissed)&&(this.dismissed=!0,this.li().L(),!0)}ri(t){if(null==t||t[e.ui.rs]!==this.id)return!0;if(t[e.ui.Ei])return!1;if(null!=t[e.ui.ps]&&null!=this.updated&&parseInt(t[e.ui.ps])<eW(this.updated.valueOf()))return!0;if(t[e.ui.os]&&!this.viewed&&(this.viewed=!0),t[e.ui.js]&&!this.clicked&&(this.clicked=t[e.ui.js]),null!=t[e.ui.cs]&&(this.title=t[e.ui.cs]),null!=t[e.ui.ns]&&(this.imageUrl=t[e.ui.ns]),null!=t[e.ui.ds]&&(this.description=t[e.ui.ds]),null!=t[e.ui.ps]){var i,a=eK(t[e.ui.ps]);null!=a&&(this.updated=a)}if(null!=t[e.ui.us]&&(i=t[e.ui.us]===e.Ti?null:eK(t[e.ui.us]),this.expiresAt=i),null!=t[e.ui.URL]&&(this.url=t[e.ui.URL]),null!=t[e.ui.ls]&&(this.linkText=t[e.ui.ls]),null!=t[e.ui.fs]){var s=parseFloat(t[e.ui.fs].toString());this.aspectRatio=isNaN(s)?null:s}return null!=t[e.ui.xs]&&(this.extras=t[e.ui.xs]),null!=t[e.ui.bs]&&(this.pinned=t[e.ui.bs]),null!=t[e.ui.gs]&&(this.dismissible=t[e.ui.gs]),null!=t[e.ui.zs]&&(this.language=t[e.ui.zs]),null!=t[e.ui.ks]&&(this.altImageText=t[e.ui.ks]),null!=t[e.ui.qs]&&(this.test=t[e.ui.qs]),!0}dt(){er.error("Must be implemented in a subclass")}}),s.Ti=-1,s.ui={rs:"id",os:"v",gs:"db",Ei:"r",ps:"ca",bs:"p",us:"ea",xs:"e",ts:"tp",ns:"i",cs:"tt",ds:"ds",URL:"u",ls:"dm",fs:"ar",js:"cl",qs:"t",zs:"language",ks:"image_alt"},s.es={hs:"captioned_image",oi:"text_announcement",ai:"short_news",Ii:"banner_image",Ni:"control"},s.ss={rs:"id",os:"v",gs:"db",Ai:"cr",ps:"ca",bs:"p",ci:"t",us:"ea",xs:"e",ts:"tp",ns:"i",cs:"tt",ds:"ds",URL:"u",ls:"dm",fs:"ar",js:"cl",qs:"s",zs:"l",ks:"ia"},s.mi={Si:"ADVERTISING",Di:"ANNOUNCEMENTS",pi:"NEWS",di:"SOCIAL"},s.ni=400,s.ei=1e4,e("ImageOnly",r=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d){super(e,t,null,i,null,a,s,r,null,n,o,l,u,h,c,d),this.Xt="ab-image-only",this.Yt=!1,this.test=!1}dt(){var e={};return e[s.ss.ts]=s.es.Ii,e[s.ss.rs]=this.id,e[s.ss.os]=this.viewed,e[s.ss.ns]=this.imageUrl,e[s.ss.ps]=this.updated,e[s.ss.us]=this.expiresAt,e[s.ss.URL]=this.url,e[s.ss.fs]=this.aspectRatio,e[s.ss.xs]=this.extras,e[s.ss.bs]=this.pinned,e[s.ss.gs]=this.dismissible,e[s.ss.js]=this.clicked,e[s.ss.zs]=this.language,e[s.ss.ks]=this.altImageText,e[s.ss.qs]=this.test,e}}),e("CaptionedImage",n=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g){super(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g),this.Xt="ab-captioned-image",this.Yt=!0,this.test=!1}dt(){var e={};return e[s.ss.ts]=s.es.hs,e[s.ss.rs]=this.id,e[s.ss.os]=this.viewed,e[s.ss.cs]=this.title,e[s.ss.ns]=this.imageUrl,e[s.ss.ds]=this.description,e[s.ss.ps]=this.updated,e[s.ss.us]=this.expiresAt,e[s.ss.URL]=this.url,e[s.ss.ls]=this.linkText,e[s.ss.fs]=this.aspectRatio,e[s.ss.xs]=this.extras,e[s.ss.bs]=this.pinned,e[s.ss.gs]=this.dismissible,e[s.ss.js]=this.clicked,e[s.ss.zs]=this.language,e[s.ss.ks]=this.altImageText,e[s.ss.qs]=this.test,e}}),e("ClassicCard",o=class extends s{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g){super(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g),this.Xt="ab-classic-card",this.Yt=!0}dt(){var e={};return e[s.ss.ts]=s.es.ai,e[s.ss.rs]=this.id,e[s.ss.os]=this.viewed,e[s.ss.cs]=this.title,e[s.ss.ns]=this.imageUrl,e[s.ss.ds]=this.description,e[s.ss.ps]=this.updated,e[s.ss.us]=this.expiresAt,e[s.ss.URL]=this.url,e[s.ss.ls]=this.linkText,e[s.ss.fs]=this.aspectRatio,e[s.ss.xs]=this.extras,e[s.ss.bs]=this.pinned,e[s.ss.gs]=this.dismissible,e[s.ss.js]=this.clicked,e[s.ss.zs]=this.language,e[s.ss.ks]=this.altImageText,e[s.ss.qs]=this.test,e}}),e("ControlCard",l=class extends s{constructor(e,t,i,a,s,r){super(e,t,null,null,null,i,a,null,null,null,s,r),this.isControl=!0,this.Xt="ab-control-card",this.Yt=!1}dt(){var e={};return e[s.ss.ts]=s.es.Ni,e[s.ss.rs]=this.id,e[s.ss.os]=this.viewed,e[s.ss.ps]=this.updated,e[s.ss.us]=this.expiresAt,e[s.ss.xs]=this.extras,e[s.ss.bs]=this.pinned,e[s.ss.qs]=this.test,e}}),u=class e{constructor(e,t,i,a,s){this.userId=e,this.type=t,this.time=i,this.sessionId=a,this.data=s,this.userId=e,this.type=t,this.time=null==i||""===i?new Date().valueOf():i,this.sessionId=a,this.data=s}Ar(){var e,t={name:this.type,time:eW(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(t.user_id=this.userId);var i=(null===(e=ew.Sr())||void 0===e?void 0:e.fh())||!1;if(!t.user_id&&!i){var a=e4(ew.p());a&&(t.alias=a)}return t}dt(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new e(t.user_id,t.name,t.time,t.session_id,t.data)}static gE(e){return null!=e&&eq(e)&&null!=e.t&&""!==e.t}static qn(t){return new e(t.u,t.t,t.ts,t.s,t.d)}},h=class e{constructor(e,t,i){this.eu=e,null==e&&(e=eo.oe()),!i||isNaN(i)?this.Gl=new Date().valueOf():this.Gl=i,this.eu=e,this.ql=new Date().valueOf(),this.kl=t}dt(){return`g:${encodeURIComponent(this.eu)}|e:${this.kl}|c:${this.Gl}|l:${this.ql}`}static AE(e){if("string"!=typeof e)return null;var t,i=e.lastIndexOf("|e:"),a=e.substring(0,i),s=a.split("g:")[1];return t=/[|:]/.test(s)?encodeURIComponent(s):s,e=e.replace(a,`g:${t}`)}static qn(t){var i;if("string"==typeof t)try{var a=t.split("|");if(!e$(a)||4!==a.length)return null;var s=e=>e.split(":")[1],r=e=>{var t=parseInt(s(e));if(!isNaN(t))return t};(i=new e(decodeURIComponent(s(a[0])),r(a[1]),r(a[2]))).ql=r(a[3])}catch(e){er.info(`Unable to parse cookie string ${t}, failed with error: ${e8(e)}`)}else{if(null==t||null==t.g)return null;(i=new e(t.g,t.e,t.c)).ql=t.l}return i}},el=new RegExp(/^.+@.+\..+$/),e("User",c=class e{constructor(e,t){this.Cs=e,this.Cn=t,this.Cs=e,this.Cn=t}getUserId(e){var t=this.Cs.getUserId();if("function"!=typeof e)return t;er.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),e(t)}addAlias(e,t){return!td(e,"add alias","the alias",!1)||e.length<=0?(er.error("addAlias requires a non-empty alias"),!1):!td(t,"add alias","the label",!1)||t.length<=0?(er.error("addAlias requires a non-empty label"),!1):this.Cn.En(e,t).W}setFirstName(e){return!!td(e,"set first name","the firstName",!0)&&this.Cs.nu("first_name",e)}setLastName(e){return!!td(e,"set last name","the lastName",!0)&&this.Cs.nu("last_name",e)}setEmail(e){return null===e||"string"==typeof e&&null!=e.toLowerCase().match(el)?this.Cs.nu("email",e):(er.error(`Cannot set email address - "${e}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!eF(e.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.Cs.nu("gender",t)}setDateOfBirth(e,t,i){return null===e&&null===t&&null===i?this.Cs.nu("dob",null):(e=null!=e?parseInt(e.toString()):null,t=null!=t?parseInt(t.toString()):null,i=null!=i?parseInt(i.toString()):null,null==e||null==t||null==i||isNaN(e)||isNaN(t)||isNaN(i)||t>12||t<1||i>31||i<1?(er.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.Cs.nu("dob",`${e}-${t}-${i}`))}setCountry(e){return!!td(e,"set country","the country",!0)&&this.Cs.nu("country",e)}setHomeCity(e){return!!td(e,"set home city","the homeCity",!0)&&this.Cs.nu("home_city",e)}setLanguage(e){return!!td(e,"set language","the language",!0)&&this.Cs.nu("language",e)}setEmailNotificationSubscriptionType(t){return!!eF(e.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!eF(e.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.Cs.nu("push_subscribe",t)}setPhoneNumber(t){return!!td(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(e.Fn)?this.Cs.nu("phone",t):(er.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(e,t,i,a,s){return null==e||null==t?(er.error("Cannot set last-known location - latitude and longitude are required."),!1):(e=parseFloat(e.toString()),t=parseFloat(t.toString()),null!=i&&(i=parseFloat(i.toString())),null!=a&&(a=parseFloat(a.toString())),null!=s&&(s=parseFloat(s.toString())),isNaN(e)||isNaN(t)||null!=i&&isNaN(i)||null!=a&&isNaN(a)||null!=s&&isNaN(s)?(er.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):e>90||e<-90||t>180||t<-180?(er.error("Cannot set last-known location - latitude and longitude are bounded by \xb190 and \xb1180 respectively."),!1):null!=i&&i<0||null!=s&&s<0?(er.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Cn.setLastKnownLocation(this.Cs.getUserId(),e,t,a,i,s).W)}setCustomUserAttribute(e,t,i){if(!th(e))return!1;var a=t=>{var[i]=tp(t,e1,"attribute value",`set custom user attribute "${e}"`,"custom user attribute");return i};if(e$(t)){var[s,r]=function(e,t){var i=!1,a=!1,s=()=>{er.error("Custom attribute arrays must be either string arrays or object arrays.")};for(var r of t)if("string"==typeof r){if(a)return s(),[!1,!1];if(!tu(r,`set custom user attribute "${e}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!eq(r)||i)return s(),[!1,!1];if(!tp(r,e1,"attribute value",`set custom user attribute "${e}"`,"custom user attribute"))return[!1,!1];a=!0}return[i,a]}(e,t);if(!s&&!r&&0!==t.length)return!1;if(s||0===t.length)return this.Cn.Ln(eR.$n,e,t).W;for(var n of t)if(!a(n))return!1}else if(eq(t)){if(!a(t))return!1;if(i)return this.Cn.Ln(eR.Bn,e,t).W}else if(!(void 0!==t&&tc(t))||(eG(t)&&(t=eJ(t)),"string"==typeof t&&!tu(t,`set custom user attribute "${e}"`,"the element in the given array")))return!1;return this.Cs.setCustomUserAttribute(e,t)}addToCustomAttributeArray(e,t){return!!tu(e,"add to custom user attribute array","the given key")&&!(null!=t&&!tu(t,"add to custom user attribute array","the given value"))&&this.Cn.Ln(eR.Rn,e,t).W}removeFromCustomAttributeArray(e,t){return!!tu(e,"remove from custom user attribute array","the given key")&&!(null!=t&&!tu(t,"remove from custom user attribute array","the given value"))&&this.Cn.Ln(eR.On,e,t).W}incrementCustomUserAttribute(e,t){if(!tu(e,"increment custom user attribute","the given key"))return!1;null==t&&(t=1);var i=parseInt(t.toString());return isNaN(i)||i!==parseFloat(t.toString())?(er.error(`Cannot increment custom user attribute because the given incrementValue "${t}" is not an integer.`),!1):this.Cn.Ln(eR.Gn,e,i).W}setCustomLocationAttribute(e,t,i){return!!tu(e,"set custom location attribute","the given key")&&((null!==t||null!==i)&&(t=null!=t?parseFloat(t.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==t&&null!=i||null!=t&&null==i||null!=t&&(isNaN(t)||t>90||t<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(er.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by \xb190 and \xb1180 respectively, or must both be null for removal."),!1):this.Cn.Hn(e,t,i).W)}addToSubscriptionGroup(t){return!td(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(er.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Cn.Kn(t,e.Mn.SUBSCRIBED).W}removeFromSubscriptionGroup(t){return!td(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(er.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Cn.Kn(t,e.Mn.UNSUBSCRIBED).W}setLineId(t){return td(t,"set LINE user ID","the ID",!0)&&0!==(null==t?void 0:t.length)?t&&t.length>e.Yn?(er.error(`Rejected LINE user ID ${t} because it is longer than ${e.Yn} characters.`),!1):this.Cs.nu("native_line_id",t):(er.error("setLineId requires a non-empty ID"),!1)}Pn(e,t,i,a,s){this.Cs.Pn(e,t,i,a,s),this.Cn.zn()}Sn(e){this.Cs.Sn(e)}}),c.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},c.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Fn=/^[0-9 .\\(\\)\\+\\-]+$/,c.Mn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},c.Jn="user_id",c.lu="custom",c.mr=997,c.Yn=33,d=class{constructor(){}ef(){}ff(){}Ja(e){}static nf(e,t){if(e&&t){if(e=e.toLowerCase(),e$(t.cf)){for(var i=0;i<t.cf.length;i++)if(-1!==e.indexOf(t.cf[i].toLowerCase()))return t.identity}else if(-1!==e.indexOf(t.cf.toLowerCase()))return t.identity}}},p=class e extends d{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){var e=this.gc();this.browser=e.browser||"Unknown Browser",this.version=e.version||"Unknown Version"}this.OS=null}ef(){return this.browser}ff(){return this.version}Ja(t){if(this.OS)return Promise.resolve(this.OS);var i=i=>{for(var a=0;a<t.length;a++){var s=e.nf(i,t[a]);if(s)return this.OS=s,this.OS}return i};return this.userAgentData.platform?Promise.resolve(i(this.userAgentData.platform)):this.getHighEntropyValues().then(e=>e.platform?i(e.platform):navigator.platform).catch(()=>navigator.platform)}gc(){var e={},t=this.userAgentData.brands;if(t&&t.length)for(var i of t){var a=this.vc(tg),s=i.brand.match(a);if(s&&s.length>0){e.browser=s[0],e.version=i.version;break}}return e}vc(e){var t=[];for(var i in e)t.push(e[i]);return RegExp("("+t.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}},b=class e extends d{constructor(){super(),this.fd=e.gc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}ff(){return this.fd[1]||"Unknown Version"}Ja(t){for(var i=0;i<t.length;i++){var a=t[i].string,s=e.nf(a,t[i]);if(s)return s===tm.Og&&navigator.maxTouchPoints>1&&(s=tm.co),Promise.resolve(s)}return Promise.resolve(navigator.platform)}static gc(e){var t,i=e.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==e.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==e.indexOf("CrKey"))return["Chromecast",null];if(-1!==e.indexOf("BRAVIA")||-1!==e.indexOf("SonyCEBrowser")||-1!==e.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==e.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(e.match(/\b(Roku)\b/))return["Roku",null];if(e.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===tg.rO&&null!=(t=e.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("OPR",tg.oO),t[0]=t[0].replace("EdgA",tg.eO),"Edg"===t[0]&&(t[0]=tg.eO),[t[0],t[1]];if(i[1]===tg.xg&&null!=(t=e.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/)))return(t=t.slice(1))[0]=t[0].replace("EdgiOS",tg.eO),[t[0],t[1]];if((i=i[2]?[i[1],i[2]]:[null,null])[0]===tg.xg&&null!=(t=e.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,t[1]),null!=(t=e.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,t[2]),i[0]===tg.oO&&null!=(t=e.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",t[1]||""];if(i[0]){var a=i[0].toLowerCase();"crios"===a&&(i[0]=tg.rO),"tizen"===a&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===a&&(i[0]="Samsung Browser")}return i}},(g=class e{constructor(){var t=navigator.userAgentData?p:b;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.ff(),this.OS=null,this.Ja().then(e=>this.OS=e);var i=navigator;this.language=(i.userLanguage||i.language||i.browserLanguage||i.systemLanguage||"").toLowerCase(),this.Pa=e.vg(this.userAgent)}bE(){return this.browser===tg.xg}Ka(){return this.OS||null}Ja(){return this.OS?Promise.resolve(this.OS):this.Sg.Ja(e.kg).then(e=>(this.OS=e,e))}static vg(e){e=e.toLowerCase();for(var t=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko","petalbot","facebookexternalhit","facebookcatalog","meta-webindexer","meta-externalads","meta-externalagent","meta-externalfetcher"],i=0;i<t.length;i++)if(-1!==e.indexOf(t[i]))return!0;return!1}}).kg=[{string:navigator.platform,cf:"Win",identity:tm.Bg},{string:navigator.platform,cf:"Mac",identity:tm.Og},{string:navigator.platform,cf:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,cf:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,cf:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,cf:"Nintendo",identity:"Nintendo"},{string:navigator.platform,cf:"SunOS",identity:"SunOS"},{string:navigator.platform,cf:"PlayStation",identity:"PlayStation"},{string:navigator.platform,cf:"X11",identity:"X11"},{string:navigator.userAgent,cf:["iPhone","iPad","iPod"],identity:tm.co},{string:navigator.platform,cf:"Pike v",identity:tm.co},{string:navigator.userAgent,cf:["Web0S"],identity:"WebOS"},{string:navigator.userAgent,cf:"Tizen",identity:"Tizen"},{string:navigator.platform,cf:["Linux armv7l","Android"],identity:tm.Pg},{string:navigator.userAgent,cf:["Android"],identity:tm.Pg},{string:navigator.platform,cf:"Linux",identity:"Linux"}],eu=new g,(m=class e{constructor(e,t){this.cE=e,this.TE=t,this.cE=e,this.TE=t}Da(t){var i=eH(tf.iu),a=new e.ne(t);for(var s of i)a.remove(tf.iu[s])}uu(e,t){var i=null;null!=t&&t instanceof h&&(i=t.dt()),this.cE.store(e,i)}hE(e){var t=this.tu(e);null!=t&&(t.ql=new Date().valueOf(),this.uu(e,t))}tu(e){var t,i=this.cE.br(e),a=(e=>{var t;try{t=JSON.parse(e)}catch(e){t=null}return t})(i);if(a)(t=h.qn(a)||null)&&this.uu(e,t);else{var s=h.AE(i);t=h.qn(s)||null,s!==i&&t&&this.uu(e,t)}return t}Fl(e){this.cE.remove(e)}Ua(){var e;for(var t of eH(tf.iu))null!=(e=this.tu(tf.iu[t]))&&this.uu(tf.iu[t],e)}Eo(e){if(null==e||0===e.length)return!1;t=e$(e)?e:[e];var t,i=this.TE.br(tf.ct.tE);null!=i&&e$(i)||(i=[]);for(var a=0;a<t.length;a++)i.push(t[a].dt());return this.TE.store(tf.ct.tE,i)}yl(e){return null!=e&&this.Eo([e])}RE(){var e=this.TE.br(tf.ct.tE);this.TE.remove(tf.ct.tE),null==e&&(e=[]);var t=[],i=!1,a=null;if(e$(e))for(var s=0;s<e.length;s++)u.gE(e[s])?t.push(u.qn(e[s])):a=s;else i=!0;if(i||null!=a){var r="Stored events could not be deserialized as Events";i&&(r+=", was "+Object.prototype.toString.call(e)+" not an array"),null!=a&&(r+=", value at index "+a+" does not look like an event"),r+=", serialized values were of type "+typeof e+": "+JSON.stringify(e),t.push(new u(null,eR.pu,new Date().valueOf(),null,{e:r}))}return t}ft(e,t){return!!eF(tf.ct,e,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.TE.store(e,t)}lt(e){return!!eF(tf.ct,e,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.TE.br(e)}Nt(e){return!!eF(tf.ct,e,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.TE.remove(e),!0)}clearData(){for(var e=eH(tf.iu),t=eH(tf.ct),i=0;i<e.length;i++){var a=e[i];this.cE.remove(tf.iu[a])}for(var s=0;s<t.length;s++){var r=t[s];this.TE.remove(tf.ct[r])}}OE(e){return e||tf.ct.sE}ku(e){var t=this.TE.br(tf.ct.eE);null==t&&(t={});var i=this.OE(e[c.Jn]),a=t[i];for(var s in e)s!==c.Jn&&(null==t[i]||a&&null==a[s])&&this.mu(e[c.Jn],s,e[s])}mu(e,t,i){var a=this.TE.br(tf.ct.eE);null==a&&(a={});var s=this.OE(e),r=a[s];if(null==r&&(r={},null!=e&&(r[c.Jn]=e)),t===c.lu)for(var n in null==r[t]&&(r[t]={}),i)r[t][n]=i[n];else r[t]=i;return a[s]=r,this.TE.store(tf.ct.eE,a)}IE(){var e=this.TE.br(tf.ct.eE);this.TE.remove(tf.ct.eE);var t=[];for(var i in e)null!=e[i]&&t.push(e[i]);return t}ru(e){var t=this.TE.br(tf.ct.eE);if(null!=t){var i=this.OE(null),a=t[i];null!=a&&(t[i]=void 0,this.TE.store(tf.ct.eE,t),a[c.Jn]=e,this.ku(a))}var s=this.tu(tf.iu.Nl),r=null;null!=s&&(r=s.eu);var n=this.RE();if(null!=n)for(var o=0;o<n.length;o++){var l=n[o];null==l.userId&&l.sessionId==r&&(l.userId=e),this.yl(l)}}dE(){return this.TE.fE}}).rc=class{constructor(e){this.sn=e,this.sn=e,this.fE=eu.bE()?3:10}mE(e){return e+"."+this.sn}store(e,t){try{return localStorage.setItem(this.mE(e),JSON.stringify({v:t})),!0}catch(e){return er.info("Storage failure: "+e8(e)),!1}}br(e){try{var t=null,i=localStorage.getItem(this.mE(e));return null!=i&&(t=JSON.parse(i)),null==t?null:t.v}catch(e){return er.info("Storage retrieval failure: "+e8(e)),null}}remove(e){try{localStorage.removeItem(this.mE(e))}catch(e){return er.info("Storage removal failure: "+e8(e)),!1}}},m.ac=class{constructor(){this.KE={},this.YE=5242880,this.fE=3}store(e,t){var i=this.NE(t);return i>this.YE?(er.info("Storage failure: object is "+i+" bytes which is greater than the max of "+this.YE),!1):(this.KE[e]={value:t},!0)}NE(e){for(var t=[],i=[e],a=0;i.length;){var s=i.pop();if("boolean"==typeof s)a+=4;else if("string"==typeof s)a+=2*s.length;else if("number"==typeof s)a+=8;else if("object"==typeof s&&-1===t.indexOf(s)){var r=void 0,n=void 0;for(var o in t.push(s),s)n=s,r=o,i.push(n[r])}}return a}br(e){var t=this.KE[e];return null==t?null:t.value}remove(e){this.KE[e]=null}},m.ne=class{constructor(e,t){this.sn=e,this.GE=t,this.sn=e,this.CE=this.DE(),this.ME=576e3,this.GE=!!t}mE(e){return null!=this.sn?e+"."+this.sn:e}DE(){for(var e=0,t=document.location.hostname,i=t.split("."),a="ab._gd";e<i.length-1&&-1===document.cookie.indexOf(a+"="+a);)e++,t="."+i.slice(-1-e).join("."),document.cookie=a+"="+a+";domain="+t+";";return document.cookie=a+"=;expires="+new Date(0).toUTCString()+";domain="+t+";",t}se(){var e=new Date;return e.setTime(e.getTime()+60*this.ME*1e3),e.getFullYear()}pE(){for(var e=eB(tf.iu),t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "===a.charAt(0);)a=a.substring(1);for(var s=!1,r=0;r<e.length;r++)if(0===a.indexOf(e[r])){s=!0;break}if(s){var n=a.split("=")[0];-1===n.indexOf("."+this.sn)&&this.vE(n)}}}store(e,t){this.pE();var i,a=new Date;a.setTime(a.getTime()+60*this.ME*1e3);var s="expires="+a.toUTCString(),r="domain="+this.CE;i=this.GE?t:encodeURIComponent(t);var n=this.mE(e)+"="+i+";"+s+";"+r+";path=/";return n.length>=4093?(er.info("Storage failure: string is "+n.length+" chars which is too large to store as a cookie."),!1):(document.cookie=n,!0)}br(e){for(var t=[],i=this.mE(e)+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))try{var n=void 0;n=this.GE?r.substring(i.length,r.length):decodeURIComponent(r.substring(i.length,r.length)),t.push(n)}catch(t){return er.info("Storage retrieval failure: "+e8(t)),this.remove(e),null}}return t.length>0?t[t.length-1]:null}remove(e){this.vE(this.mE(e))}vE(e){var t=e+"=;expires="+new Date(0).toUTCString();document.cookie=t,document.cookie=t+";path=/";var i=t+";domain="+this.CE;document.cookie=i,document.cookie=i+";path=/"}},m.tc=class{constructor(e,t,i){this.sn=e,this.UE=[],t&&this.UE.push(new m.ne(e)),i&&this.UE.push(new m.rc(e)),this.UE.push(new m.ac)}store(e,t){for(var i=!0,a=0;a<this.UE.length;a++)i=this.UE[a].store(e,t)&&i;return i}br(e){for(var t=0;t<this.UE.length;t++){var i=this.UE[t].br(e);if(null!=i)return i}return null}remove(e){new m.ne(this.sn).remove(e);for(var t=0;t<this.UE.length;t++)this.UE[t].remove(e)}},f=class{constructor(e,t,i){this.j=e,this.Zn=t,this.gh=i,this.j=e,this.Zn=t||!1,this.gh=i,this.ph=new a,this.Fh=0,this.kh=1}fh(){return this.Zn}wh(){return this.j.lt(tf.ct.jh)}setSdkAuthenticationSignature(e){var t=this.wh();this.j.ft(tf.ct.jh,e);var a=i.Us.Rs;new i(a,er).setItem(a.Fs.xh,this.kh,e),t!==e&&this.Z()}qh(){this.j.Nt(tf.ct.jh);var e=i.Us.Rs;new i(e,er).be(e.Fs.xh,this.kh)}subscribeToSdkAuthenticationFailures(e){return this.gh.wt(e)}yh(e){this.gh.L(e)}Bh(){this.ph.removeAllSubscriptions()}Gh(){this.Fh+=1}Hh(){return this.Fh}Z(){this.Fh=0}},v=class{constructor(){}N(e){}changeUser(e=!1){}clearData(e=!1){}},w=class{constructor(e){this.id=e,this.id=e}Ar(){var e={};return null!=this.browser&&(e.browser=this.browser),null!=this.Ga&&(e.browser_version=this.Ga),null!=this.os&&(e.os_version=this.os),null!=this.resolution&&(e.resolution=this.resolution),null!=this.language&&(e.locale=this.language),null!=this.timeZone&&(e.time_zone=this.timeZone),null!=this.userAgent&&(e.user_agent=this.userAgent),e}},x=class{constructor(e,t){this.j=e,this.Fa=t,this.j=e,null==t&&(t=eB(tv)),this.Fa=t}fe(e=!0){var t=this.j.tu(tf.iu.Jh);null==t&&(t=new h(eo.oe()),e&&this.j.uu(tf.iu.Jh,t));for(var i=new w(t.eu),a=0;a<this.Fa.length;a++)switch(this.Fa[a]){case tv.BROWSER:i.browser=eu.browser;break;case tv.BROWSER_VERSION:i.Ga=eu.version;break;case tv.OS:i.os=this.Ja();break;case tv.RESOLUTION:i.Ba=screen.width+"x"+screen.height;break;case tv.LANGUAGE:i.language=eu.language;break;case tv.TIME_ZONE:i.timeZone=this.Ha(new Date);break;case tv.USER_AGENT:i.userAgent=eu.userAgent}return i}Ja(){if(eu.Ka())return eu.Ka();var e=this.j.lt(tf.ct.Qa);return e&&e.os_version?e.os_version:eu.Ja()}Ha(e){var t=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){var i=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=i&&""!==i)return i}}catch(e){er.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+e8(e)),t=!0}if(t)return"";var a=e.getTimezoneOffset();return this.Va(a)}Va(e){var t="GMT";return 0!==e&&(t+=(e<0?"+":"-")+("00"+Math.abs(Math.trunc(e/60))).slice(-2)+":"+("00"+Math.abs(Math.trunc(e%60))).slice(-2)),t}},eh=tx,ec=ty,y=class{constructor(e,t,i,a,s,r,n,o,l,u,h,c){this.on=e,this.j=t,this.Qh=i,this.Cs=a,this.C=s,this.h=r,this.sn=n,this.Ea=o,this.Xh=l,this.Zh=u,this.appVersion=h,this.$a=c,this.Xa=e=>null==e?"":`${e} `,this.on=e,this.j=t,this.Qh=i,this.Cs=a,this.C=s,this.h=r,this.sn=n,this.Ea=o,this.Xh=l,this.Zh=u,this.appVersion=h,this.$a=c,this.Ya=["npm"],this.Za={}}$(e,t=!1,i=!1){var a=this.on.fe(!i),s=a.Ar();eX(this.j.lt(tf.ct.Qa),s)||(e.device=s),e.api_key=this.sn,e.time=eW(new Date().valueOf(),!0);var r=this.j.lt(tf.ct.au)||[],n=this.j.lt(tf.ct.du)||"";this.Ya.length>0&&(!eX(r,this.Ya)||n!==this.C.bt())&&(e.sdk_metadata=this.Ya),e.sdk_version=this.Xh,this.Zh&&(e.sdk_flavor=this.Zh),e.app_version=this.appVersion,e.app_version_code=this.$a,e.device_id=a.id;var o=this.Cs.getUserId();if(t&&null!==o&&(e.user_id=o),!o&&!this.Qh.fh()){var l=e4(this.j);l&&(e.alias=l)}return e}Y(e,t,i){var a=t.auth_error,s=t.error;if(!a&&!s)return!0;if(a){this.Qh.Gh();var r,n={errorCode:a.error_code};for(var o of i)e$(o)&&"X-Braze-Auth-Signature"===o[0]&&(n.signature=o[1]);e.respond_with&&e.respond_with.user_id?n.userId=e.respond_with.user_id:e.user_id&&(n.userId=e.user_id);var l=a.reason;return l?(n.reason=l,r=`due to ${l}`):r=`with error code ${a.error_code}.`,this.Qh.fh()||(r+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),er.error(`SDK Authentication failed ${r}`),this.fu(e.events||[],e.attributes||[]),this.Qh.yh(n),!1}if(s){var u,h=s;switch(h){case tw.vu:return u="Received successful response with empty body.",ex.rt(eR.pu,{e:u}),er.info(u),!1;case tw.Ru:return u="Received successful response with invalid JSON",ex.rt(eR.pu,{e:u+": "+t.response}),er.info(u),!1;case tw.gu:h=`The API key "${e.api_key}" is invalid for the baseUrl ${this.Ea}`;break;case tw.bu:h="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case tw.qu:h="No device identifier. Please contact support@braze.com"}er.error("Backend error: "+h)}return!1}Au(e,t,i){return!!(e&&0!==e.length||t&&0!==t.length||i)}Du(e,t,i,a=!1){var s,r=[],n=e=>e||"",o=n(this.Cs.getUserId()),l=this.Mr(e),u=[],h=[],c=null;if(t.length>0){var d=[];for(var p of t){if(s=p.Ar(),this.Qh.fh()){if(o&&!s.user_id){c||(c={}),c.events||(c.events=[]),c.events.push(s);continue}if(n(s.user_id)!==o){h.push(s);continue}}d.push(s)}d.length>0&&(l.events=d)}if(i.length>0){var b=[];for(var g of i)g&&(this.Qh.fh()&&n(g.user_id)!==o?u.push(g):b.push(g));b.length>0&&(l.attributes=b)}if(this.fu(h,u),l=this.$(l,!1,a),c){var m={requestData:c=this.$(c,!1,a),headers:this.A(c,eh.H.Tu)};r.push(m)}if(l&&!this.Au(l.events,l.attributes,e))return c?r:null;var f={requestData:l,headers:this.A(l,eh.H.Tu)};return r.push(f),r}fu(e,t){if(e){var i=[];for(var a of e){var s=u.fromJson(a);s.time=1e3*s.time,i.push(s)}this.j.Eo(i)}if(t)for(var r of t)this.j.ku(r)}_(e,t){var i="HTTP error ";null!=e&&(i+=e+" "),i+=t,er.error(i)}yu(e){return ex.rt(eR.wu,{n:e})}Mr(e,t){var i={};e&&(i.triggers=!0);var a=null!=t?t:this.Cs.getUserId();if(a&&(i.user_id=a),!i.user_id&&!this.Qh.fh()){var s=e4(this.j);s&&(i.alias=s)}return i.config={config_time:this.h.Ft()},{respond_with:i}}Nu(e){var t=new Date().valueOf(),i="7200000",a=eh.Cu(this.j,e);return -1!==a&&(i=(t-a).toString()),i}A(e,t,i=!1){var a=[["X-Braze-Api-Key",this.sn]],s=this.Nu(t);a.push(["X-Braze-Last-Req-Ms-Ago",s]);var r=eh.Su(this.j,t).toString();a.push(["X-Braze-Req-Attempt",r]);var n=!1;if(null!=e.respond_with&&e.respond_with.triggers&&(a.push(["X-Braze-TriggersRequest","true"]),n=!0),t===eh.H.bi){a.push(["X-Braze-ContentCardsRequest","true"]);var o=eh.Su(this.j,eh.H.bi);o&&!i||(o=1,eh.Bu(this.j,eh.H.bi,o));var l=Math.max(0,o-1);a.push(["BRAZE-SYNC-RETRY-COUNT",l.toString()]),n=!0}if(t===eh.H.$e&&(a.push(["X-Braze-FeatureFlagsRequest","true"]),n=!0),n&&a.push(["X-Braze-DataRequest","true"]),this.Qh.fh()){var u=this.Qh.wh();null!=u&&a.push(["X-Braze-Auth-Signature",u])}return a}zu(e,t,i,a){if(!this.Za[a]){var s=window.setTimeout(()=>{er.info(`Retrying rate limited ${this.Xa(a)}SDK request.`),this.J(t,i,a)},e);this.Za[a]=s}}fo(){for(var e in this.Za){var t=this.Za[e];window.clearTimeout(t)}this.Za={}}J(e,t,i,a){if(!this.ju(i))return er.info(`${this.Xa(i)}SDK request being rate limited.`),void("function"==typeof a&&a());var s=this.Mu();if(!s.$u)return this.zu(s.Xu,e,t,i),void er.info(`${this.Xa(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(s.Xu/1e3)} seconds.`);this.j.ft(tf.ct.Lu,new Date().valueOf());var r=e.device;r&&r.os_version instanceof Promise?r.os_version.then(i=>{e.device.os_version=i,t(s.Eu)}):t(s.Eu)}Fu(e){var t=e?tE(e):null;if(!t||!t["retry-after"])return null;var i=t["retry-after"];return isNaN(i)&&!isNaN(Date.parse(i))?{type:"date",value:Date.parse(i)}:isNaN(parseFloat(i.toString()))?(ex.rt(eR.pu,{e:"Received unexpected value for retry-after header in /sync response: "+i}),null):{type:"timestamp",value:1e3*parseFloat(i.toString())}}st(e,t,i,a,s,r){if(!(eh.Su(this.j,i)>=15)){r=r||0;var n,o=this.Fu(e);s();var l=e=>{a(window.setTimeout(()=>{t()},e)),eh.Ku(this.j,i)};if(o&&!isNaN(o.value)){switch(o.type){case"date":(n=o.value-new Date().getTime()+r)<0&&t();break;case"timestamp":n=o.value+r}l(n)}else r?l(r):eh.Ci(this.j,i)}}Iu(e){var t;null===(t=this.j)||void 0===t||t.ft(tf.ct.Pu,e)}Uu(e,t){var i=this.xu();null==i&&(i={}),i[e]=t,this.j.ft(tf.ct.Hu,i)}Ou(){var e;return null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.Pu)}xu(){var e;return null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.Hu)}Gu(e,t,i,a,s=""){if(s){var r,n=this.xu();r=null==n||isNaN(n[s])?t:n[s]}else(null==(r=this.Ou())||isNaN(r))&&(r=t);return Math.min(r+(e-a)/1e3/i,t)}_u(e,t){return Math.max(0,(1-e)*t*1e3)}Wu(e,t=""){var i={$u:!0,Eu:-1,Xu:0};if(null==e&&(e=!0),!e&&!t)return i;var a,s,r,n,o,l,u,h=null;if(e)h=null===(a=this.j)||void 0===a?void 0:a.lt(tf.ct.Lu);else{var c=eh.Yu(this.j);if(null==c||null==c[t])return i;h=c[t]}if(null==h||isNaN(h)||(e?(l=(null===(s=this.h)||void 0===s?void 0:s.Ju())||-1,u=(null===(r=this.h)||void 0===r?void 0:r.Qu())||-1):(l=(null===(n=this.h)||void 0===n?void 0:n.Vu(t))||-1,u=(null===(o=this.h)||void 0===o?void 0:o.Zu(t))||-1),-1===l||-1===u))return i;var d=new Date().valueOf(),p=this.Gu(d,l,u,h,t);return p<1?(i.$u=!1,i.Xu=this._u(p,u)):(p=Math.trunc(p)-1,i.Eu=p,e?this.Iu(p):this.Uu(t,p)),i}Mu(){return this.Wu(!0)}ju(e){var t=this.Wu(!1,e);return!(t&&!t.$u)}Z(){this.Qh.Z()}V(){return this.Ea}addSdkMetadata(e){for(var t of e)-1===this.Ya.indexOf(t)&&this.Ya.push(t)}},E=class{constructor(e=!1,t=[]){this.W=e,this.ue=t,this.W=e,this.ue=t}Vt(e){this.W=this.W&&e.W,this.ue.push(...e.ue)}},ed=tk,S=class{constructor(e,t,i,s,r,n,o,l,u,h){this.sn=e,this.baseUrl=t,this.C=i,this.on=s,this.Cs=r,this.h=n,this.j=o,this.$l=l,this.Qh=u,this.B=h,this.sn=e,this.baseUrl=t,this.Tl=0,this.fE=o.dE()||0,this.Ll=null,this.C=i,this.on=s,this.Cs=r,this.h=n,this.j=o,this.Qh=u,this.B=h,this.$l=l,this.Ml=new a,this.Pl=null,this.Il=50,this.Ol=!1,this.Ul=!1}_l(e,t){return!e&&!t&&this.Qh.Hh()>=this.Il}Jl(e){var t=this.C.zl();if(e.length>0){var i=this.Cs.getUserId();for(var a of e){var s=!a.userId&&!i||a.userId===i;a.type===eR.Al&&s&&(t=!0)}}return t}Kl(e=!1,t=!0,i,a,s,r=!1,n=!1){var o=this;t&&this.Xl();var l=this.j.RE(),u=this.j.IE(),h=!1,c=(e,r,n=-1)=>{var o=new Date().valueOf();eh.K(this.j,eh.H.Tu,o),-1!==n&&r.push(["X-Braze-Req-Tokens-Remaining",n.toString()]);var l=!1;ec.O({url:this.baseUrl+"/data/",data:e,headers:r,W:t=>{null!=e.respond_with&&e.respond_with.triggers&&(this.Tl=Math.max(this.Tl-1,0)),this.B.Y(e,t,r)?(this.Qh.Z(),this.h.cl(t),null!=e.respond_with&&e.respond_with.user_id!=this.Cs.getUserId()||(null!=e.device&&this.j.ft(tf.ct.Qa,e.device),null!=e.sdk_metadata&&(this.j.ft(tf.ct.au,e.sdk_metadata),this.j.ft(tf.ct.du,this.C.bt())),this.$l(t),eh.Bu(this.j,eh.H.Tu,1),"function"==typeof i&&i())):t.auth_error&&(l=!0)},error:()=>{l=!0,null!=e.respond_with&&e.respond_with.triggers&&(this.Tl=Math.max(this.Tl-1,0)),this.B.fu(e.events,e.attributes),"function"==typeof a&&a()},tt:(e,i)=>{"function"==typeof s&&s(!l);var a=this.B.Fu(i),r=0;if(a)switch(a.type){case"date":r=Math.max(a.value-new Date().valueOf(),0);break;case"timestamp":r=a.value}if(t&&!h){if(l){eh.Ku(this.j,eh.H.Tu);var n=this.Ll;(null==n||n<1e3*this.fE)&&(n=1e3*this.fE);var o=Math.min(3e5,tS(1e3*this.fE,3*n))+r;this.Ql(o)}else this.Ql(Math.max(1e3*this.fE,r));h=!0}}})},d=this.Jl(l),p=e||d;if(this._l(r,d))return void er.info("Declining to flush data due to 50 consecutive authentication failures");if(t&&!this.B.Au(l,u,p))return this.Ql(),void("function"==typeof s&&s(!0));var b=this.B.Du(p,l,u,n);p&&this.Tl++;var g=!1;if(b){var m=function(e){o.B.J(e.requestData,t=>c(e.requestData,e.headers,t),eh.H.Tu,a),g=!0};for(var f of b)m(f)}this.Qh.fh()&&t&&!g?this.Ql():d&&(er.info("Invoking new session subscriptions"),this.Ml.L(),this.Ul=!0)}Yl(){return this.Tl>0}Ql(e=1e3*this.fE){this.Ol||(this.Xl(),this.Pl=window.setTimeout(()=>{if(document.hidden){var e="visibilitychange",t=()=>{document.hidden||(document.removeEventListener(e,t,!1),this.Kl())};document.addEventListener(e,t,!1)}else this.Kl()},e),this.Ll=e)}Xl(){null!=this.Pl&&(clearTimeout(this.Pl),this.Pl=null)}initialize(){this.Ol=!1,this.Ql()}destroy(){this.Ml.removeAllSubscriptions(),this.Qh.Bh(),this.Xl(),this.Ol=!0,this.Kl(void 0,!1,void 0,void 0,void 0,void 0,!0),this.Pl=null,this.Ul=!1}rn(e){return this.Ul?(e(),null):this.Ml.wt(e)}openSession(){var e=this.C.bt()!==this.C.qo();e&&(this.j.hE(tf.iu.Jh),this.j.hE(tf.iu.su)),this.Kl(!1,void 0,()=>{this.j.Nt(tf.ct.qe)}),this.zn(),e&&Promise.resolve().then(function(){return e_}).then(e=>{if(!this.Ol){var t=e.default.ea();if(null!=t&&(ed.isPushPermissionGranted()||ed.isPushBlocked())){var a=()=>{t.mn()?er.info("Push token maintenance is disabled, not refreshing token for backend."):t.subscribe()},s=i.Us.Rs;new i(s,er).jr(s.Fs.cu,(e,t)=>{t&&a()},()=>{var e=this.j.lt(tf.ct.In);(null==e||e)&&a()})}}})}Zl(){this.j.Nt(tf.ct.Ie),this.j.Nt(tf.ct.Ps),this.j.Nt(tf.ct.Nr)}hc(){this.j.Nt(tf.ct.Lu),this.j.Nt(tf.ct.SE);var e,t,i=eh.H;for(var a in i){var s=i[a];this.B.Uu(s,null===(e=this.h)||void 0===e?void 0:e.Vu(s))}this.B.Iu(null===(t=this.h)||void 0===t?void 0:t.Ju())}changeUser(e,t,i){var a=this.Cs.getUserId();if(a!==e){this.C.Bl(),this.Zl(),null!=a&&this.Kl(void 0,!1,void 0,void 0,void 0),this.Cs.ou(e),i?this.Qh.setSdkAuthenticationSignature(i):this.Qh.qh();for(var s=0;s<t.length;s++)t[s].changeUser(null==a);this.B.fo(),null!=a&&this.j.Nt(tf.ct.rE),this.j.Nt(tf.ct.Qa),this.j.Nt(tf.ct.uE),this.hc(),this.openSession(),er.info('Changed user to "'+e+'".')}else{var r="Doing nothing.";i&&this.Qh.wh()!==i&&(this.Qh.setSdkAuthenticationSignature(i),r="Updated SDK authentication signature"),er.info(`Current user is already ${e}. ${r}`)}}requestImmediateDataFlush(e){this.Xl(),this.C.qo(),this.Kl(void 0,void 0,void 0,()=>{er.error("Failed to flush data, request will be retried automatically.")},e,!0)}$r(e,t){this.C.qo(),er.info("Requesting explicit trigger refresh."),this.Kl(!0,void 0,e,t)}En(e,t){var i=eR.nc,a={a:e,l:t},s=ex.rt(i,a);return s&&(er.info(`Logged alias ${e} with label ${t}`),this.j.ft(tf.ct.uE,a)),s}Ln(e,t,i){if(this.h.hu(t))return er.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new E;var a=ex.rt(e,{key:t,value:i});if(a){var s="object"==typeof i?JSON.stringify(i,null,2):i;er.info(`Logged custom attribute: ${t} with value: ${s}`)}return a}setLastKnownLocation(e,t,i,a,s,r){var n={latitude:t,longitude:i};null!=a&&(n.altitude=a),null!=s&&(n.ll_accuracy=s),null!=r&&(n.alt_accuracy=r);var o=ex.rt(eR.lc,n,e||void 0);return o&&er.info(`Set user last known location as ${JSON.stringify(n,null,2)}`),o}kr(e,t){var i=this.C.qo();return new u(this.Cs.getUserId(),eR.uc,e,i,{cid:t})}cc(e,t){return new i(e,t)}zn(){var e=i.Us.Rs;this.cc(e,er).setItem(e.Fs.Tu,1,{baseUrl:this.baseUrl,data:{api_key:this.sn,device_id:this.on.fe().id},userId:this.Cs.getUserId(),sdkAuthEnabled:this.Qh.fh()})}yr(e){for(var t of e)if(t.api_key===this.sn)this.B.fu(t.events,t.attributes);else{var a=i.Us.Rs;new i(a,er).setItem(a.Fs.wr,eo.oe(),t)}}Hn(e,t,i){var a,s;return this.h.hu(e)?(er.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new E):(null===t&&null===i?(a=eR.dc,s={key:e}):(a=eR.mc,s={key:e,latitude:t,longitude:i}),ex.rt(a,s))}Kn(e,t){return ex.rt(eR.fc,{group_id:e,status:t})}},k=class e{constructor(e=0,t=[],i=[],a=[],s=null,r=null,n={enabled:!1},o={enabled:!1,refresh_rate_limit:void 0},l={enabled:!0,capacity:30,refill_rate:30,endpoint_overrides:{}},u=null){this.ol=e,this.bl=t,this.fl=i,this.vl=a,this.Cl=s,this.dl=r,this.gl=n,this.he=o,this.ml=l,this.banners=u,this.ol=e,this.bl=t,this.fl=i,this.vl=a,this.Cl=s,this.dl=r,this.gl=n,this.he=o,this.ml=l,this.banners=u}dt(){return{s:"6.1.0",l:this.ol,e:this.bl,a:this.fl,p:this.vl,m:this.Cl,v:this.dl,c:this.gl,f:this.he,grl:this.ml,b:this.banners}}static qn(t){var i=t.l;return"6.1.0"!==t.s&&(i=0),new e(i,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl,t.b)}},C=class{constructor(e){this.j=e,this.j=e,this.tl=new a,this.il=new a,this.el=new a,this.sl=new a,this.rl=null,this.ul=null}al(){if(null==this.ul){var e=this.j.lt(tf.ct.hl);this.ul=null!=e?k.qn(e):new k}return this.ul}Ft(){return this.al().ol}cl(e){var t,i;if(null!=e&&null!=e.config){var a=e.config;if(a.time>this.al().ol){let e;var s=new k(a.time,a.events_blacklist,a.attributes_blacklist,a.purchases_blacklist,a.messaging_session_timeout,a.vapid_public_key,a.content_cards,a.feature_flags,null==(e=a.global_request_rate_limit)?this.al().ml:e,a.banners),r=!1;null!=s.dl&&this.Wn()!==s.dl&&(r=!0);var n=!1;null!=s.gl.enabled&&this.gi()!==s.gl.enabled&&(n=!0);var o=!1;null!=s.he.enabled&&this.Re()!==s.he.enabled&&(o=!0);var l=!1;null!=(null===(t=s.banners)||void 0===t?void 0:t.enabled)&&this.Dt()!==(null===(i=s.banners)||void 0===i?void 0:i.enabled)&&(l=!0),this.ul=s,this.j.ft(tf.ct.hl,s.dt()),r&&this.tl.L(),n&&this.il.L(),o&&this.el.L(),l&&this.sl.L()}}}_n(e){var t=this.tl.wt(e);return this.rl&&this.tl.removeSubscription(this.rl),this.rl=t,t}vi(e){return this.il.wt(e)}Ue(e){return this.el.wt(e)}P(e){return this.sl.wt(e)}ge(e){return -1!==this.al().bl.indexOf(e)}hu(e){return -1!==this.al().fl.indexOf(e)}Dr(e){return -1!==this.al().vl.indexOf(e)}Rl(){return this.al().Cl}Wn(){return this.al().dl}gi(){return this.al().gl.enabled||!1}El(){var e=this.al().ml;return!(!e||null==e.enabled)&&e.enabled}Ju(){if(!this.El())return -1;var e=this.al().ml;return null==e.capacity||e.capacity<10?-1:e.capacity}Qu(){if(!this.El())return -1;var e=this.al().ml;return null==e.refill_rate||e.refill_rate<=0?-1:e.refill_rate}wl(e){var t=this.al().ml.endpoint_overrides;return null==t?null:t[e]}Vu(e){var t=this.wl(e);return null==t||isNaN(t.capacity)||t.capacity<=0?-1:t.capacity}Zu(e){var t=this.wl(e);return null==t||isNaN(t.refill_rate)||t.refill_rate<=0?-1:t.refill_rate}Re(){return this.al().he.enabled&&null==this.ke()?(ex.rt(eR.pu,{e:"Missing feature flag refresh_rate_limit."}),!1):this.al().he.enabled||!1}ke(){return this.al().he.refresh_rate_limit}Dt(){var e;return(null===(e=this.al().banners)||void 0===e?void 0:e.enabled)||null}te(){var e;return(null===(e=this.al().banners)||void 0===e?void 0:e.max_placements)||0}},A=class{constructor(e,t,i,a){this.j=e,this.Cs=t,this.h=i,this.Sl=a,this.j=e,this.Cs=t,this.h=i,this.jl=1e3,(null==a||isNaN(a))&&(a=1800),a<this.jl/1e3&&(er.info("Specified session timeout of "+a+"s is too small, using the minimum session timeout of "+this.jl/1e3+"s instead."),a=this.jl/1e3),this.Sl=a}xl(e,t){return new u(this.Cs.getUserId(),eR.Dl,e,t.eu,{d:eW(e-t.Gl)})}bt(){var e=this.j.tu(tf.iu.Nl);return null==e?null:e.eu}zl(){var e=new Date().valueOf(),t=this.h.Rl();if(null==t)return!1;var i=this.j.lt(tf.ct.Hl),a=null==i||e-i>1e3*t;return a&&this.j.ft(tf.ct.Hl,e),a}Wl(e,t){return null==t||null==t.kl||!(e-t.Gl<this.jl)&&t.kl<e}qo(){var e=new Date().valueOf(),t=e+1e3*this.Sl,i=this.j.tu(tf.iu.Nl);if(this.Wl(e,i)){var a="Generating session start event with time "+e;if(null!=i){var s=i.ql;s-i.Gl<this.jl&&(s=i.Gl+this.jl),this.j.yl(this.xl(s,i)),a+=" (old session ended "+s+")"}a+=". Will expire "+t.valueOf(),er.info(a);var r=new h(eo.oe(),t);return this.j.yl(new u(this.Cs.getUserId(),eR.Al,e,r.eu)),this.j.uu(tf.iu.Nl,r),null==this.j.lt(tf.ct.Hl)&&this.j.ft(tf.ct.Hl,e),r.eu}if(null!=i)return i.ql=e,i.kl=t,this.j.uu(tf.iu.Nl,i),i.eu}Bl(){var e=this.j.tu(tf.iu.Nl);null!=e&&(this.j.Fl(tf.iu.Nl),this.j.yl(this.xl(new Date().valueOf(),e)))}},ep=tC,e("ControlMessage",N=class e{constructor(e,t){this.triggerId=e,this.messageExtras=t,this.triggerId=e,this.messageExtras=t,this.extras={},this.isControl=!0,this.kt=!1}static fromJson(t){return new e(t.trigger_id,t.message_extras)}Qt(){return!this.kt&&(this.kt=!0,!0)}Ur(){return this.kt}}),eb={Ic:null,Mo:tA},e("InAppMessage",T=class e{constructor(t,i,s,r,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k,C,A,N,T,_,I,O,D,j){this.message=t,this.messageAlignment=i,this.slideFrom=s,this.extras=r,this.triggerId=n,this.clickAction=o,this.uri=l,this.openTarget=u,this.dismissType=h,this.duration=c,this.icon=d,this.imageUrl=p,this.imageStyle=b,this.iconColor=g,this.iconBackgroundColor=m,this.backgroundColor=f,this.textColor=v,this.closeButtonColor=w,this.animateIn=x,this.animateOut=y,this.header=E,this.headerAlignment=S,this.headerTextColor=k,this.frameColor=C,this.buttons=A,this.cropType=N,this.orientation=T,this.htmlId=_,this.css=I,this.messageExtras=O,this.language=D,this.altImageText=j,this.message=t,this.messageAlignment=i||e.TextAlignment.CENTER,this.duration=c||5e3,this.slideFrom=s||e.SlideFrom.BOTTOM,this.extras=r||{},this.triggerId=n,this.clickAction=o||e.ClickAction.NONE,this.uri=l,this.openTarget=u||e.OpenTarget.NONE,this.dismissType=h||e.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=p,this.imageStyle=b||e.ImageStyle.TOP,this.iconColor=g||e.th.ih,this.iconBackgroundColor=m||e.th.sh,this.backgroundColor=f||e.th.ih,this.textColor=v||e.th.hh,this.closeButtonColor=w||e.th.eh,this.animateIn=x,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=E,this.headerAlignment=S||e.TextAlignment.CENTER,this.headerTextColor=k||e.th.hh,this.frameColor=C||e.th.Eh,this.buttons=A||[],this.cropType=N||e.CropType.FIT_CENTER,this.orientation=T,this.htmlId=_,this.css=I,this.isControl=!1,this.messageExtras=O,this.language=D,this.altImageText=j,this.nh=!1,this.kt=!1,this.Co=!1,this.Th=!1,this.Pe=null,this.Qe=null,this.ti=new a,this.oh=new a,this.do=e.TextAlignment.CENTER}subscribeToClickedEvent(e){return this.ti.wt(e)}subscribeToDismissedEvent(e){return this.oh.wt(e)}removeSubscription(e){this.ti.removeSubscription(e),this.oh.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions(),this.oh.removeAllSubscriptions()}closeMessage(){this.ll(this.Pe)}Ve(){return!0}Bo(){return this.Ve()}Le(){return null!=this.htmlId&&this.htmlId.length>4}Oe(){return this.Le()&&null!=this.css&&this.css.length>0}Ge(){if(this.Le()&&this.Oe())return this.htmlId+"-css"}Qt(){return!this.kt&&(this.kt=!0,!0)}Ur(){return this.kt}$t(e){return!this.Co&&(this.Co=!0,this.ti.L(),!0)}Kt(){return!this.Th&&(this.Th=!0,this.oh.L(),!0)}hide(t){if(t&&t.parentNode){var i=t.closest(".ab-iam-root");if(null==i&&(i=t),this.Ve()&&null!=i.parentNode){var a=i.parentNode.classList;a&&a.contains(e.rh)&&a.remove(e.rh),document.body.removeEventListener("touchmove",e.lh)}i.className=i.className.replace(e.uh,e.ah)}return this.animateOut||!1}ll(t,i){if(null!=t){this.Pe=null;var a,s,r=!1;(a=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t)&&(r=this.hide(a));var n=document.body;null!=n&&(s=n.scrollTop);var o=()=>{if(t&&t.parentNode){var e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}var a=this.Ge();if(null!=a){var r=document.getElementById(a);r&&r.parentNode&&r.parentNode.removeChild(r)}null!=n&&"Safari"===eu.browser&&(n.scrollTop=s),i?i():this.Kt()};r?setTimeout(o,e.cr):o(),this.Qe&&this.Qe.focus()}}ho(){return document.createTextNode(this.message||"")}bo(e){e.setAttribute("alt",this.altImageText||"")}static lh(t){if(!t.targetTouches||!(t.targetTouches.length>1)){var i=t.target;i&&i.classList&&i.classList.contains("ab-message-text")&&i.scrollHeight>i.clientHeight||document.querySelector(`.${e.rh}`)&&t.cancelable&&t.preventDefault()}}Ah(t){var i=t.parentNode;this.Ve()&&null!=i&&this.orientation!==e.Orientation.LANDSCAPE&&(null!=i.classList&&i.classList.add(e.rh),document.body.addEventListener("touchmove",e.lh,!!tT()&&{passive:!1})),t.className+=" "+e.uh}static Ih(e){if(e.keyCode===tP.Oh&&!ew.ee(ih.Lh)&&document.querySelectorAll(".ab-modal-interactions").length>0){var t=document.getElementsByClassName("ab-html-message"),i=!1;for(var a of t){var s=null;tz(a)&&a.contentWindow&&(s=a.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=s&&(tD(s),i=!0)}if(!i){var r=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=r&&tD(r)}}}_h(){this.nh||ew.ee(ih.Lh)||(document.addEventListener("keydown",e.Ih,!1),ew.mh(()=>{document.removeEventListener("keydown",e.Ih)}),this.nh=!0)}dt(t){var i={};return t&&(i[e.ss.Vr]=this.message,i[e.ss.Wr]=this.messageAlignment,i[e.ss.Nh]=this.slideFrom,i[e.ss.xs]=this.extras,i[e.ss.Yr]=this.triggerId,i[e.ss.Zr]=this.clickAction,i[e.ss.URI]=this.uri,i[e.ss.ra]=this.openTarget,i[e.ss.sa]=this.dismissType,i[e.ss.ta]=this.duration,i[e.ss.ia]=this.icon,i[e.ss.ns]=this.imageUrl,i[e.ss.oa]=this.imageStyle,i[e.ss.pa]=this.iconColor,i[e.ss.ma]=this.iconBackgroundColor,i[e.ss.na]=this.backgroundColor,i[e.ss.ua]=this.textColor,i[e.ss.ca]=this.closeButtonColor,i[e.ss.fa]=this.animateIn,i[e.ss.da]=this.animateOut,i[e.ss.la]=this.header,i[e.ss.ga]=this.headerAlignment,i[e.ss.ja]=this.headerTextColor,i[e.ss.xa]=this.frameColor,i[e.ss.za]=this.buttons,i[e.ss.ha]=this.cropType,i[e.ss.va]=this.orientation,i[e.ss.wa]=this.htmlId,i[e.ss.CSS]=this.css,i[e.ss.ts]=t,i[e.ss.ya]=this.messageExtras,i[e.ss.LANGUAGE]=this.language,i[e.ss.ks]=this.altImageText),i}}),T.th={hh:4281545523,ih:4294967295,sh:4278219733,Rh:4293914607,Sh:4283782485,Eh:3224580915,eh:4288387995},T.Ye={Mh:"hd",We:"ias",Dh:"of",Ch:"do",dh:"umt",Uh:"tf",bh:"te"},T.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},T.ClickAction={URI:"URI",NONE:"NONE"},T.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},T.OpenTarget={NONE:"NONE",BLANK:"BLANK"},T.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},T.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},T.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},T.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},T.Ke={Kr:"SLIDEUP",Jr:"MODAL",Io:"MODAL_STYLED",Or:"FULL",Hr:"WEB_HTML",Je:"HTML",Ao:"HTML_FULL"},T.cr=500,T.Ph=200,T.uh="ab-show",T.ah="ab-hide",T.rh="ab-pause-scrolling",T.ss={Vr:"m",Wr:"ma",Nh:"sf",xs:"e",Yr:"ti",Zr:"ca",URI:"u",ra:"oa",sa:"dt",ta:"d",ia:"i",ns:"iu",oa:"is",pa:"ic",ma:"ibc",na:"bc",ua:"tc",ca:"cbc",fa:"ai",da:"ao",la:"h",ga:"ha",ja:"htc",xa:"fc",za:"b",ha:"ct",va:"o",wa:"hi",CSS:"css",ts:"type",Po:"messageFields",ya:"me",LANGUAGE:"l",ks:"ia"},e("HtmlMessage",_=class e extends T{constructor(e,t,i,a,s,r,n,o,l,u,h,c){super(e,void 0,void 0,t,i,void 0,void 0,void 0,a=a||T.DismissType.MANUAL,s,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,r,n,void 0,void 0,void 0,o,void 0,void 0,void 0,l,u,c,void 0,void 0),this.messageFields=h,this.messageFields=h}Bo(){return!1}$t(e){if(this.He===T.Ke.Hr){if(this.Co)return!1;this.Co=!0}return this.ti.L(e),!0}dt(){var t=super.dt(e.es);return t[T.ss.Po]=this.messageFields,t}static Xr(t){return new e(t[T.ss.Vr],t[T.ss.xs],t[T.ss.Yr],t[T.ss.sa],t[T.ss.ta],t[T.ss.fa],t[T.ss.da],t[T.ss.xa],t[T.ss.wa],t[T.ss.CSS],t[T.ss.Po],t[T.ss.ya])}}),_.es=T.Ke.Hr,e("InAppMessageButton",I=class e{constructor(t,i,s,r,n,o,l){this.text=t,this.backgroundColor=i,this.textColor=s,this.borderColor=r,this.clickAction=n,this.uri=o,this.id=l,this.text=t||"",this.backgroundColor=i||T.th.sh,this.textColor=s||T.th.ih,this.borderColor=r||this.backgroundColor,this.clickAction=n||T.ClickAction.NONE,this.uri=o,null==l&&(l=e.Hi),this.id=l,this.Co=!1,this.ti=new a}subscribeToClickedEvent(e){return this.ti.wt(e)}removeSubscription(e){this.ti.removeSubscription(e)}removeAllSubscriptions(){this.ti.removeAllSubscriptions()}$t(){return!this.Co&&(this.Co=!0,this.ti.L(),!0)}static fromJson(t){return new e(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}),I.Hi=-1,e("FullScreenMessage",O=class e extends T{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k,C,A,N,_,I,O){super(e,t,void 0,i,a,s,r,n,o=o||T.DismissType.MANUAL,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k=k||T.CropType.CENTER_CROP,C=C||T.Orientation.PORTRAIT,A,N,_,I,O),this.do=T.TextAlignment.CENTER}dt(){return super.dt(e.es)}static Xr(t){return new e(t[T.ss.Vr],t[T.ss.Wr],t[T.ss.xs],t[T.ss.Yr],t[T.ss.Zr],t[T.ss.URI],t[T.ss.ra],t[T.ss.sa],t[T.ss.ta],t[T.ss.ia],t[T.ss.ns],t[T.ss.oa],t[T.ss.pa],t[T.ss.ma],t[T.ss.na],t[T.ss.ua],t[T.ss.ca],t[T.ss.fa],t[T.ss.da],t[T.ss.la],t[T.ss.ga],t[T.ss.ja],t[T.ss.xa],tL(t[T.ss.za]),t[T.ss.ha],t[T.ss.va],t[T.ss.wa],t[T.ss.CSS],t[T.ss.ya],t[T.ss.LANGUAGE],t[T.ss.ks])}}),O.es=T.Ke.Or,e("ModalMessage",D=class e extends T{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k,C,A,N,_,I){super(e,t,void 0,i,a,s,r,n,o=o||T.DismissType.MANUAL,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S,k=k||T.CropType.FIT_CENTER,void 0,C,A,N,_,I),this.do=T.TextAlignment.CENTER}dt(){return super.dt(e.es)}static Xr(t){return new e(t[T.ss.Vr],t[T.ss.Wr],t[T.ss.xs],t[T.ss.Yr],t[T.ss.Zr],t[T.ss.URI],t[T.ss.ra],t[T.ss.sa],t[T.ss.ta],t[T.ss.ia],t[T.ss.ns],t[T.ss.oa],t[T.ss.pa],t[T.ss.ma],t[T.ss.na],t[T.ss.ua],t[T.ss.ca],t[T.ss.fa],t[T.ss.da],t[T.ss.la],t[T.ss.ga],t[T.ss.ja],t[T.ss.xa],tL(t[T.ss.za]),t[T.ss.ha],t[T.ss.wa],t[T.ss.CSS],t[T.ss.ya],t[T.ss.LANGUAGE],t[T.ss.ks])}}),D.es=T.Ke.Jr,e("SlideUpMessage",j=class e extends T{constructor(e,t,i,a,s,r,n,o,l,u,h,c,d,p,b,g,m,f,v,w,x,y,E,S){super(e,t=t||T.TextAlignment.START,i,a,s,r,n,o,l,u,h,c,void 0,d,p,b=b||T.th.Rh,g=g||T.th.Sh,m,f,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w,x,y,E,S),this.do=T.TextAlignment.START}Ve(){return!1}ho(){var e=document.createElement("span");return e.appendChild(document.createTextNode(this.message||"")),e}Ah(e){var t=e.getElementsByClassName("ab-in-app-message")[0];eb.Mo(t,!0,!0)||(this.slideFrom===T.SlideFrom.TOP?t.style.top="0px":t.style.bottom="0px"),super.Ah(e)}dt(){return super.dt(e.es)}static Xr(t){return new e(t[T.ss.Vr],t[T.ss.Wr],t[T.ss.Nh],t[T.ss.xs],t[T.ss.Yr],t[T.ss.Zr],t[T.ss.URI],t[T.ss.ra],t[T.ss.sa],t[T.ss.ta],t[T.ss.ia],t[T.ss.ns],t[T.ss.pa],t[T.ss.ma],t[T.ss.na],t[T.ss.ua],t[T.ss.ca],t[T.ss.fa],t[T.ss.da],t[T.ss.wa],t[T.ss.CSS],t[T.ss.ya],t[T.ss.LANGUAGE],t[T.ss.ks])}}),j.es=T.Ke.Kr,M=class e{constructor(e){this.wc=e,this.wc=e}xc(e){return null==this.wc||this.wc===e[0]}static fromJson(t){return new e(t?t.event_name:null)}dt(){return this.wc}},(P=class e{constructor(t,i,a,s){this.yE=t,this.HE=i,this.comparator=a,this.LE=s,this.yE=t,this.HE=i,this.comparator=a,this.LE=s,this.HE===e.XE.QE&&this.comparator!==e.BE.wE&&this.comparator!==e.BE.jE&&this.comparator!==e.BE.zE&&this.comparator!==e.BE.FE&&(this.LE=eK(this.LE))}xc(t){var i=null;switch(null!=t&&(i=t[this.yE]),this.comparator){case e.BE.kE:return null!=i&&i.valueOf()===this.LE.valueOf();case e.BE.xE:return null==i||i.valueOf()!==this.LE.valueOf();case e.BE.JE:return null!=i&&typeof i==typeof this.LE&&i>this.LE;case e.BE.wE:return this.HE===e.XE.QE?null!=i&&eG(i)&&eY(i)<=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i>=this.LE;case e.BE.VE:return null!=i&&typeof i==typeof this.LE&&i<this.LE;case e.BE.jE:return this.HE===e.XE.QE?null!=i&&eG(i)&&eY(i)>=this.LE.valueOf():null!=i&&typeof i==typeof this.LE&&i<=this.LE;case e.BE.qE:return null!=i&&"string"==typeof i&&typeof i==typeof this.LE&&null!=i.match(this.LE);case e.BE.PE:return null!=i;case e.BE.WE:return null==i;case e.BE.zE:return null!=i&&eG(i)&&eZ(i)<this.LE;case e.BE.FE:return null!=i&&eG(i)&&eZ(i)>this.LE;case e.BE.ZE:return null==i||typeof i!=typeof this.LE||"string"!=typeof i||null==i.match(this.LE)}return!1}static fromJson(t){return new e(t.property_key,t.property_type,t.comparator,t.property_value)}dt(){var e=this.LE;return eG(this.LE)&&(e=eW(e.valueOf())),{k:this.yE,t:this.HE,c:this.comparator,v:e}}static qn(t){return new e(t.k,t.t,t.c,t.v)}}).XE={$E:"boolean",tT:"number",sT:"string",QE:"date"},P.BE={kE:1,xE:2,JE:3,wE:4,VE:5,jE:6,qE:10,PE:11,WE:12,zE:15,FE:16,ZE:17},z=class e{constructor(e){this.filters=e,this.filters=e}xc(e){for(var t=!0,i=0;i<this.filters.length;i++){for(var a=this.filters[i],s=!1,r=0;r<a.length;r++)if(a[r].xc(e)){s=!0;break}if(!s){t=!1;break}}return t}static fromJson(t){if(null==t||!e$(t))return null;for(var i=[],a=0;a<t.length;a++){for(var s=[],r=t[a],n=0;n<r.length;n++)s.push(P.fromJson(r[n]));i.push(s)}return new e(i)}dt(){for(var e=[],t=0;t<this.filters.length;t++){for(var i=this.filters[t],a=[],s=0;s<i.length;s++)a.push(i[s].dt());e.push(a)}return e}static qn(t){for(var i=[],a=0;a<t.length;a++){for(var s=[],r=t[a],n=0;n<r.length;n++)s.push(P.qn(r[n]));i.push(s)}return new e(i)}},R=class e{constructor(e,t){this.wc=e,this.tf=t,this.wc=e,this.tf=t}xc(e){if(null==this.wc||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.wc&&this.tf.xc(i)}static fromJson(t){return new e(t?t.event_name:null,t?z.fromJson(t.property_filters):null)}dt(){return{e:this.wc,pf:this.tf?this.tf.dt():null}}},L=class e{constructor(e,t){this.if=e,this.rf=t,this.if=e,this.rf=t}xc(e){if(null==this.if)return!1;var t=$.sf(e[0],this.if);if(!t)return!1;var i=null==this.rf||0===this.rf.length;if(null!=this.rf){for(var a=0;a<this.rf.length;a++)if(this.rf[a]===e[1]){i=!0;break}}return t&&i}static fromJson(t){return new e(t?t.id:null,t?t.buttons:null)}dt(){return this.if}},U=class e{constructor(e){this.productId=e,this.productId=e}xc(e){return null==this.productId||e[0]===this.productId}static fromJson(t){return new e(t?t.product_id:null)}dt(){return this.productId}},B=class e{constructor(e,t){this.productId=e,this.tf=t,this.productId=e,this.tf=t}xc(e){if(null==this.productId||null==this.tf)return!1;var t=e[0],i=e[1];return t===this.productId&&this.tf.xc(i)}static fromJson(t){return new e(t?t.product_id:null,t?z.fromJson(t.property_filters):null)}dt(){return{id:this.productId,pf:this.tf?this.tf.dt():null}}},F=class e{constructor(e){this.if=e,this.if=e}xc(e){return null==this.if||$.sf(e[0],this.if)}static fromJson(t){return new e(t?t.campaign_id:null)}dt(){return this.if}},($=class e{constructor(e,t){this.type=e,this.data=t,this.type=e,this.data=t}kc(t,i){return e._c[this.type]===t&&(null==this.data||this.data.xc(i))}static sf(e,t){var i=null;try{i=window.atob(e)}catch(t){return er.info("Failed to unencode analytics id "+e+": "+e8(t)),!1}return t===i.split("_")[0]}static fromJson(t){var i=t.type,a=null;switch(i){case e._r.OPEN:case e._r.qs:break;case e._r.Rr:a=U.fromJson(t.data);break;case e._r.bc:a=B.fromJson(t.data);break;case e._r.vr:a=F.fromJson(t.data);break;case e._r.pe:a=M.fromJson(t.data);break;case e._r.Ec:a=R.fromJson(t.data);break;case e._r.Qr:a=L.fromJson(t.data)}return new e(i,a)}dt(){return{t:this.type,d:this.data?this.data.dt():null}}static qn(t){var i,a=null;switch(t.t){case e._r.OPEN:case e._r.qs:break;case e._r.Rr:a=new U(t.d);break;case e._r.bc:a=new B((i=t.d||{}).id,z.qn(i.pf||[]));break;case e._r.vr:a=new F(t.d);break;case e._r.pe:a=new M(t.d);break;case e._r.Ec:a=new R((i=t.d||{}).e,z.qn(i.pf||[]));break;case e._r.Qr:a=new L(t.d)}return new e(t.t,a)}})._r={OPEN:"open",Rr:"purchase",bc:"purchase_property",vr:"push_click",pe:"custom_event",Ec:"custom_event_property",Qr:"iam_click",qs:"test"},$._c={},$._c[$._r.OPEN]=tU.OPEN,$._c[$._r.Rr]=tU.Rr,$._c[$._r.bc]=tU.Rr,$._c[$._r.vr]=tU.vr,$._c[$._r.pe]=tU.pe,$._c[$._r.Ec]=tU.pe,$._c[$._r.Qr]=tU.Qr,$._c[$._r.qs]=tU.qs,(G=class e{constructor(t,i=[],a,s,r=0,n,o,l=0,u=e.td,h,c,d){this.id=t,this.sd=i,this.startTime=a,this.endTime=s,this.priority=r,this.type=n,this.data=o,this.ed=l,this.rd=u,this.Gr=h,this.hd=c,this.od=d,this.id=t,this.sd=i||[],void 0===a&&(a=null),this.startTime=a,void 0===s&&(s=null),this.endTime=s,this.priority=r||0,this.type=n,this.ed=l||0,null==h&&(h=1e3*(this.ed+30)),this.Gr=h,this.data=o,null!=u&&(this.rd=u),this.hd=c,this.od=d||null}nd(t){return null==this.od||this.rd!==e.td&&t-this.od>=1e3*this.rd}ad(e){this.od=e}ud(e){return Math.max(e+1e3*this.ed-new Date().valueOf(),0)}dd(e){var t=new Date().valueOf()-e,i=null==e||isNaN(t)||null==this.Gr||t<this.Gr;return i||er.info(`Trigger action ${this.type} is no longer eligible for display - fired ${t}ms ago and has a timeout of ${this.Gr}ms.`),!i}static fromJson(t){for(var i=t.id,a=[],s=0;s<t.trigger_condition.length;s++)a.push($.fromJson(t.trigger_condition[s]));var r=eK(t.start_time),n=eK(t.end_time),o=t.priority,l=t.type,u=t.delay,h=t.re_eligibility,c=t.timeout,d=t.data,p=t.min_seconds_since_last_trigger;return eF(e._r,l,"Could not construct Trigger from server data","Trigger.Types")?new e(i,a,r,n,o,l,d,u,h,c,p):null}dt(){for(var e=[],t=0;t<this.sd.length;t++)e.push(this.sd[t].dt());return{i:this.id,c:e,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.Gr,ss:this.hd,ld:this.od}}static qn(t){for(var i=[],a=t.c||[],s=0;s<a.length;s++)i.push($.qn(a[s]));return new e(t.i,i,eV(t.s),eV(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}})._r={Br:"inapp",md:"templated_iam"},G.td=-1,eg={openUri:tV,Uo:tK,$o:tJ,Ca:tY},em=t9,q=class{constructor(e,t=!1){if(this.language=e,null!=e&&(e=e.toLowerCase()),null!=e&&null==ie[e]){var i=e.indexOf("-");i>0&&(e=e.substring(0,i))}if(null==ie[e]){var a="Braze does not yet have a localization for language "+e+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";t?er.error(a):er.info(a),e="en"}this.language=e}get(e){return ie[this.language][e]}So(){switch(this.language){case"ar":case"he":case"fa":return"rtl";default:return"ltr"}}},ef=it,H=class{constructor(e,t,i,s){this.B=e,this.C=t,this.j=i,this.Cs=s,this.B=e,this.C=t,this.j=i,this.Cs=s,this.yi=new a,ew.q(this.yi),this.Mi=1e3,this.ki=6e4,this.zi=null,this.Bi=null,this.Ri=null}_i(){return this.yi}qi(e){return this.yi.wt(e)}xi(){return this.zi}Pi(e){this.zi=e}rt(e,t,i,a){var s,r=new E;if(t===eR.Gi||e instanceof N){if(!e.Qt())return er.info("This in-app message has already received an impression. Ignoring analytics event."),r}else if((t===eR.$i||e instanceof _&&t===eR.Fi)&&!e.$t(a))return er.info("This in-app message has already received a click. Ignoring analytics event."),r;return null==(s=e instanceof N?{trigger_ids:[e.triggerId]}:this.Oi(e))?r:(e.messageExtras&&(s.message_extras=e.messageExtras),null!=i&&(s.bid=i),ex.rt(t,s))}Xi(e,t){var i=new E;if(!e.$t())return er.info("This in-app message button has already received a click. Ignoring analytics event."),i;var a=this.Oi(t);return null==a?i:e.id===I.Hi?(er.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=e.id&&(a.bid=e.id),ex.rt(eR.Fi,a))}Ji(e){var t=e.messageFields;return null!=t&&t.is_push_primer||!1}Ki(e){if(e instanceof T){var t,i=e=>{if(e){var t=tt(e);if(ta(t))return te(e9.Li,"In-App Message");if(function e(t){if(!t||!tb(t))return!1;var i=e6.properties.type,a=e6.properties.eo,s=t[i];return s===e6.types.io?ti(e,t[a]):s===e6.types.requestPushPermission}(t)){var i=ed.Qi();if(!i.Ui)return ed.Vi(i.reason,"In-App Message")}}};if(this.Ji(e)){var a=ed.Qi();if(!a.Ui)return ed.Vi(a.reason,"In-App Message")}for(var s of e.buttons||[])if(s.clickAction===T.ClickAction.URI&&s.uri&&to.test(s.uri)&&(t=i(s.uri)))return t;return e.clickAction===T.ClickAction.URI&&e.uri&&to.test(e.uri)?i(e.uri):void 0}}Wi(e,t){t!==this.Ri&&this.Yi(),this.Bi=e,this.Ri=t}Yi(){null!=this.Bi&&(clearTimeout(this.Bi),this.Bi=null,this.Ri=null)}Zi(e,t,i,a){var s=this.B;if(s){this.Ri&&e.triggerId!==this.Ri&&(this.Yi(),eh.Ci(this.j,eh.H.Ir));var r=s.Mr(!1),n=s.$(r);n.template={trigger_id:e.triggerId,trigger_event_type:t},null!=i&&(n.template.data=i.Ar());var o=s.A(n,eh.H.Ir);s.J(n,(s=-1)=>{var r=this.B;if(r){var l=new Date().valueOf();eh.K(this.j,eh.H.Ir,l),-1!==s&&o.push(["X-Braze-Req-Tokens-Remaining",s.toString()]);var u,h,c=!1;ec.O({url:`${r.V()}/template/`,data:n,headers:o,W:t=>{if(!r.Y(n,t,o))return void("function"==typeof e.Tr&&e.Tr());if(r.Z(),null!=t&&null!=t.templated_message){var i=t.templated_message;if(i.type===G._r.Br){var a=tR(i.data);if(null!=a){var s=this.Ki(a);if(s)return er.error(s),void("function"==typeof e.Tr&&e.Tr());"function"==typeof e.qr&&e.qr(a)}}}},error:t=>{c=!0,u=t,h=`getting user personalization for message ${e.triggerId}.`},tt:(s,n)=>{if(new Date().valueOf()-e.Er<e.Gr){var o=0;if(c){var l=Math.min(e.Gr,this.ki),d=this.Mi;null==a&&(a=d),o=Math.min(l,tS(d,3*a))}r.st(n,()=>{this.Zi(e,t,i,o)},eh.H.Ir,t=>this.Wi(t,e.triggerId),()=>this.Yi(),o)}c&&r._(u,h)}})}},eh.H.Ir)}}Oi(e){if(null==e.triggerId)return er.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;var t={};return null!=e.triggerId&&(t.trigger_ids=[e.triggerId]),t}Ee(e){return!!this.j&&!(!(e&&e instanceof T&&e.constructor!==T)||e instanceof N)&&this.j.ft(tf.ct.Nr,e.dt())}zr(){if(!this.j)return null;var e,t=this.j.lt(tf.ct.Nr);if(!t)return null;switch(t.type){case T.Ke.Or:e=O.Xr(t);break;case T.Ke.Hr:case T.Ke.Je:case T.Ke.Ao:e=_.Xr(t);break;case T.Ke.Jr:case T.Ke.Io:e=D.Xr(t);break;case T.Ke.Kr:e=j.Xr(t)}return e&&this.Lr(),e}Lr(){this.j&&this.j.Nt(tf.ct.Nr)}},ev=il,X=class e{constructor(e,t,i,a,s){this.triggerId=e,this.qr=t,this.Tr=i,this.Er=a,this.Gr=s,this.triggerId=e,this.qr=t,this.Tr=i,this.Er=a,this.Gr=s}static fromJson(t,i,a,s,r){return null==t||null==t.trigger_id?null:new e(t.trigger_id,i,a,s,r)}},W=class extends v{constructor(e,t,i,a,s){super(),this.tg=e,this.ws=t,this.j=i,this.Cn=a,this.ig=s,this.tg=e,this.ws=t,this.j=i,this.Cn=a,this.ig=s,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.j){this.hg=this.j.lt(tf.ct.iE)||this.hg,this.ng=this.j.lt(tf.ct.EE)||this.ng,this.og=this.j.lt(tf.ct.aE)||this.og;for(var e=0;e<this.triggers.length;e++){var t=this.triggers[e];t.id&&null!=this.og[t.id]&&t.ad(this.og[t.id])}}}ag(){if(this.j){this.lg=this.j.lt(tf.ct.nE)||0;for(var e=this.j.lt(tf.ct.oE)||[],t=[],i=0;i<e.length;i++)t.push(G.qn(e[i]));this.triggers=t,this.fg()}}gg(){var e=this,t=function(t,i,a,s,r){return function(){e.cg(t,i,a,s,r)}},i={};for(var a of this.triggers)a.id&&(i[a.id]=a);for(var s=!1,r=0;r<this.triggers.length;r++){var n=this.triggers[r];if(n.id&&null!=this.ng[n.id]){for(var o=this.ng[n.id],l=[],h=0;h<o.length;h++){var c=o[h],d=n.ud(c.Er||0);if(d>0){var p=void 0,b=void 0;l.push(c),null!=c.ug&&(p=c.ug),null!=c.dg&&u.gE(c.dg)&&(b=u.qn(c.dg));var g=[];if(c.pg&&e$(c.pg))for(var m=0;m<c.pg.length;m++){var f=i[c.pg[m]];null!=f&&g.push(f)}this.eg.push(window.setTimeout(t(n,c.Er||0,p,b,g),d))}}this.ng[n.id].length>l.length&&(this.ng[n.id]=l,s=!0,0===this.ng[n.id].length&&delete this.ng[n.id])}}s&&this.j&&this.j.ft(tf.ct.EE,this.ng)}mg(){if(this.j){for(var e=[],t=0;t<this.triggers.length;t++)e.push(this.triggers[t].dt());this.lg=new Date().valueOf(),this.j.ft(tf.ct.oE,e),this.j.ft(tf.ct.nE,this.lg)}}bg(){this.j&&((this.j.lt(tf.ct.nE)||0)>this.lg?this.ag():this.fg())}N(e){var t=!1;if(null!=e&&e.triggers){this.ig.Lr(),this.fg();var i,a={},s={};this.triggers=[];for(var r=0;r<e.triggers.length;r++){var n=G.fromJson(e.triggers[r]);if(n){n.id&&null!=this.og[n.id]&&(n.ad(this.og[n.id]),a[n.id]=this.og[n.id]),n.id&&null!=this.ng[n.id]&&(s[n.id]=this.ng[n.id]);for(var o=0;o<n.sd.length;o++)if(n.sd[o].kc(tU.qs,null)){t=!0;break}this.triggers.push(n)}}eX(this.og,a)||(this.og=a,this.j&&this.j.ft(tf.ct.aE,this.og)),eX(this.ng,s)||(this.ng=s,this.j&&this.j.ft(tf.ct.EE,this.ng)),this.mg(),t&&(er.info("Trigger with test condition found, firing test."),this.ve(tU.qs)),this.ve(tU.OPEN);var l=this.sg;this.sg=[];for(var u=0;u<l.length;u++)i=Array.prototype.slice.call(l[u]),this.ve(...i)}}cg(e,t,i,a,s){var r,n,o,l=a=>{this.fg();var s=new Date().valueOf();e.dd(t)||(!1===navigator.onLine&&e.type===G._r.Br&&a.imageUrl?er.info(`Not showing ${e.type} trigger action ${e.id} due to offline state.`):e.nd(s)&&this.wg(e,s,i)?0===this.ws.sc()?er.info(`Not displaying trigger ${e.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.ws.L([a]),this.yg(e,s)):er.info(`Not displaying trigger ${e.id} because display time fell outside of the acceptable time window.`))},u=()=>{this.fg();var r=s.pop();if(null!=r){if(this.Tg(r,t,i,a,s),r.dd(t)){var n=`Server aborted in-app message display, but the timeout on fallback trigger ${r.id} has already elapsed.`;s.length>0&&(n+=" Continuing to fall back."),er.info(n),u()}else{er.info(`Server aborted in-app message display. Falling back to lower priority ${r.type} trigger action ${e.id}.`);var o=1e3*r.ed-(new Date().valueOf()-t);o>0?this.eg.push(window.setTimeout(()=>{this.cg(r,t,i,a,s)},o)):this.cg(r,t,i,a,s)}}};switch(e.type){case G._r.Br:if(null==(r=tR(e.data))){er.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}if(n=this.ig.Ki(r)){er.error(n),u();break}l(r);break;case G._r.md:if(null==(o=X.fromJson(e.data,l,u,t,e.Gr||0))){er.error(`Could not parse trigger data for trigger ${e.id}, ignoring.`);break}this.ig.Zi(o,i,a);break;default:er.error(`Trigger ${e.id} was of unexpected type ${e.type}, ignoring.`)}}ve(e,t=null,i){if(eF(tU,e,"Cannot fire trigger action.","TriggerEvents")){if(this.Cn&&this.Cn.Yl())return er.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();for(var a=new Date().valueOf(),s=a-(this.hg||0),r=!0,n=!0,o=[],l=0;l<this.triggers.length;l++){var u=this.triggers[l],h=a+1e3*u.ed;if(u.nd(h)&&(null==u.startTime||u.startTime.valueOf()<=a)&&(null==u.endTime||u.endTime.valueOf()>=a)){for(var c=!1,d=0;d<u.sd.length;d++)if(u.sd[d].kc(e,t)){c=!0;break}c&&(r=!1,this.wg(u,h,e)&&(n=!1,o.push(u)))}}if(r)return void er.info(`Trigger event ${e} did not match any trigger conditions.`);if(n)return void er.info(`Ignoring ${e} trigger event because a trigger was displayed ${s/1e3}s ago.`);o.sort((e,t)=>e.priority-t.priority);var p=o.pop();null!=p&&(er.info(`Firing ${p.type} trigger action ${p.id} from trigger event ${e}.`),this.Tg(p,a,e,i,o),0===p.ed?this.cg(p,a,e,i,o):this.eg.push(window.setTimeout(()=>{this.cg(p,a,e,i,o)},1e3*p.ed)))}}changeUser(e=!1){if(this.triggers=[],this.j&&this.j.Nt(tf.ct.oE),!e){this.sg=[],this.hg=null,this.og={},this.ng={};for(var t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.j&&(this.j.Nt(tf.ct.iE),this.j.Nt(tf.ct.aE),this.j.Nt(tf.ct.EE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(var e=0;e<this.eg.length;e++)clearTimeout(this.eg[e]);this.eg=[]}wg(e,t,i){if(null==this.hg)return!0;if(i===tU.qs)return er.info("Ignoring minimum interval between trigger because it is a test type."),!0;var a=e.hd;return null==a&&(a=this.tg),t-this.hg>=1e3*a}Tg(e,t,i,a,s){this.fg(),e.id&&(this.ng[e.id]=this.ng[e.id]||[]);var r,n={};n.Er=t,n.ug=i,null!=a&&(r=a.dt()),n.dg=r;var o=[];for(var l of s)l.id&&o.push(l.id);n.pg=o,e.id&&this.ng[e.id].push(n),this.j&&this.j.ft(tf.ct.EE,this.ng)}yg(e,t){this.fg(),e.ad(t),this.hg=t,e.id&&(this.og[e.id]=t),this.j&&(this.j.ft(tf.ct.iE,t),this.j.ft(tf.ct.aE,this.og))}},K=class e{constructor(e,t,i,a,s){this.endpoint=e,this.Vn=t,this.publicKey=i,this.Vl=a,this.dl=s,this.endpoint=e||null,this.Vn=t||null,this.publicKey=i||null,this.Vl=a||null,this.dl=s||null}dt(){return{e:this.endpoint,c:this.Vn,p:this.publicKey,u:this.Vl,v:this.dl}}static qn(t){return new e(t.e,eV(t.c),t.p,t.u,t.v)}},J=class{constructor(e,t){this.h=e,this.j=t,this.h=e,this.j=t}getUserId(){var e=this.j.tu(tf.iu.su);if(null==e)return null;var t=e.eu,i=e7(t);if(i>c.mr){for(;i>c.mr;)i=e7(t=t.slice(0,t.length-1));e.eu=t,this.j.uu(tf.iu.su,e)}return t}ou(e){var t=null==this.getUserId();this.j.uu(tf.iu.su,new h(e)),t&&this.j.ru(e)}setCustomUserAttribute(e,t){if(this.h.hu(e))return er.info('Custom Attribute "'+e+'" is blocklisted, ignoring.'),!1;var i={};return i[e]=t,this.nu(c.lu,i,!0)}nu(e,t,i=!1,a=!1){var s=this.j.mu(this.getUserId(),e,t),r="",n=e,o=t;return i&&(r=" custom","object"==typeof t&&(n=Object.keys(t)[0],"object"==typeof(o=t[n])&&(o=JSON.stringify(o,null,2)))),!a&&s&&er.info(`Logged${r} attribute ${n} with value ${o}`),s}Pn(e,t,a,s,r){this.nu("push_token",e,!1,!0),this.nu("custom_push_public_key",a,!1,!0),this.nu("custom_push_user_auth",s,!1,!0),this.nu("custom_push_vapid_public_key",r,!1,!0);var n=i.Us.Rs,o=new i(n,er),l=new K(e,t,a,s,r);this.j.ft(tf.ct.In,l.dt()),o.setItem(n.Fs.cu,n.me,!0)}Sn(e){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),e){var t=i.Us.Rs,a=new i(t,er);this.j.ft(tf.ct.In,!1),a.setItem(t.Fs.cu,t.me,!1)}}},ew=new class{constructor(){this.sn="",this.Xh="",this.Zh=void 0,this.Qh=null,this.on=null,this.B=null,this.Cn=null,this.h=null,this.C=null,this.j=null,this.Cs=null,this.Ea="",this.isInitialized=!1,this.Ia=!1,this.Sa=new a,this.Na=new a,this.options={},this.Oa=[],this.Ta=[],this.yi=[],this.Xh="6.1.0"}Ra(e){this.Sa.wt(e)}mh(e){this.Na.wt(e)}initialize(e,t){if(this.ao())return er.info("Braze has already been initialized with an API key."),!0;this.options=t||{};var i=this.ee(ih.Yo),s=t1(eg.Ca());if(s&&"true"===s.brazeLogging&&(i=!0),er.init(i),er.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==e||""===e||"string"!=typeof e)return er.error("Braze requires a valid API key to be initialized."),!1;this.sn=e;var r=this.ee(ih.Ro);if(null==r||""===r||"string"!=typeof r)return er.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(r)&&(r=`https://${r}`);var n=r;if((r=document.createElement("a")).href=n,"/"===r.pathname&&(r=`${r}api/v3`),this.Ea=r.toString(),eu.Pa&&!this.ee(ih._o))return er.info("Ignoring activity from crawler bot "+navigator.userAgent),this.Ia=!0,!1;var o=this.ee(ih.Wo)||!1;if(this.j=ep.La(e,o),o&&this.j.Da(e),new m.ne(null,!0).br(tf.ie))return er.info("Ignoring all activity due to previous opt out"),this.Ia=!0,!1;for(var l of eH(this.options))-1===eB(eU).indexOf(l)&&er.warn(`Ignoring unknown initialization option '${l}'.`);if(null!=this.ee(ih.Yh)){var u=this.ee(ih.Yh);-1!==["mparticle","wordpress","tealium"].indexOf(u)?this.Zh=u:er.error("Invalid sdk flavor passed: "+u)}var c=this.ee(eU.Vo);if(null!=c){if(e$(c)){for(var d=[],p=0;p<c.length;p++)eF(tv,c[p],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&d.push(c[p]);c=d}else er.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),c=null}var b=this.ee(ih.Jh);if(b){var g=new h(b);this.j.uu(tf.iu.Jh,g)}this.on=new x(this.j,c),this.h=new C(this.j),this.Cs=new J(this.h,this.j),this.C=new A(this.j,this.Cs,this.h,this.ee(ih.Wh));var v=new a;return this.Qh=new f(this.j,this.ee(ih.Xo),v),this.q(v),this.B=new y(this.on,this.j,this.Qh,this.Cs,this.C,this.h,this.sn,this.Ea,this.Xh,this.Zh||"",this.ee(ih.Vh),this.ee(ih.Kh)),this.Cn=new S(this.sn,this.Ea,this.C,this.on,this.Cs,this.h,this.j,e=>{if(this.ao())for(var t of this.lr())t.N(e)},this.Qh,this.B),this.Cn.initialize(),o||this.j.Ua(),er.info(`Initialized for the Braze backend at "${this.ee(ih.Ro)}" with API key "${this.sn}".`),iu.t(),this.h.Ue(()=>{var e;this.isInitialized&&(null===(e=this.h)||void 0===e?void 0:e.Re())&&Promise.resolve().then(function(){return ej}).then(e=>{this.isInitialized&&(0,e.default)()})}),this.Cn.rn(()=>{var e;this.isInitialized&&(null===(e=this.h)||void 0===e?void 0:e.Re())&&Promise.resolve().then(function(){return ej}).then(e=>{this.isInitialized&&(0,e.default)(void 0,void 0,!0)})}),this.Sa.L(this.options),this.isInitialized=!0,window.dispatchEvent(new CustomEvent("braze.initialized")),!0}destroy(e){if(er.destroy(),this.ao()){for(var t of(this.Na.L(),this.Na.removeAllSubscriptions(),this.Oa))t.destroy();for(var i of(this.Oa=[],this.Ta))i.clearData(!1);this.B&&this.B.fo(),this.Ta=[],this.removeAllSubscriptions(),this.yi=[],null!=this.Cn&&this.Cn.destroy(),this.Cn=null,this.Qh=null,this.on=null,this.B=null,this.h=null,this.C=null,this.Cs=null,this.options={},this.Zh=void 0,this.isInitialized=!1,this.Ia=!1,e&&(this.j=null)}}rr(){return!this.Wa()&&!!this.ao()}ba(){return this.sn}Sr(){return this.Qh}V(){return this.Ea}de(){return this.on}m(){return this.B}ee(e){return this.options[e]}lr(){return this.Ta}nn(){return this.Cn}l(){return this.h}u(){return this.C}p(){return this.j}gr(){if(this.Cs&&this.Cn)return new c(this.Cs,this.Cn)}ir(){return this.Cs}tr(){return!0===this.ee(ih.re)}g(e){var t=!1;for(var i of this.Oa)i===e&&(t=!0);t||this.Oa.push(e)}v(e){var t=!1;for(var i of this.Ta)i.constructor===e.constructor&&(t=!0);e instanceof v&&!t&&this.Ta.push(e)}q(e){e instanceof a&&this.yi.push(e)}removeAllSubscriptions(){if(this.rr())for(var e of this.yi)e.removeAllSubscriptions()}removeSubscription(e){if(this.rr())for(var t of this.yi)t.removeSubscription(e)}ce(e){this.Ia=e}ao(){return this.isInitialized}Wa(){return this.Ia}Vs(){return this.Xh}},ex=ic,V=class{constructor(e){this.j=e,this.j=e}logClick(e){var t=new E;if(e.$t(),null==e.url||""===e.url)return er.info(`Card ${e.id} has no url. Not logging click to Braze servers.`),t;if(e.id&&this.j){var i=this.j.lt(tf.ct.Et)||{};i[e.id]=!0,this.j.ft(tf.ct.Et,i)}var a=this.Gt([e]);if(null==a)return t;var s=eR.Ht;return ex.rt(s,a)}Jt(e){var t=new E;if(!e.Kt())return er.info(`Card ${e.id} refused this dismissal. Ignoring analytics event.`),t;if(e.id&&this.j){var i=this.j.lt(tf.ct.Lt)||{};i[e.id]=!0,this.j.ft(tf.ct.Lt,i)}var a=this.Gt([e]);return null==a?t:ex.rt(eR.Mt,a)}Ot(e){var t=new E(!0),i=[],a=[],s={};for(var r of(this.j&&(s=this.j.lt(tf.ct.Pt)||{}),e))r.Qt()?(r instanceof l?a.push(r):i.push(r),r.id&&(s[r.id]=!0)):er.info(`Card ${r.id} logged an impression too recently. Ignoring analytics event.`);var n=this.Gt(i),o=this.Gt(a);if(null==n&&null==o)return t.W=!1,t;if(this.j&&this.j.ft(tf.ct.Pt,s),null!=n){var u=eR.Ut,h=ex.rt(u,n);t.Vt(h)}if(null!=o){var c=ex.rt(eR.Wt,o);t.Vt(c)}return t}Gt(e){for(var t,i=null,a=0;a<e.length;a++)null!=(t=e[a].id)&&""!==t&&((i=i||{}).ids=i.ids||[],i.ids.push(t));return i}},ey=id,Y=class extends v{constructor(e,t,s,r,n){super(),this.Cs=e,this.j=t,this.h=s,this.vs=r,this.B=n,this.Cs=e,this.j=t,this.h=s,this.vs=r,this.B=n,this.ws=new a,ew.q(this.ws),this.ys=0,this.Ss=0,this.cards=[],this.Ts();var o=i.Us.Rs;new i(o,er).Ds(o.Fs.As,e=>{this.Ls(e)}),this.Ns=null,this.D=null,this.Js=null,this.Ms=null,this.$s=10}Bs(){return this.Ns}Es(e){this.Ns=e}jt(){return this.D}yt(e){this.D=e}Ts(){if(this.j){for(var e=this.j.lt(tf.ct.Ps)||[],t=[],i=0;i<e.length;i++){var a,r=im((a=e[i])[s.ss.rs],a[s.ss.ts],a[s.ss.os],a[s.ss.cs],a[s.ss.ns],a[s.ss.ds],eV(a[s.ss.ps]),eV(a[s.ss.us]),a[s.ss.URL],a[s.ss.ls],a[s.ss.fs],a[s.ss.xs],a[s.ss.bs],a[s.ss.gs],a[s.ss.js],a[s.ss.qs]||!1,a[s.ss.zs],a[s.ss.ks])||void 0;null!=r&&t.push(r)}this.cards=this.Xs(this._s(t,!1)),this.ys=this.j.lt(tf.ct.Gs)||this.ys,this.Ss=this.j.lt(tf.ct.Hs)||this.Ss}}Is(e,t=!1,i=0,a=0){var s;if(t)for(var r of(s=[],this.cards))r.test&&s.push(r);else s=this.cards.slice();for(var n=0;n<e.length;n++){for(var o=e[n],l=null,u=0;u<this.cards.length;u++)if(o.id===this.cards[u].id){l=this.cards[u];break}if(t){var h=iv(o);null!=l&&l.viewed&&h&&(h.viewed=!0),null!=h&&s.push(h)}else if(null==l){var c=iv(o);null!=c&&s.push(c)}else if(!l.ri(o)){for(var d=0;d<s.length;d++)if(o.id===s[d].id){s.splice(d,1);break}}}this.cards=this.Xs(this._s(s,t)),this.Ks(),this.ys=i,this.Ss=a,this.j&&(this.j.ft(tf.ct.Gs,this.ys),this.j.ft(tf.ct.Hs,this.Ss))}N(e){if(this.Os()&&null!=e&&e.cards){this.j&&this.j.ft(tf.ct.Qs,ew.Vs());var t=e.full_sync;t||this.Ts(),this.Is(e.cards,t,e.last_full_sync_at,e.last_card_updated_at),this.ws.L(this.Ws(!0))}}Ys(e){this.Zs(),this.Js=e}Ls(e){if(this.Os()){this.Ts();var t,i=this.cards.slice(),a=null;a=null===(t=this.Cs)||void 0===t?void 0:t.getUserId();for(var s=0;s<e.length;s++)if(a===e[s].userId||null==a&&null==e[s].userId){for(var r=e[s].card,n=null,o=0;o<this.cards.length;o++)if(r.id===this.cards[o].id){n=this.cards[o];break}if(null==n){var l=iv(r);null!=l&&i.push(l)}else if(!n.ri(r)){for(var u=0;u<i.length;u++)if(r.id===i[u].id){i.splice(u,1);break}}}this.cards=this.Xs(this._s(i,!1)),this.Ks(),this.ws.L(this.Ws(!0))}}_s(e,t){var i={},a={},s={};this.j&&(i=this.j.lt(tf.ct.Et)||{},a=this.j.lt(tf.ct.Pt)||{},s=this.j.lt(tf.ct.Lt)||{});for(var r={},n={},o={},l=0;l<e.length;l++){var u=e[l].id;u&&(i[u]&&(e[l].clicked=!0,r[u]=!0),a[u]&&(e[l].viewed=!0,n[u]=!0),s[u]&&(e[l].dismissed=!0,o[u]=!0))}return t&&this.j&&(this.j.ft(tf.ct.Et,r),this.j.ft(tf.ct.Pt,n),this.j.ft(tf.ct.Lt,o)),e}Xs(e){var t=[],i=new Date,a={};this.j&&(a=this.j.lt(tf.ct.Lt)||{});for(var s=!1,r=0;r<e.length;r++){var n=e[r].url;if(!this.vs&&n&&t3(n)){er.error(`Card with url ${n} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`);continue}var o=e[r].expiresAt,l=!0;if(null!=o&&(l=o>=i),l=l&&!e[r].dismissed)t.push(e[r]);else{var u=e[r].id;u&&(a[u]=!0),s=!0}}return s&&this.j&&this.j.ft(tf.ct.Lt,a),t}Ks(){for(var e,t=[],i=0;i<this.cards.length;i++)t.push(this.cards[i].dt());null===(e=this.j)||void 0===e||e.ft(tf.ct.Ps,t)}Zs(){this.Js&&(clearTimeout(this.Js),this.Js=null)}fi(e,t,i=!1){var a,s=this.B,r=this.j;if(!s||!r)return void("function"==typeof t&&t());if(i&&(eh.Ci(r,eh.H.bi),this.Zs()),!this.Os())return void(null===(a=this.h)||void 0===a||a.vi(()=>{this.fi(e,t,!0)}));var n=s.$({},!0);r.lt(tf.ct.Qs)!==ew.Vs()&&this.wi(),n.last_full_sync_at=this.ys,n.last_card_updated_at=this.Ss;var o=s.A(n,eh.H.bi,i),l=!1;s.J(n,(i=-1)=>{if(this.j){var a=new Date().valueOf();eh.K(this.j,eh.H.bi,a)}-1!==i&&o.push(["X-Braze-Req-Tokens-Remaining",i.toString()]),ec.O({url:`${s.V()}/content_cards/sync`,data:n,headers:o,W:i=>{if(!s.Y(n,i,o))return l=!0,void("function"==typeof t&&t());s.Z(),this.N(i),l=!1,"function"==typeof e&&e()},error:e=>{s._(e,"retrieving content cards"),l=!0,"function"==typeof t&&t()},tt:(i,a)=>{var r;if(l){var n=this.Ms;(null==n||n<1e3*this.$s)&&(n=1e3*this.$s),r=Math.min(3e5,tS(1e3*this.$s,3*n))}s.st(a,()=>{this.fi(e,t,!1)},eh.H.bi,e=>this.Ys(e),()=>this.Zs(),r)}})},eh.H.bi,t)}Ws(e){e||this.Ts();var t=this.Xs(this.cards);t.sort((e,t)=>e.pinned&&!t.pinned?-1:t.pinned&&!e.pinned?1:e.updated&&t.updated&&e.updated>t.updated?-1:e.updated&&t.updated&&t.updated>e.updated?1:0);var i=Math.max(this.Ss||0,this.ys||0);return 0===i&&(i=void 0),this.j&&this.j.lt(tf.ct.Hs)===this.Ss&&void 0===i&&(i=this.Ss),new Z(t,eK(i))}St(e){return this.ws.wt(e)}wi(){this.ys=0,this.Ss=0,this.j&&(this.j.Nt(tf.ct.Gs),this.j.Nt(tf.ct.Hs))}changeUser(e){e||(this.cards=[],this.ws.L(new Z(this.cards.slice(),null)),this.j&&(this.j.Nt(tf.ct.Ps),this.j.Nt(tf.ct.Et),this.j.Nt(tf.ct.Pt),this.j.Nt(tf.ct.Lt))),this.Zs(),this.wi()}clearData(e){this.ys=0,this.Ss=0,this.cards=[],this.ws.L(new Z(this.cards.slice(),null)),e&&this.j&&(this.j.Nt(tf.ct.Ps),this.j.Nt(tf.ct.Et),this.j.Nt(tf.ct.Pt),this.j.Nt(tf.ct.Lt),this.j.Nt(tf.ct.Gs),this.j.Nt(tf.ct.Hs)),this.Zs()}Os(){return!!this.h&&(!!this.h.gi()||(0!==this.h.Ft()&&this.ji(),!1))}ji(){this.ws.L(new Z([],new Date)),this.j&&this.j.Nt(tf.ct.Ps)}},eE=iw,e("ContentCards",Z=class{constructor(e,t){this.cards=e,this.lastUpdated=t,this.cards=e,this.lastUpdated=t}getUnviewedCardCount(){var e=0;for(var t of this.cards)t.viewed||t instanceof l||e++;return e}sr(e){ib(e)}nr(e){return ig(e)}dr(){ix()}ar(){return!0}}),Z.ur=6e4,Z.cr=500,Z.Cr=1e4,eS={oo:ik,no:iA},ek=Object.freeze({__proto__:null,changeUser:iB}),eC=Object.freeze({__proto__:null,logCustomEvent:iK}),eA=Object.freeze({__proto__:null,logPurchase:iJ}),eN=Object.freeze({__proto__:null,requestImmediateDataFlush:iZ}),(Q=class e{constructor(e,t,i,a,s,r,n,o,l,u,h){this.en=e,this.sn=t,this.on=i,this.un=s,this.an=r,this.hn=n,this.h=o,this.cn=l,this.fn=u,this.j=h,this.en=e,this.sn=t,this.on=i,this.ln=a+"/safari/"+t,this.un=s||"/service-worker.js",this.hn=n,this.h=o,this.cn=l||!1,this.fn=u||!1,this.j=h,this.dn=ed.pn(),this.bn=ed.yn()}mn(){return this.fn}gn(e,t,i,a,s){e.unsubscribe().then(e=>{e?this.vn(t,i,a,s):(er.error("Failed to unsubscribe device from push."),"function"==typeof s&&s(!1))}).catch(e=>{er.error("Push unsubscription error: "+e),"function"==typeof s&&s(!1)})}wn(e,t,i){var a,s,r=(e=>{if("string"==typeof e)return e;if(0!==e.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return e.endpoint;var t=e.endpoint;return e.kn&&-1===e.endpoint.indexOf(e.kn)&&(t=e.endpoint+"/"+e.kn),t})(e),n=null,o=null;if(null!=e.getKey)try{var l=Array.from(new Uint8Array(e.getKey("p256dh"))),u=Array.from(new Uint8Array(e.getKey("auth")));n=btoa(String.fromCharCode.apply(null,l)),o=btoa(String.fromCharCode.apply(null,u))}catch(e){er.error(e8(e))}var h=e.options&&(a=e.options.applicationServerKey)&&a.byteLength&&a.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(a)))).replace(/\+/g,"-").replace(/\//g,"_"):null;null===(s=this.en)||void 0===s||s.Pn(r,t,n,o,h),r&&"function"==typeof i&&i(r,n,o)}Dn(){var e;null===(e=this.en)||void 0===e||e.Sn(!0)}An(e,t){var i;null===(i=this.en)||void 0===i||i.Sn(!1),er.info(e),"function"==typeof t&&t(!1)}jn(e,t,i,a){var s;if("default"===t.permission)try{window.safari.pushNotification.requestPermission(this.ln,e,{api_key:this.sn,device_id:(null===(s=this.on)||void 0===s?void 0:s.fe().id)||""},t=>{"granted"===t.permission&&this.en&&this.en.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.jn(e,t,i,a)})}catch(e){this.An("Could not request permission for push: "+e,a)}else"denied"===t.permission?this.An("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",a):"granted"===t.permission&&(er.info("Device successfully subscribed to push."),this.wn(t.deviceToken,new Date,i))}requestPermission(e,t,i){var a=a=>{switch(a){case"granted":return void("function"==typeof e&&e());case"default":return void("function"==typeof t&&t());case"denied":return void("function"==typeof i&&i());default:er.error("Received unexpected permission result "+a)}},s=!1;if("default"!==window.Notification.permission)a(Notification.permission);else{var r=window.Notification.requestPermission(e=>{s&&a(e)});r?r.then(e=>{a(e)}):s=!0}}vn(e,t,i,a){var s={userVisibleOnly:!0};null!=t&&(s.applicationServerKey=t),e.pushManager.subscribe(s).then(e=>{er.info("Device successfully subscribed to push."),this.wn(e,new Date,i)}).catch(e=>{ed.isPushBlocked()?(er.info("Permission for push notifications was denied."),"function"==typeof a&&a(!1)):(er.error("Push subscription failed: "+e),"function"==typeof a&&a(!0))})}xn(){if(this.cn)return navigator.serviceWorker.getRegistration(this.un);var e=this.an?{scope:this.an}:void 0;return navigator.serviceWorker.register(this.un,e).then(()=>navigator.serviceWorker.ready.then(e=>(e&&"function"==typeof e.update&&e.update().catch(e=>{er.info("ServiceWorker update failed: "+e)}),e)))}Nn(e){this.cn||(e.unregister(),er.info("Service worker successfully unregistered."))}subscribe(t,i){if(!ed.isPushSupported())return er.info(e.Un),void("function"==typeof i&&i(!1));if(this.dn){if(!this.cn&&null!=window.location){var a=this.un;-1===a.indexOf(window.location.host)&&(a=window.location.host+a),-1===a.indexOf(window.location.protocol)&&(a=window.location.protocol+"//"+a)}if(ed.isPushBlocked())return void this.An("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",i);if(this.h&&!this.h.Wn()&&0===this.h.Ft())return er.info("Waiting for VAPID key from server config before subscribing to push."),void this.h._n(()=>{this.subscribe(t,i)});var s=ed.isPushPermissionGranted();this.requestPermission(()=>{!s&&this.en&&this.en.setPushNotificationSubscriptionType(c.NotificationSubscriptionTypes.OPTED_IN),this.xn().then(e=>{if(null==e)return er.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof i&&i(!0));e.pushManager.getSubscription().then(a=>{var s=null;if(null!=(null===(r=this.h)||void 0===r?void 0:r.Wn())&&(s=en.Tn(this.h.Wn())),a){var r,n,o,l=null,u=null;if(this.j&&(o=this.j.lt(tf.ct.In)),o&&!e$(o)){try{n=K.qn(o).Vn}catch(e){n=null}null==n||isNaN(n.getTime())||0===n.getTime()||(u=new Date(l=n)).setMonth(l.getMonth()+6)}null!=s&&a.options&&a.options.applicationServerKey&&a.options.applicationServerKey.byteLength&&a.options.applicationServerKey.byteLength>0&&!eX(s,new Uint8Array(a.options.applicationServerKey))?(a.options.applicationServerKey.byteLength>12?er.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):er.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.gn(a,e,s,t,i)):a.expirationTime&&new Date(a.expirationTime).valueOf()<=new Date().valueOf()?(er.info("Push subscription is expired, creating new subscription."),this.gn(a,e,s,t,i)):o&&e$(o)?this.gn(a,e,s,t,i):null==u?(er.info("No push subscription creation date found, creating new subscription."),this.gn(a,e,s,t,i)):u.valueOf()<=new Date().valueOf()?(er.info("Push subscription older than 6 months, creating new subscription."),this.gn(a,e,s,t,i)):(er.info("Device already subscribed to push, sending existing subscription to backend."),this.wn(a,l,t))}else this.vn(e,s,t,i)}).catch(e=>{er.error("Error checking current push subscriptions: "+e)})}).catch(e=>{er.error("ServiceWorker registration failed: "+e)})},()=>{var e="Permission for push notifications was ignored.";ed.isPushBlocked()&&(e+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),er.info(e),"function"==typeof i&&i(!0)},()=>{er.info("Permission for push notifications was denied."),"function"==typeof i&&i(!1)})}else if(this.bn){if(null==this.hn||""===this.hn)return er.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof i&&i(!0));var r=window.safari.pushNotification.permission(this.hn);this.jn(this.hn,r,t,i)}}unsubscribe(t,i){if(!ed.isPushSupported())return er.info(e.Un),void("function"==typeof i&&i());this.dn?navigator.serviceWorker.getRegistration(this.un).then(e=>{e?e.pushManager.getSubscription().then(a=>{a?(this.Dn(),a.unsubscribe().then(a=>{a?(er.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(er.error("Failed to unsubscribe device from push."),"function"==typeof i&&i()),this.Nn(e)}).catch(e=>{er.error("Push unsubscription error: "+e),"function"==typeof i&&i()})):(er.info("Device already unsubscribed from push."),"function"==typeof t&&t())}).catch(e=>{er.error("Error unsubscribing from push: "+e),"function"==typeof i&&i()}):(er.info("Device already unsubscribed from push."),"function"==typeof t&&t())}):this.bn&&(this.Dn(),er.info("Device unsubscribed from push."),"function"==typeof t&&t())}}).Un="Push notifications are not supported in this browser.",e_=Object.freeze({__proto__:null,default:eT=i7}),eI=Object.freeze({__proto__:null,requestPushPermission:i6}),eO=Object.freeze({__proto__:null,unregisterPush:i9}),ee=class{constructor(e){this.properties=e,this.properties=e||{}}To(e,t,i){var a=this.properties[e];return null==a?(this.No(e),null):t(a)?a.value:(this.Oo(i),null)}getStringProperty(e){return this.To(e,this.Fo,"string")}getNumberProperty(e){return this.To(e,this.Go,"number")}getBooleanProperty(e){return this.To(e,this.Ho,"boolean")}getImageProperty(e){return this.To(e,this.Ko,"image")}getJsonProperty(e){return this.To(e,this.Lo,"jsonobject")}getTimestampProperty(e){return this.To(e,this.Qo,"datetime")}Oo(e){er.info(`Property is not of type ${e}.`)}No(e){er.info(`${e} not found in properties.`)}Fo(e){return"string"===e.type&&"string"==typeof e.value}Go(e){return"number"===e.type&&"number"==typeof e.value}Ho(e){return"boolean"===e.type&&"boolean"==typeof e.value}Ko(e){return"image"===e.type&&"string"==typeof e.value}Lo(e){return"jsonobject"===e.type&&"object"==typeof e.value&&e.value.constructor==Object}Qo(e){return"datetime"===e.type&&"number"==typeof e.value}},e("FeatureFlag",et=class e extends ee{constructor(e,t=!1,i={},a){super(i),this.id=e,this.enabled=t,this.trackingString=a,this.id=e,this.enabled=t,this.trackingString=a}dt(){var t={};return t[e.ss.rs]=this.id,t[e.ss.Fe]=this.enabled,t[e.ss.we]=this.properties,t[e.ss.xe]=this.trackingString,t}}),et.ss={rs:"id",Fe:"e",we:"pr",xe:"fts"},et.ui={rs:"id",Fe:"enabled",we:"properties",xe:"fts"},ei=class extends v{constructor(e,t,i,s){super(),this.h=e,this.B=t,this.j=i,this.C=s,this.he=[],this.je=0,this.h=e,this.B=t,this.j=i,this.C=s,this.ye=null,this.Ce=new a,this.S=10,this.T=null,this.I=null,ew.q(this.Ce)}N(e){var t;if((null===(t=this.h)||void 0===t?void 0:t.Re())&&null!=e&&e.feature_flags){for(var i of(this.he=[],e.feature_flags)){var a=function(e){if(e[et.ui.rs]&&"boolean"==typeof e[et.ui.Fe])return new et(e[et.ui.rs],e[et.ui.Fe],e[et.ui.we],e[et.ui.xe]);er.info(`Unable to create feature flag from ${JSON.stringify(e,null,2)}`)}(i);a&&this.he.push(a)}this.je=new Date().getTime(),this.Te(),this.Ce.L(this.he)}}De(){var e={};this.j&&(e=this.j.lt(tf.ct.Ie));var t={};for(var i in e){var a=function(e){if(e[et.ss.rs]&&"boolean"==typeof e[et.ss.Fe])return new et(e[et.ss.rs],e[et.ss.Fe],e[et.ss.we],e[et.ss.xe]);er.info(`Unable to deserialize feature flag from ${JSON.stringify(e,null,2)}`)}(e[i]);a&&(t[a.id]=a)}return t}Se(){var e;return(null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.qe))||{}}Ne(e){this.j&&this.j.ft(tf.ct.qe,e)}St(e){return this.Ce.wt(e)}refreshFeatureFlags(e,t,i=!1,a=!0){var s=()=>{"function"==typeof t&&t(),this.Ce.L(this.he)};if(!this.ze(i))return!this.ye&&this.h&&(this.ye=this.h.Ue(()=>{this.refreshFeatureFlags(e,t)})),void s();var r=this.B;if(!r)return void s();a&&this.X();var n=r.$({},!0),o=r.A(n,eh.H.$e),l=!1;r.J(n,(a=-1)=>{var r=this.B;if(!r)return void s();var u=new Date().valueOf();eh.K(this.j,eh.H.$e,u),-1!==a&&o.push(["X-Braze-Req-Tokens-Remaining",a.toString()]),ec.O({url:`${r.V()}/feature_flags/sync`,headers:o,data:n,W:t=>{if(!r.Y(n,t,o))return l=!0,void s();r.Z(),this.N(t),l=!1,"function"==typeof e&&e()},error:e=>{r._(e,"retrieving feature flags"),l=!0,s()},tt:(a,s)=>{var n;if(l){var o=this.T;(null==o||o<1e3*this.S)&&(o=1e3*this.S),n=Math.min(3e5,tS(1e3*this.S,3*o))}r.st(s,()=>{this.refreshFeatureFlags(e,t,i,!0)},eh.H.$e,e=>this.it(e),()=>this.X(),n)}})},eh.H.$e,t)}X(){null!=this.I&&(clearTimeout(this.I),this.I=null)}it(e){this.X(),this.I=e}ze(e){if(!this.h)return!1;if(!e){var t=this.h.ke();if(null==t)return!1;var i=!1;if(!isNaN(t)){if(-1===t)return er.info("Feature flag refreshes not allowed"),!1;i=new Date().getTime()>=(this.je||0)+1e3*t}if(!i)return er.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.h.Re()}Be(){var e;return(null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.Me))||null}Xe(){var e,t;null===(e=this.j)||void 0===e||e.ft(tf.ct.Me,null===(t=this.C)||void 0===t?void 0:t.bt())}_e(){var e,t=null===(e=this.C)||void 0===e?void 0:e.bt(),i=this.Be();return null==i||t===i}Te(){if(this.j){var e={};for(var t of this.he){var i=t.dt();e[t.id]=i}this.j.ft(tf.ct.Ie,e),this.j.ft(tf.ct.Ae,this.je),this.Xe()}}changeUser(){this.X()}clearData(){this.X()}},eD=ae,ej=Object.freeze({__proto__:null,default:at,refreshFeatureFlags:ai}),e("Banner",ea=class extends ee{constructor(e,t,i,a=!1,s=!1,r=-1,n={}){super(n),this.id=e,this.placementId=t,this.html=i,this.xt=a,this.isControl=s,this.zt=r,this.id=e,this.placementId=t,this.html=i,this.xt=a,this.isControl=s,this.zt=r,this.kt=!1}At(){return this.isControl}dt(){return{id:this.id,pid:this.placementId,html:this.html,its:this.xt,ic:this.isControl,eat:this.zt,pr:this.properties}}}),es=class extends v{constructor(e,t,i,s){super(),this.h=e,this.B=t,this.j=i,this.C=s,this.banners={},this.h=e,this.B=t,this.j=i,this.C=s,this.S=10,this.T=null,this.I=null,this.R=new a,ew.q(this.R),this.D=null,this.F=null}N(e){if(this.k()&&null!=e&&e.banners){this.banners={};var t=e.banners;for(var i in t){var a,s=t[i],r=null;null!=s&&null!=s.banner&&(a=s.banner,r=new ea(a.id,a.placement_id,a.html,a.is_test_send,a.is_control,a.expires_at,a.properties)),r&&(this.banners[i]=r)}this.U(),this.R.L(this.banners)}}M(e,t,i,a=!0){var s,r=()=>{"function"==typeof i&&i()};if(!this.k())return void(null===(s=this.h)||void 0===s||s.P(()=>{this.M(e,t,i)}));var n=this.B;if(!n)return void r();a&&this.X();var o=n.$({},!0),l=[];for(var u of e)l.push({id:u});o.placements=l;var h=n.A(o,eh.H.G),c=!1;n.J(o,(a=-1)=>{var s=this.B;if(!s)return void r();var n=new Date().valueOf();eh.K(this.j,eh.H.G,n),-1!==a&&h.push(["X-Braze-Req-Tokens-Remaining",a.toString()]),ec.O({url:`${s.V()}/banners/sync`,headers:h,data:o,W:e=>{if(!s.Y(o,e,h))return c=!0,void r();s.Z(),this.N(e),c=!1,"function"==typeof t&&t()},error:e=>{s._(e,"retrieving banners"),c=!0,r()},tt:(a,r)=>{var n;if(this.F=e,c){var o=this.T;(null==o||o<1e3*this.S)&&(o=1e3*this.S),n=Math.min(3e5,tS(1e3*this.S,3*o))}s.st(r,()=>{this.M(e,t,i,!1)},eh.H.G,e=>this.it(e),()=>this.X(),n)}})},eh.H.G,i)}et(){return this.F}nt(e,t){var i={id:e.id};return t&&(i.bid=t),ex.rt(eR.ot,i).W}X(){null!=this.I&&(clearTimeout(this.I),this.I=null)}it(e){this.X(),this.I=e}ht(){var e={};this.j&&(e=this.j.lt(tf.ct.ut));var t={};for(var i in e){var a,s=null;null!=e[i]&&(a=e[i],s=new ea(a.id,a.pid,a.html,a.its,a.ic,a.eat,a.pr)),s&&(t[s.placementId]=s)}return t}U(){if(this.j){var e,t={};for(var i in this.banners){var a=(null===(e=this.banners[i])||void 0===e?void 0:e.dt())||null;t[i]=a}this.j.ft(tf.ct.ut,t),this.vt()}}vt(){var e,t;null===(e=this.j)||void 0===e||e.ft(tf.ct.gt,null===(t=this.C)||void 0===t?void 0:t.bt())}Bt(){var e;return(null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.gt))||null}jt(){return this.D}yt(e){this.D=e}Ct(){var e,t=null===(e=this.C)||void 0===e?void 0:e.bt(),i=this.Bt();return null==i||t===i}St(e){return this.R.wt(e)}Tt(){var e;return(null===(e=this.j)||void 0===e?void 0:e.lt(tf.ct.It))||{}}Rt(e){this.j&&this.j.ft(tf.ct.It,e)}changeUser(){this.qt(),this.X()}clearData(){this.X()}k(){return!!this.h&&(!!this.h.Dt()||(0!==this.h.Ft()&&this.qt(),!1))}qt(){this.banners={},this.j&&(this.j.Nt(tf.ct.ut),this.j.Nt(tf.ct.It)),this.R.L({})}},eM=ao,e({Banner:ea,BrazeSdkMetadata:iL,CaptionedImage:n,Card:s,ClassicCard:o,ContentCards:Z,ControlCard:l,ControlMessage:N,DeviceProperties:tv,FeatureFlag:et,FullScreenMessage:O,HtmlMessage:_,ImageOnly:r,InAppMessage:T,InAppMessageButton:I,ModalMessage:D,SlideUpMessage:j,User:c,WindowUtils:eg,addSdkMetadata:iU,automaticallyShowInAppMessages:is,changeUser:iB,deferInAppMessage:ir,destroy:iF,disableSDK:i$,enableSDK:iG,getAllBanners:ap,getAllFeatureFlags:as,getBanner:au,getCachedContentCards:iy,getDeferredInAppMessage:io,getDeviceId:iq,getFeatureFlag:aa,getUser:tZ,handleBrazeAction:t0,hideContentCards:iM,initialize:iH,insertBanner:ag,isDisabled:iX,isInitialized:iW,isPushBlocked:i2,isPushPermissionGranted:i4,isPushSupported:i8,logCardDismissal:ip,logContentCardClick:ig,logContentCardImpressions:ib,logCustomEvent:iK,logFeatureFlagImpression:an,logInAppMessageButtonClick:t6,logInAppMessageClick:tX,logInAppMessageHtmlClick:t5,logInAppMessageImpression:tH,logPurchase:iJ,openSession:iV,refreshFeatureFlags:ai,removeAllSubscriptions:iY,removeSubscription:iS,requestBannersRefresh:am,requestContentCardsRefresh:ix,requestImmediateDataFlush:iZ,requestPushPermission:i6,setLogger:iQ,setSdkAuthenticationSignature:i0,showContentCards:iP,showInAppMessage:ii,subscribeToBannersUpdates:ab,subscribeToContentCardsUpdates:iz,subscribeToFeatureFlagsUpdates:ar,subscribeToInAppMessage:ia,subscribeToSdkAuthenticationFailures:i1,toggleContentCards:iR,toggleLogging:i3,unregisterPush:i9,wipeData:i5})},[]]},[]]);
