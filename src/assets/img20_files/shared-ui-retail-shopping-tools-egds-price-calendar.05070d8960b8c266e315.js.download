/*@license For license information please refer to shared-ui-retail-shopping-tools-egds-price-calendar.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4501],{20438:function(e,n,t){t.d(n,{D:function(){return he}});var i=t(96540),a=t(20181),l=t.n(a),r=t(56651),d=t(22913),o=t(22828),s=t(9705),c=t(69633),m=t(59671),u=t(53735),g=t(28667),v=t(72195),k=t(92416),S=t(6057),f=t(96912),h=t(92648),y=t(46414),p=t(85911),N=t(20780),D=t(1023),F=t(59836),E=t(25859),C=t(2507),T=t(26143),x=t(28155),b=t(82715),I=t(39656),G=t(1843);const M=e=>{const n={};return e.filter(e=>{if("FragmentDefinition"!==e.kind)return!0;const t=e.name.value;return!n[t]&&(n[t]=!0,!0)})};var L=e=>{const n=e?"ROUND_TRIP":"ONE_WAY",t=e?"RT":"OW";return{onChangeEndDate:{referrerId:`${n}_FC_onChangeEndDateCB`,linkName:"Returning date Change"},onChangeMonth:{referrerId:`${n}_FC_onChangeMonthCB`,linkName:"Month changed"},onChangeStartDate:{referrerId:`${n}_FC_onChangeStartDateCB`,linkName:"Departing date Change"},onOpen:{referrerId:`${n}_FC_onOpenCB`,linkName:"Open Date Picker"},onSubmit:{referrerId:`${n}_FC_onSubmitCB`,linkName:"Save Dates"},onDoneButton:{referrerId:"FLT.FareCalendar.Done",linkName:"Done Button Clicked"},onDismiss:{referrerId:`${n}_FC_onDismissCB`,linkName:"Close Date Picker"},onChangeFlexStartDate:(e,n)=>{const i=Q($(e),$(n));return{referrerId:`FLT.${t}.FareCalendar.DateChange.OB.${i}`,linkName:"Outbound Date Change"}},onChangeFlexEndDate:(e,n)=>{const i=Q($(e),$(n));return{referrerId:`FLT.${t}.FareCalendar.DateChange.IB.${i}`,linkName:"Inbound Date Change"}}}},A={PRICE_CALENDAR_QUERY_ERROR:new m.SystemEvent(m.SystemEventLevel.ERROR,"PRICE_CALENDAR_QUERY_ERROR")},P=new Date,V=864e5,R=new Date(Date.now()+28512e6),_=(e,n)=>{var t,i;return"flights"===e?null==(t=null==n?void 0:n.flightsPriceCalendar)?void 0:t.disclaimerMoreInfo:null==(i=null==n?void 0:n.flightsPriceCalendar)?void 0:i.disclaimerMoreInfo},w=(e,n)=>{var t,i;return"flights"===e?null==(t=null==n?void 0:n.flightsPriceCalendar)?void 0:t.disclaimerText:null==(i=null==n?void 0:n.flightsPriceCalendar)?void 0:i.disclaimerText},O=(e,n)=>{var t;if("flights"===e)return null==(t=null==n?void 0:n.flightsPriceCalendar)?void 0:t.calendarPrices},z=(e,n)=>{const t={defaults:{dateText:{textWeight:"bold",textTheme:null,textValue:null,amountValue:null},analytics:{referrerId:"",linkName:""}}},i=O(e,n);return i&&i.forEach(e=>{var n,i;t[`${e.date}`]={dateText:{textWeight:e.theme?"bold":null,textTheme:null!=(i=null==(n=e.theme)?void 0:n.toLowerCase())?i:null,textValue:e.label,amountValue:e.amount},analytics:{referrerId:null==e?void 0:e.selectAnalytics.referrerId,linkName:null==e?void 0:e.selectAnalytics.linkName}}}),t},$=e=>e?new Date(`${e}T00:00:00`):new Date,U=e=>{const n=e.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/");return`${n[2]}-${n[0]}-${n[1]}`},B=(e,n)=>{const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.setDate(t.getDate()+n),t},Q=(e,n)=>{const t=Math.floor((n.getTime()-e.getTime())/V);return t>0?`+${t}`:`${t}`},q=e=>e.locale?e.locale.replace("_","-"):"en-US",j={P1:1,P2:2,P3:3},Y=({className:e,data:n})=>{const{text:t,style:a}=n;return i.createElement(N.u,{className:e,size:j[a]},t)};Y.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSParagraphFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSParagraph"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"style"},arguments:[],directives:[]}]}}],loc:{start:0,end:76,source:{body:"\n  fragment EGDSParagraphFragment on EGDSParagraph {\n    text\n    style\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Y.displayName="CalendarEGDSParagraph";var X={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ClientSideAnalyticsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ClientSideAnalytics"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}}],loc:{start:0,end:97,source:{body:"\n  fragment ClientSideAnalyticsFragment on ClientSideAnalytics {\n    linkName\n    referrerId\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},H=({id:e,sheetType:n,isVisible:t,content:a,onClose:l,useCloseButton:r=!0,footer:d,isNestedDialog:o=!1})=>{const s=r,c=o?"pwaDialogNested":void 0,[m,u,g]=(0,I.useDialog)(e,c,!0,l),v={type:n,isVisible:t,triggerRef:null,returnFocusOnClose:!0};return"centered"===n&&(v.centeredSheetSize="small"),i.useEffect(()=>{t&&!m?u.openDialog():!t&&m&&u.closeDialog()},[t]),m?i.createElement("div",{"data-test-id":"egds-sheet-wrapper-price-calendar"},i.createElement(C.K,{isVisible:m},i.createElement(g,null,i.createElement(T.t,{...v},i.createElement(x.Y,{padded:!0},a,d),s&&i.createElement(b.t,null,i.createElement(F.q,{onClick:l,type:"button","data-stid":"egds-sheet-close-button"},i.createElement(E.LD,{name:"close",size:E.So.MEDIUM,title:"Close Sheet",id:"sheet-close-button"}))))))):null};H.displayName="EGDSSheetWrapper";var W={EXTRA_SMALL:E.So.EXTRA_SMALL,SMALL:E.So.SMALL,MEDIUM:E.So.MEDIUM,MEDIUM_LARGE:E.So.MEDIUM,LARGE:E.So.LARGE,XLARGE:E.So.XLARGE},K=e=>{const{data:n}=e,{id:t,title:a,description:l,size:r}=n,d=W[null!=r?r:"LARGE"];return i.createElement(E.LD,{id:t,name:t,title:null!=a?a:l,description:l,size:d})};K.displayName="Icon",K.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"IconFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]}]}}],loc:{start:0,end:91,source:{body:"\n  fragment IconFragment on Icon {\n    id\n    title\n    token\n    description\n    size\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var J={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSSheetTypePerViewSizeFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSSheetTypePerViewSize"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sheetType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewSize"},arguments:[],directives:[]}]}}],loc:{start:0,end:106,source:{body:"\n  fragment EGDSSheetTypePerViewSizeFragment on EGDSSheetTypePerViewSize {\n    sheetType\n    viewSize\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Z={kind:"Document",definitions:M([{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSSheetFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSSheet"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"closeAccessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"closeAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClientSideAnalyticsFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closeText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sheetTypes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSSheetTypePerViewSizeFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"IconFragment"},directives:[]}]}}]}}].concat(J.definitions,X.definitions,K.fragment.definitions)),loc:{start:0,end:264,source:{body:"\n  fragment EGDSSheetFragment on EGDSSheet {\n    closeAccessibility\n    closeAnalytics {\n      ...ClientSideAnalyticsFragment\n    }\n    closeText\n    sheetTypes {\n      ...EGDSSheetTypePerViewSizeFragment\n    }\n    icon {\n      ...IconFragment\n    }\n  }\n\n  \n  \n  \n".concat([J.loc.source.body,X.loc.source.body,K.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ee=({id:e,data:n,isVisible:t,content:a,useCloseButton:l,onClose:r,footer:d,showFooterOnSmall:o})=>{const{sheetTypes:s}=n,c=i.useMemo(()=>null==s?void 0:s.reduce((e,n)=>{const{viewSize:t,sheetType:i}=n,a=null==i?void 0:i.toLowerCase(),l=null!=t?t:"";return{...e,[l]:a||"side"}},{}),[s]),m=i.useCallback(n=>{const s=o||"SMALL"!==n;return i.createElement(H,{id:e,sheetType:null==c?void 0:c[n],isVisible:t,content:a,useCloseButton:l||"SMALL"===n,viewSize:n,onClose:r,footer:s?d:void 0,isNestedDialog:"SMALL"===n||"MEDIUM"===n})},[o,e,c,t,a,l,r,d]);return i.createElement(k.LM,null,i.createElement(k.zQ,null,m("LARGE")),i.createElement(k.rw,null,m("MEDIUM")),i.createElement(k.NP,null,m("SMALL")))};ee.displayName="EGDSSheet",ee.fragment=Z;var ne={EMPHASIS:"emphasis",LOYALTY:"loyalty",INVERSE:"inverse",NEGATIVE:"negative",POSITIVE:"positive",PRIMARY:"emphasis",SECONDARY:"default"},te={BOLD:"bold",MEDIUM:"medium",REGULAR:"regular"},ie=({data:{text:e,weight:n,theme:t},size:a,inline:l,align:r})=>{const d=t?ne[t]:void 0,o=n?te[n]:void 0;return i.createElement(p.D,{weight:o,size:a,inline:l,theme:d,align:r},e)};ie.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSStylizedTextFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSStylizedText"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]}]}}],loc:{start:0,end:102,source:{body:"\n  fragment EGDSStylizedTextFragment on EGDSStylizedText {\n    size\n    text\n    theme\n    weight\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ie.displayName="EGDSStylizedText";var ae=({data:e,disclaimerMoreInfo:n,isDefaultAlertMessage:t})=>{var a,l,r;const[d,o]=i.useState(!1),s=null==n?void 0:n.icon,c=null==n?void 0:n.triggerAction,m=i.useCallback(()=>{o(!0)},[o]),N=i.useCallback(()=>{o(!1)},[o]),D=null==(l=null==(a=null==n?void 0:n.triggerAction)?void 0:a.messages)?void 0:l.map((e,n)=>"EGDSParagraph"===e.__typename&&i.createElement(Y,{data:e,key:n}));let F=!1;const E=e.map((a,l)=>"string"==typeof a?i.createElement(g.C,{alignSelf:"center",key:`disclaimer-${l}`},i.createElement(p.D,{align:"center",size:100,weight:"regular"},l===e.length-1&&n?i.createElement(k.LM,null,i.createElement(k.NP,null,i.createElement(y.t,{align:"center",size:"small",onClick:m},i.createElement(S.u,{size:h.EGDSButtonSize.SMALL,type:"button"},t?i.createElement("div",null,a,s&&i.createElement(K,{data:s})):i.createElement(u.X,{direction:"row",alignContent:"end",justifyContent:"center"},i.createElement("div",null,a,s&&i.createElement(K,{data:s})))))),i.createElement(k.zQ,null,i.createElement(y.t,{align:"center",size:"small",onClick:m},i.createElement(S.u,{size:h.EGDSButtonSize.SMALL,type:"button"},a,s&&i.createElement(K,{data:s}))))):a)):"EGDSStylizedText"===(null==a?void 0:a.__typename)?(F=!0,i.createElement(g.C,{alignSelf:"center",key:`alert-disclaimer-${l}`},i.createElement(ie,{data:a,size:200,align:"center"}))):null),C=i.createElement(v.N,{margin:{blockstart:"sixteen"}},i.createElement(f.y,{onClick:N},null==(r=null==c?void 0:c.sheet)?void 0:r.closeText));return i.createElement(u.X,{direction:"row",alignContent:"end",justifyContent:"end"},i.createElement(u.X,{direction:"column",alignContent:"center",justifyContent:"center"},E),(null==c?void 0:c.sheet)&&i.createElement(ee,{id:"price-calendar-full-legal-disclaimer-sheet",content:D,isVisible:d,data:c.sheet,onClose:N,useCloseButton:!1,footer:C,showFooterOnSmall:!1}))},le={padding:{blockend:"three"}},re={padding:{blockend:"four"}},de=({data:e,disclaimerMoreInfo:n,isDefaultAlertMessage:t})=>{if(!e||!e.length)return null;const a=i.createElement("div",null,i.createElement(ae,{data:e,disclaimerMoreInfo:n,isDefaultAlertMessage:t}));return i.createElement(u.X,{justifyContent:"center"},i.createElement(g.C,null,i.createElement(k.LM,null,i.createElement(k.NP,null,i.createElement(v.N,{padding:le.padding},a)),i.createElement(k.zQ,null,i.createElement(v.N,{padding:re.padding},a)))))},oe=({data:e,className:n})=>i.createElement(G.D,{className:n,description:e.description,id:e.id,name:e.id});oe.displayName="Mark",oe.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MarkFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Mark"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}],loc:{start:0,end:62,source:{body:"\n  fragment MarkFragment on Mark {\n    description\n    id\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var se={kind:"Document",definitions:M([{kind:"FragmentDefinition",name:{kind:"Name",value:"UIGraphicFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UIGraphic"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"IconFragment"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Mark"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MarkFragment"},directives:[]}]}}]}}].concat(K.fragment.definitions,oe.fragment.definitions)),loc:{start:0,end:148,source:{body:"\n  fragment UIGraphicFragment on UIGraphic {\n    ... on Icon {\n      ...IconFragment\n    }\n\n    ... on Mark {\n      ...MarkFragment\n    }\n  }\n  \n  \n".concat([K.fragment.loc.source.body,oe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ce=({data:e,markOptions:n})=>{switch(e.__typename){case"Icon":return i.createElement(K,{data:e});case"Mark":return i.createElement(oe,{data:e,...n});default:return null}};ce.displayName="UIGraphic";var me={kind:"Document",definitions:M([{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSGraphicTextFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSGraphicText"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UIGraphicFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trailingGraphics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UIGraphicFragment"},directives:[]}]}}]}}].concat((ce.fragment=se).definitions)),loc:{start:0,end:194,source:{body:"\n  fragment EGDSGraphicTextFragment on EGDSGraphicText {\n    accessibility\n    text\n    graphic {\n      ...UIGraphicFragment\n    }\n    trailingGraphics {\n      ...UIGraphicFragment\n    }\n  }\n  \n".concat([ce.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ue=({inline:e,size:n,graphicSpacing:t,data:a})=>{const{accessibility:l,text:r,graphic:d,trailingGraphics:o}=a,s=l&&l.length>0,c=s?i.createElement(i.Fragment,null,i.createElement("span",{"aria-hidden":s},r),i.createElement("span",{className:"is-visually-hidden"},l)):r;return i.createElement(p.D,{inline:e},i.createElement(v.N,{padding:null==t?void 0:t.padding,margin:null==t?void 0:t.margin},i.createElement(ce,{data:d})),i.createElement(v.N,{padding:{inline:"one"}},i.createElement(p.D,{inline:!0,size:n},c)),null==o?void 0:o.map((e,n)=>i.createElement(ce,{data:e,key:`trailing-graphic-${n}`})))};ue.displayName="EGDSGraphicText",ue.fragment=me;var ge={kind:"Document",definitions:M([{kind:"FragmentDefinition",name:{kind:"Name",value:"EGDSMoreInfoTriggerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSMoreInfoTrigger"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"IconFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerAction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClientSideAnalyticsFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sheet"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSSheetFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSParagraphFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClientSideAnalyticsFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]}]}}].concat(Y.fragment.definitions,ee.fragment.definitions,K.fragment.definitions,X.definitions)),loc:{start:0,end:438,source:{body:"\n  fragment EGDSMoreInfoTriggerFragment on EGDSMoreInfoTrigger {\n    icon {\n      ...IconFragment\n    }\n    text\n    triggerAction {\n      accessibility\n      analytics {\n        ...ClientSideAnalyticsFragment\n      }\n      sheet {\n        ...EGDSSheetFragment\n      }\n      text\n      messages {\n        ...EGDSParagraphFragment\n      }\n    }\n    analytics {\n      ...ClientSideAnalyticsFragment\n    }\n    accessibility\n  }\n\n  \n  \n  \n  \n".concat([Y.fragment.loc.source.body,ee.fragment.loc.source.body,K.fragment.loc.source.body,X.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ve={kind:"Document",definitions:M([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FlightsPriceCalendar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"flightsSearchContext"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FlightsSearchContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"journeyCriteria"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FlightsJourneyCriteriaInput"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"queryState"}},type:{kind:"NamedType",name:{kind:"Name",value:"FlightsQueryState"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchFilterValuesList"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FlightsSearchFilterValuesInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchPreferences"}},type:{kind:"NamedType",name:{kind:"Name",value:"FlightsSearchPreferencesInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"flightsPriceCalendar"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"flightsSearchContext"},value:{kind:"Variable",name:{kind:"Name",value:"flightsSearchContext"}}},{kind:"Argument",name:{kind:"Name",value:"journeyCriteria"},value:{kind:"Variable",name:{kind:"Name",value:"journeyCriteria"}}},{kind:"Argument",name:{kind:"Name",value:"queryState"},value:{kind:"Variable",name:{kind:"Name",value:"queryState"}}},{kind:"Argument",name:{kind:"Name",value:"searchFilterValuesList"},value:{kind:"Variable",name:{kind:"Name",value:"searchFilterValuesList"}}},{kind:"Argument",name:{kind:"Name",value:"searchPreferences"},value:{kind:"Variable",name:{kind:"Name",value:"searchPreferences"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"alertText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSGraphicTextFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disclaimerText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"disclaimerMoreInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSMoreInfoTriggerFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"coverageAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"calendarPrices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"selectAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClientSideAnalyticsFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"amount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"alertText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSStylizedTextFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disclaimerText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalDisclaimerText"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disablePrice"},arguments:[],directives:[]}]}}]}}].concat(ie.fragment.definitions,ue.fragment.definitions,X.definitions,ge.definitions)),loc:{start:0,end:1172,source:{body:"\n  query FlightsPriceCalendar(\n    $context: ContextInput!\n    $flightsSearchContext: FlightsSearchContextInput!\n    $journeyCriteria: [FlightsJourneyCriteriaInput!]!\n    $queryState: FlightsQueryState\n    $searchFilterValuesList: [FlightsSearchFilterValuesInput!]\n    $searchPreferences: FlightsSearchPreferencesInput\n  ) {\n    flightsPriceCalendar(\n      context: $context\n      flightsSearchContext: $flightsSearchContext\n      journeyCriteria: $journeyCriteria\n      queryState: $queryState\n      searchFilterValuesList: $searchFilterValuesList\n      searchPreferences: $searchPreferences\n    ) {\n      alertText {\n        ...EGDSGraphicTextFragment\n      }\n      disclaimerText\n      disclaimerMoreInfo {\n        ...EGDSMoreInfoTriggerFragment\n      }\n      coverageAnalytics {\n        linkName\n        referrerId\n      }\n      calendarPrices {\n        date\n        label\n        selectAnalytics {\n          ...ClientSideAnalyticsFragment\n        }\n        amount\n        theme\n        weight\n        alertText {\n          ...EGDSStylizedTextFragment\n        }\n        disclaimerText\n        additionalDisclaimerText\n      }\n      disablePrice\n    }\n  }\n\n  \n  \n  \n  \n".concat([ie.fragment.loc.source.body,ue.fragment.loc.source.body,X.loc.source.body,ge.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ke=e=>{const{context:n}=(0,d.R)();return(0,D._l)(ve,{ssr:!1,fetchPolicy:"cache-first",variables:{context:n,...e}})},Se=(e,n)=>{const t=(()=>{const e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())})(),i=e<t?t:e;let a;return n&&(a=B(i,14)),{effectiveStartDate:i,effectiveEndDate:a}},fe=(e,n)=>{const[t,a]=i.useState(void 0),[l,r]=i.useState(void 0),[d,o]=i.useState(void 0),[s,c]=i.useState(!1),[u,g]=i.useState(!0),[v,k]=i.useState(!1),S=(e=>{if("flights"===e)return ke})(e),[f,{data:h,error:y}]=S(n),p=((e,n)=>{if("flights"===e)return(e=>{const{journeyCriteria:n,flightsSearchContext:t}=e;return{flightsSearchContext:t,origin:n[0].origin,destination:n[0].destination}})(n)})(e,n),N=(0,m.useLoggerEvents)(A),D=i.useRef(0);i.useEffect(()=>{var n;if(h){const i=((e,n)=>{const{disablePrice:t}=e.flightsPriceCalendar||{};return n&&t})(h,u)||v;if(!i){const i=s?{...z(e,h),...t}:z(e,h),l=((e,n)=>{const t={defaults:{alertText:null,disclaimerText:w(e,n),additionalDisclaimerText:null,disclaimerMoreInfo:_(e,n)}},i=O(e,n);return i&&i.forEach(e=>{t[`${e.date}`]={alertText:null==e?void 0:e.alertText,disclaimerText:null==e?void 0:e.disclaimerText,additionalDisclaimerText:null==e?void 0:e.additionalDisclaimerText,disclaimerMoreInfo:null}}),t})(e,h);a(i),r(l),o(null==(n=h.flightsPriceCalendar)?void 0:n.coverageAnalytics)}u&&(g(!u),k(i))}y&&N.PRICE_CALENDAR_QUERY_ERROR.log({error:y,message:"Price Calendar Query Error"})},[h,e,y,D.current]);return[(t,i=!1,a=!1)=>{if(c(a),v)return;if(!((e,n)=>{if("flights"===e){const{journeyCriteria:e}=n;return!!((null==e?void 0:e.length)&&e[0].origin&&e[0].destination)}})(e,n))return;const{effectiveStartDate:l,effectiveEndDate:r}=Se(t,i),d=(e=>{const{lobName:n,effectiveStartDate:t,effectiveEndDate:i,flightsSearchContext:a,origin:l,destination:r}=e;if("flights"===n){const e=((e,n,t,i)=>{let a=[{departureDate:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},destination:t,origin:n}];return i&&(a=[{departureDate:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},destination:t,origin:n},{departureDate:{day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear()},destination:n,origin:t}]),a})(t,l,r,i);return{journeyCriteria:e,flightsSearchContext:a}}})({lobName:e,effectiveStartDate:l,effectiveEndDate:r,...p});f({variables:d}),D.current+=1},t,e=>{((e,n)=>{e.forEach(e=>{n[e]&&n[e]()})})(e,{dayData:()=>a(void 0),isPriceDisabled:()=>k(!1),isFirstQuery:()=>g(!0)})},l,d]},he=({lobName:e,queryInputs:n,priceCalendarPassthroughProps:t})=>{var a;const{submitButtonLabel:m,initialStartDate:u,initialEndDate:g,dateLabel:v,dialogId:k,onOpen:S,onClose:f,onDateChange:h,onDoneButtonClick:y,enableOffset:p,isEnhancedDateSelectorUI:N,dateFormatOptions:D={month:"short",day:"numeric"},dayNameLength:F="narrow"}=t,[E,C,T,x,b]=fe(e,n),[I,G]=i.useState(u),[M,A]=i.useState(g),[V,_]=i.useState(!1),[w,O]=i.useState(!1),[z,Q]=i.useState([null==(a=null==x?void 0:x.defaults)?void 0:a.disclaimerText]),j=new Date,Y=(0,o.KY)(),X=((e,n)=>{if("flights"===e)return"ROUND_TRIP"===n.flightsSearchContext.tripType})(e,n),{context:H}=(0,d.R)(),W=i.useRef(null),K=((e,n)=>L(n))(0,X),[J,Z]=i.useState(!1),[ee,ne]=i.useState(!1),te=e=>{e&&Y(e.referrerId,e.linkName)};i.useEffect(()=>{G(u),A(g)},[u,g]),i.useEffect(()=>{var e,n,t,i,a,l,r,d;ne(!1),X&&J&&I&&(null==(e=null==x?void 0:x[I])?void 0:e.additionalDisclaimerText)?Q([x[I].additionalDisclaimerText]):X&&!J&&w&&M&&(null==(n=null==x?void 0:x[M])?void 0:n.alertText)&&(null==(t=null==x?void 0:x[M])?void 0:t.disclaimerText)?Q([x[M].alertText,x[M].disclaimerText]):!X&&I&&V&&(null==(i=null==x?void 0:x[I])?void 0:i.alertText)&&(null==(a=null==x?void 0:x[I])?void 0:a.disclaimerText)?Q([null==(l=null==x?void 0:x[I])?void 0:l.alertText,null==(r=null==x?void 0:x[I])?void 0:r.disclaimerText]):(null==x?void 0:x[I])||X||V?(ne(!0),Q([null==(d=null==x?void 0:x.defaults)?void 0:d.disclaimerText])):Q(z)},[I,M,X,J,x]),i.useEffect(()=>{J&&E($(I),!0,!1)},[J]);const ie=i.useMemo(()=>{var e;return{data:z,disclaimerMoreInfo:null==(e=null==x?void 0:x.defaults)?void 0:e.disclaimerMoreInfo,isDefaultAlertMessage:ee}},[z]),ae=({month:e,year:n},t)=>{const i=t&&j.getMonth()===e?j.getDate():1;J||E(new Date(n,e,i),!1,!1),te(K.onChangeMonth)};(0,s._H)(c.Jm,c.ht,{onSuccess:()=>{var e;null==(e=W.current)||e.click()}});const le=l()(e=>{(null==C?void 0:C[U(e)])||J&&X||E(e,!1,!0)},1e3),re={locale:q(H),startDate:I,endDate:X&&M?M:"",inputLabel1:v,dayNameLength:F,handleShape:"circle",dayData:C,onOpen:()=>{null==S||S();const e=$(I);var n;(n=e).getMonth()!==P.getMonth()||n.getFullYear()!==P.getFullYear()?E(new Date(e.getFullYear(),e.getMonth(),1),!1,!1):E(j,!1,!1),te(K.onOpen)},onNextClicked:({month:e,year:n})=>{ae({month:e,year:n},!1)},onPrevClicked:({month:e,year:n})=>{ae({month:e,year:n},!0)},onDateRangeChange:(e,n)=>{var t,i,a,l,r,d,o,s,c,m,u,g,v,k,S;const f=null!=(r=(null==(i=null==(t=null==C?void 0:C[e])?void 0:t.dateText)?void 0:i.amountValue)||(null==(l=null==(a=null==C?void 0:C[e])?void 0:a.dateText)?void 0:l.textValue))?r:void 0;if(n){A(n),O(n!==M);const t=null!=(m=(null==(o=null==(d=null==C?void 0:C[n])?void 0:d.dateText)?void 0:o.amountValue)||(null==(c=null==(s=null==C?void 0:C[n])?void 0:s.dateText)?void 0:c.textValue))?m:void 0;null==h||h(e,n,f,t),te(K.onChangeFlexEndDate(M||"",n)),te(K.onChangeEndDate)}else if(X){E($(e),!0,!1),G(e),_(e!==I);const n=U(B($(e),1));A(n);const t=null!=(S=(null==(g=null==(u=null==C?void 0:C[n])?void 0:u.dateText)?void 0:g.amountValue)||(null==(k=null==(v=null==C?void 0:C[n])?void 0:v.dateText)?void 0:k.textValue))?S:void 0;null==h||h(e,n,f,t),te(K.onChangeFlexStartDate(I,e)),te(K.onChangeStartDate)}else G(e),_(e!==I),A(""),null==h||h(e,"",f),te(K.onChangeFlexStartDate(I,e)),te(K.onChangeStartDate)},onClose:()=>{const e=I?$(I):new Date,n=M?$(M):void 0;null==f||f(e,n),te(K.onSubmit),te(K.onDismiss),(null==b?void 0:b.referrerId)&&(null==b?void 0:b.linkName)&&Y(b.referrerId,b.linkName);const t=M||I;t&&(null==C?void 0:C[t])&&Y(C[t].analytics.referrerId,C[t].analytics.linkName),_(!1),O(!1),T(["dayData","isPriceDisabled","isFirstQuery"])},onSubmit:(e,n)=>{const t=e?$(e):new Date,i=n?$(n):void 0;null==f||f(t,i,!1),te(K.onDoneButton),null==y||y(t,i)},dateFormatOptions:D,alertTemplateData:ie,alertTemplateComponent:de,useSingleTrigger:X,isSingleDateSelection:!X,enableSameDayDateRange:!1,numMonthsToDisplay:2,maxDate:R,submitButtonLabel:m,allowClearDates:!1,dialogId:k,onScrollHandler:le,onSelectionModeChange:e=>{Z(e)},startDateRef:W,showOffset:(null==N?void 0:N.showPopoverOffset)||p,hideFooter:null==N?void 0:N.hideFooterSection,showPlayback:null==N?void 0:N.hideDatesPlayback,autoPosition:!(null==N?void 0:N.disableAutoPosition)};return i.createElement("div",{"data-testid":"egds-price-calendar"},i.createElement(r.L,{...re}))};he.displayName="sharedui-EGDSPriceCalendar"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-retail-shopping-tools-egds-price-calendar.05070d8960b8c266e315.js.map