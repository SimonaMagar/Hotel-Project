/*@license For license information please refer to shared-ui-shopping-search-criteria-providers.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7800],{89639:function(e,t,r){r.d(t,{EY:function(){return Ae},Lv:function(){return d},m6:function(){return he}});var n=r(96540),a=(r(1023),r(3418)),l=r(15685),o=r(62547),i=r(4258),s=r(22913),u=n.createContext(null),c=n.createContext(null),d=(e=>(e[e.READ_PARAMS_FROM_URL=0]="READ_PARAMS_FROM_URL",e[e.MULTI_SELECT_CLEAR_ALL=1]="MULTI_SELECT_CLEAR_ALL",e[e.MULTI_SELECT_CLOSE=2]="MULTI_SELECT_CLOSE",e[e.SORT_AND_FILTER_UPDATE=3]="SORT_AND_FILTER_UPDATE",e[e.SORT_AND_FILTER_SUBMIT=4]="SORT_AND_FILTER_SUBMIT",e[e.SEARCH_FORM_UPDATE=5]="SEARCH_FORM_UPDATE",e[e.REMOVE_FILTER_PILL=6]="REMOVE_FILTER_PILL",e[e.REMOVE_ALL_FILTERS=7]="REMOVE_ALL_FILTERS",e[e.ONE_KEY_SWITCH_TOGGLE=8]="ONE_KEY_SWITCH_TOGGLE",e[e.MULTI_FILTER_UPDATE=9]="MULTI_FILTER_UPDATE",e))(d||{}),_=[{locale:"en_AU",format:"dd-MM-YYYY"},{locale:"en_CA",format:"dd-MM-YYYY"},{locale:"en_GB",format:"dd-MM-YYYY"},{locale:"en_IE",format:"dd-MM-YYYY"},{locale:"en_MY",format:"dd-MM-YYYY"},{locale:"en_SG",format:"dd-MM-YYYY"},{locale:"en_US",format:"MM-dd-YYYY",siteid:1},{locale:"en_US",format:"dd-MM-YYYY",siteid:12},{locale:"en_US",format:"YYYY-MM-dd",siteid:16},{locale:"en_US",format:"YYYY-MM-dd",siteid:28},{locale:"en_US",format:"YYYY-MM-dd",siteid:62},{locale:"en_US",format:"dd-MM-YYYY",siteid:69},{locale:"en_US",format:"dd-MM-YYYY",siteid:76},{locale:"en_US",format:"dd-MM-YYYY",siteid:77},{locale:"es_AR",format:"dd-MM-YYYY"},{locale:"es_ES",format:"dd-MM-YYYY"},{locale:"es_MX",format:"MM-dd-YYYY",siteid:1},{locale:"es_MX",format:"dd-MM-YYYY",siteid:12},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4403},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4404},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4405},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4407},{locale:"da_DK",format:"dd-MM-YYYY"},{locale:"de_AT",format:"dd-MM-YYYY"},{locale:"de_DE",format:"dd-MM-YYYY"},{locale:"de_CH",format:"dd-MM-YYYY"},{locale:"fi_FI",format:"dd-MM-YYYY"},{locale:"fr_CH",format:"dd-MM-YYYY"},{locale:"fr_BE",format:"dd-MM-YYYY"},{locale:"fr_CA",format:"dd-MM-YYYY"},{locale:"fr_FR",format:"dd-MM-YYYY"},{locale:"nl_BE",format:"dd-MM-YYYY"},{locale:"nl_NL",format:"dd-MM-YYYY"},{locale:"nb_NO",format:"dd-MM-YYYY"},{locale:"pt_BR",format:"dd-MM-YYYY"},{locale:"zh_HK",format:"dd-MM-YYYY"},{locale:"vi_VN",format:"dd-MM-YYYY"},{locale:"it_IT",format:"dd-MM-YYYY"},{locale:"ms_MY",format:"dd-MM-YYYY"},{locale:"id_ID",format:"dd-MM-YYYY"},{locale:"th_TH",format:"dd-MM-YYYY"},{locale:"ca_ES",format:"dd-MM-YYYY"},{locale:"en_PH",format:"MM-dd-YYYY"},{locale:"en_HK",format:"YYYY-MM-dd"},{locale:"ja_JP",format:"YYYY-MM-dd"},{locale:"ko_KR",format:"YYYY-MM-dd"},{locale:"sv_SE",format:"YYYY-MM-dd"},{locale:"zh_CN",format:"YYYY-MM-dd"},{locale:"zh_TW",format:"YYYY-MM-dd"}],E=(e,t,r)=>{var n,a,l,o;const i=e.replace("TANYT","").split(/[/.-]/).map(e=>parseInt(e,10));let s="MM-dd-YYYY";const u=_.filter(e=>e.locale===t);if(u.length>1){const e=u.filter(e=>e.siteid===r);e.length>0&&(s=null!=(a=null==(n=e[0])?void 0:n.format)?a:s)}else 1===u.length&&(s=null!=(o=null==(l=u[0])?void 0:l.format)?o:s);return((e,t)=>{var r,n,a,l,o,i,s,u,c;const d=new Date;return"dd-MM-YYYY"===t?{day:null!=(r=e[0])?r:d.getDate(),month:null!=(n=e[1])?n:d.getMonth()+1,year:null!=(a=e[2])?a:d.getFullYear()}:"MM-dd-YYYY"===t?{day:null!=(l=e[1])?l:d.getDate(),month:null!=(o=e[0])?o:d.getMonth()+1,year:null!=(i=e[2])?i:d.getFullYear()}:{day:null!=(s=e[2])?s:d.getDate(),month:null!=(u=e[1])?u:d.getMonth()+1,year:null!=(c=e[0])?c:d.getFullYear()}})(i,s)},p=e=>{let t,r,n,a=e;switch(3!==a.length&&5!==a.length||(a=`0${a}`),a.length){case 4:t=parseInt(a.substring(0,2),10),r=parseInt(a.substring(2,4),10);break;case 6:if(t=parseInt(a.substring(0,2),10),r=parseInt(a.substring(2,4),10),n=a.substring(4,6).toUpperCase(),"AM"!==n&&"PM"!==n)throw new Error(`Failed to parse time value: ${e}`);break;default:throw new Error(`Failed to parse time value: ${e}`)}if(Number.isNaN(t)||Number.isNaN(r))throw new Error(`Failed to parse time value: ${e}`);if(12===t&&"AM"===n&&(t=0),12!==t&&"PM"===n&&(t+=12),t<0||t>23||r<0||r>59)throw new Error(`Failed to parse time value: ${e}`);return`${t}:${r}`},I=(e,t,r,n,a,l)=>{const o=((e,t,r)=>{let n;try{n=t.parseLocalDateString(e,r?{raw:r}:{})}catch(a){n=null}if(!n)try{if(n=t.parseLocalDateString(e,{raw:"yyyy-MM-dd"})||t.parseLocalDateString(e,{raw:"MM/dd/yyyy"}),!n)return null}catch(l){return null}return t.formatDate(n,{raw:"yyyy-MM-dd"})||null})(null!=e?e:n,r,e?l:""),i=(e=>{const t=new Date,[r,n,a]=e.split("-").map(e=>Number.parseInt(e,10));return{day:null!=a?a:t.getDate(),month:null!=n?n:t.getMonth()+1,year:null!=r?r:t.getFullYear()}})(null!=o?o:n),s=new Date,[u,c]=((e,t)=>{const r=null!=e?e:t,[n,a]=r.split(":").map(e=>parseInt(e,10));return[void 0===n||Number.isNaN(n)?10:n,void 0===a||Number.isNaN(a)?30:a]})(t,a);return{...i,hour:null!=u?u:s.getHours(),minute:null!=c?c:s.getMinutes(),second:0}},Y=(e,t)=>e?t.formatDate(new Date(e.year,e.month-1,e.day),{raw:"yyyy-MM-dd"}):null,T=e=>e?`${e.hour}:${e.minute}`:null,g=(e,t,r)=>{t?r.set(e,t):r.delete(e)},R="10:30",O={SEARCH_TERM:"locn",REGION:"dpln",EXACT_LOCATION:"exlocn",LATITUDE:"olat",LONGITUDE:"olon"},A={SEARCH_TERM:"loc2",REGION:"drid1",EXACT_LOCATION:"exloc2",LATITUDE:"dlat",LONGITUDE:"dlon"},h={DATE:"date1",TIME:"time1"},m={DATE:"date2",TIME:"time2"},M="useRewards",S="age",f=new Set(["orid","oloc","rdus","piid","totalprice",S,"rfrr",M]),N="sel",v=(e,t,r,n,a)=>{const l=!t&&n&&a?{latitude:Number(n),longitude:Number(a)}:void 0;return{searchTerm:e||void 0,regionId:null!=t?t:void 0,coordinates:l,isExactLocationSearch:Boolean(l)||Boolean(r)}},L=e=>{var t;const r=new Date;return r.setDate(r.getDate()+e),null!=(t=r.toISOString().split("T")[0])?t:""},C=(e,t,r)=>{const n=(e=>{const t=e.get(O.SEARCH_TERM),r=e.get(O.REGION),n=e.get(O.EXACT_LOCATION),a=e.get(O.LATITUDE),l=e.get(O.LONGITUDE);return v(t?decodeURIComponent(t):null,r,n,a,l)})(e),a=(e=>{const t=e.get(A.SEARCH_TERM),r=e.get(A.REGION),n=e.get(A.EXACT_LOCATION),a=e.get(A.LATITUDE),l=e.get(A.LONGITUDE),o=v(t?decodeURIComponent(t):null,r,n,a,l);return o.regionId||o.searchTerm||o.coordinates?o:null})(e),l=((e,t,r)=>{const n=e.get(h.DATE),a=e.get(h.TIME),l=a&&!a.includes(":")?p(a):a;return I(n,l,t,L(14),R,r)})(e,t,r),o=((e,t,r)=>{const n=e.get(m.DATE),a=e.get(m.TIME),l=a&&!a.includes(":")?p(a):a;return I(n,l,t,L(15),R,r)})(e,t,r);return{pickUpLocation:n,pickUpDateTime:l,dropOffLocation:a,dropOffDateTime:o}},y=e=>{const t=[],r="aarpcr";return"on"===e.get(r)&&t.push({id:r,value:!0}),t},D=e=>({id:M,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}),P=e=>{if(0===[...e.keys()].length)return[];const t=[],r=(e=>{const t=[...e.keys()].filter(e=>e.startsWith(N)||f.has(e));return[...new Set(t)]})(e);return r.forEach(r=>{const n=e.getAll(r);n.length>0&&[...new Set(n)].forEach(e=>{"piid"===r?t.push({id:"carOfferToken",value:e}):r===M?t.push(D(e)):t.push({id:r,value:e})})}),t},U=e=>{const t=P(e),r=(e=>{const t=[],r=e.get("cdnu"),n=e.get("vend"),a=e.get("cpcd"),l=e.get("rtcd"),o=e.get("odcd");return r&&t.push({id:"corporateDiscountCode",value:r}),n&&t.push({id:"selVen",value:n}),a&&t.push({id:"promoCode",value:a}),l&&t.push({id:"rateCode",value:l}),o&&t.push({id:"loyaltyProgramCode",value:o}),t})(e),n=(e=>{const t=[],r=e.get("sort");return r&&t.push({id:"sort",value:r}),t})(e);return[...t,...r,...n]},b=(e,t,r)=>({primarySearchCriteria:{car:C(e,t,r)},secondaryCriteria:{booleans:y(e),selections:U(e)}}),F=(e,t,r)=>{var n;return[...((null==(n=r.secondaryCriteria)?void 0:n.selections)||[]).filter(r=>r.id!==e||r.id===e&&r.value!==t)]},G=(e,t)=>{var r,n;return[...(null==(n=null==(r=e.secondaryCriteria)?void 0:r.selections)?void 0:n.filter(e=>e.id!==M))||[],{id:M,value:t?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}]},H=(e,t,r)=>{const{name:n,value:a}=e,{type:l,checked:o}=t.target;switch(l){case"checkbox":{const e=o?((e,t,r)=>{var n;const a=(null==(n=r.secondaryCriteria)?void 0:n.selections)||[];return a.some(r=>r.id===e&&r.value===t)?[...a]:[...a,{id:e,value:t}]})(n,a,r):F(n,a,r);return{...r,secondaryCriteria:{...r.secondaryCriteria,selections:e}}}case"radio":case"select-one":{const e=((e,t,r)=>{var n;const a=((null==(n=r.secondaryCriteria)?void 0:n.selections)||[]).filter(t=>t.id!==e);return t&&a.push({id:e,value:t}),[...a]})(n,a,r);return{...r,secondaryCriteria:{...r.secondaryCriteria,selections:e}}}default:return r}},w=(e,t)=>{const r=e?[...e]:[];return t.forEach(e=>{r.push({id:null==e?void 0:e.key,value:null==e?void 0:e.value})}),r},B=(e,t,r)=>{const n=r.getAll(e);return n.includes(t)&&(r.delete(e),n.forEach(n=>{n!==t&&r.append(e,n)})),r.toString()},k=(e,t,r)=>(t?r.set(e,t):r.delete(e),r.toString()),x=e=>k("pwaDialog",null,new URLSearchParams(e)),W=e=>{const t=new URLSearchParams(e.toString()),r=Array.from(t.entries()).filter(([e,t])=>t.includes("[")||e.startsWith(N)&&t.includes(","));return 0===r.length?null:(r.forEach(e=>{const[r,n]=e;let a;t.delete(r,n);try{a=JSON.parse(n)}catch(l){a=n.split(",")}a.forEach(e=>{t.append(r,e)})}),t)},V=(e,t,r)=>{const{name:n,value:a}=e,{type:l,checked:o}=t.target;switch(l){case"checkbox":return o?((e,t,r)=>(r.getAll(e).includes(t)||r.append(e,t),r.toString()))(n,a,r):B(n,a,r);case"radio":case"select-one":return k(n,a,r);default:return r.toString()}},X="filterCount",K=e=>{const t=(0,l.zy)(),r=(0,l.Zp)(),a=(0,o.useLocalization)(),[i,s]=(0,n.useState)(1),[u,c]=(0,n.useState)(1),d=n.useMemo(()=>new URLSearchParams(t.search),[t.search]),_=n.useMemo(()=>W(d),[d]);n.useEffect(()=>{if(!_)return;const e=setTimeout(()=>{r({...t,search:_.toString()},{replace:!0})});return()=>{e&&clearTimeout(e)}},[t,r,_]);const E=(0,n.useRef)(null),p=(0,n.useRef)(null),v=b(null!=_?_:d,a,e);return n.useReducer((n,l)=>{var o,_,v,C,y,P,U,K,j,$,q;const z=!!d.get("pwaDialog"),Q=p.current||n,Z=E.current||t.search;switch(l.type){case 0:return b(null!=(o=W(l.urlSearchParams))?o:l.urlSearchParams,a,e);case 3:{const{field:o,event:i}=l;if("clear"===o.name||"clear_quick_filters"===o.name)return n;if("restore"===o.name)return p.current=null,E.current=null,setTimeout(()=>{r({...t,search:x(t.search)})},0),n;if("NEIGHBORHOOD_FILTER"===(null==o?void 0:o.name)){const l=d.get(O.SEARCH_TERM),i=[{key:"orid",value:d.get(O.REGION)||""},{key:"oloc",value:l||""}];if(((e,t)=>{e.forEach(({key:e,value:r})=>{t.getAll(e).includes(r)||t.append(e,r)}),t.toString()})(i,d),"string"==typeof o.value){const[l,s]=o.value.split("-"),u=((e,t,r,n,a,l)=>{var o,i,s,u,c,d,_,E,p,Y,T,g,O,A;const h=I(null,null,a,L(15),R,l),m=I(null,null,a,L(14),R,l);return{...e,primarySearchCriteria:{...e.primarySearchCriteria,car:{...null==(o=e.primarySearchCriteria)?void 0:o.car,pickUpLocation:{...null==(s=null==(i=e.primarySearchCriteria)?void 0:i.car)?void 0:s.pickUpLocation,regionId:t||(null==(d=null==(c=null==(u=e.primarySearchCriteria)?void 0:u.car)?void 0:c.pickUpLocation)?void 0:d.regionId)||"",searchTerm:r||(null==(p=null==(E=null==(_=e.primarySearchCriteria)?void 0:_.car)?void 0:E.pickUpLocation)?void 0:p.searchTerm)||""},dropOffDateTime:(null==(T=null==(Y=e.primarySearchCriteria)?void 0:Y.car)?void 0:T.dropOffDateTime)||h,pickUpDateTime:(null==(O=null==(g=e.primarySearchCriteria)?void 0:g.car)?void 0:O.pickUpDateTime)||m}},secondaryCriteria:{...e.secondaryCriteria,selections:w(null==(A=e.secondaryCriteria)?void 0:A.selections,n)}}})(n,l,s,i,a,e),c=((e,t)=>(g(O.SEARCH_TERM,null==e?void 0:e.searchTerm,t),g(O.REGION,null==e?void 0:e.regionId,t),t.toString()))(null==(v=null==(_=u.primarySearchCriteria)?void 0:_.car)?void 0:v.pickUpLocation,d);return r({...t,search:c}),u}}if(z)return E.current=V(o,i,new URLSearchParams(Z)),p.current=H(o,i,Q),n;const s=V(o,i,d);r({...t,search:s});const Y=u+1;c(Y);const T={id:X,value:Y.toString()},A=H(o,i,n),h=[...null!=(P=null==(y=null==(C=A.secondaryCriteria)?void 0:C.selections)?void 0:y.filter(e=>e.id!==X))?P:[],T];return{...A,secondaryCriteria:{...A.secondaryCriteria,selections:h}}}case 5:{const{updatedPrimarySearchCriteria:e,updatedSecondarySearchCriteria:n}=l,o=new URLSearchParams,u=d.get(M);k(M,u,o);const c=null==(K=null==(U=null==n?void 0:n.selections)?void 0:U.find(e=>e.id===S))?void 0:K.value;c&&k(S,c,o);const _=((e,t,r)=>{var n,a,l,o,i,s,u,c,d,_;r.delete("pwaDialog");const E=null==e?void 0:e.pickUpLocation;g(O.SEARCH_TERM,null==E?void 0:E.searchTerm,r),g(O.EXACT_LOCATION,null==(n=null==E?void 0:E.isExactLocationSearch)?void 0:n.toString(),r),g(O.REGION,null==E?void 0:E.regionId,r),g(O.LATITUDE,null==(l=null==(a=null==E?void 0:E.coordinates)?void 0:a.latitude)?void 0:l.toString(),r),g(O.LONGITUDE,null==(i=null==(o=null==E?void 0:E.coordinates)?void 0:o.longitude)?void 0:i.toString(),r);const p=null==e?void 0:e.pickUpDateTime;g(h.DATE,Y(p,t),r),g(h.TIME,T(p),r);const I=null==e?void 0:e.dropOffLocation;g(A.SEARCH_TERM,null==I?void 0:I.searchTerm,r),g(A.EXACT_LOCATION,null==(s=null==I?void 0:I.isExactLocationSearch)?void 0:s.toString(),r),g(A.REGION,null==I?void 0:I.regionId,r),g(A.LATITUDE,null==(c=null==(u=null==I?void 0:I.coordinates)?void 0:u.latitude)?void 0:c.toString(),r),g(A.LONGITUDE,null==(_=null==(d=null==I?void 0:I.coordinates)?void 0:d.longitude)?void 0:_.toString(),r);const R=null==e?void 0:e.dropOffDateTime;return g(m.DATE,Y(R,t),r),g(m.TIME,T(R),r),r.toString()})(e.car,a,o);r({...t,search:_});const E=i+1;s(E);const p=[{id:"searchFormCount",value:E.toString()}];return u&&p.push(D(u)),c&&p.push({id:S,value:c}),{primarySearchCriteria:e,secondaryCriteria:{booleans:[],selections:p}}}case 6:{const[e={id:"",value:""}]=l.filterId,{id:a,value:o}=e,i=B(a,o,d);r({...t,search:i});const s=u-1;c(s);const _={id:X,value:s.toString()},E=[...F(a,o,n).filter(e=>e.id!==X),_];return{...n,secondaryCriteria:{...n.secondaryCriteria,selections:E}}}case 7:{const e=(e=>{var t;const r=(null==(t=e.secondaryCriteria)?void 0:t.selections)||[];return 0===r.length?[]:r.filter(e=>e.id.startsWith(N)||f.has(e.id))})(n),a=e.reduce((e,t)=>{const{id:r,value:n}=t;return r===S?e:B(r,n,new URLSearchParams(e))},Z),l=e.reduce((e,t)=>{const{id:r,value:n}=t;if(r===S)return e;const a=F(r,n,e);return{...e,secondaryCriteria:{...e.secondaryCriteria,selections:a}}},Q);return z?(E.current=a,p.current=l,n):(r({...t,search:a}),l)}case 4:{const{payload:e}=l,n=(null==e?void 0:e.state)||Q,a=(null==e?void 0:e.query)||Z,o=u+1;c(o);const i={id:X,value:o.toString()},s=[...null!=(q=null==($=null==(j=n.secondaryCriteria)?void 0:j.selections)?void 0:$.filter(e=>e.id!==X))?q:[],i];return p.current=null,p.current=null,setTimeout(()=>{r({...t,search:x(a)})},0),{...n,secondaryCriteria:{...n.secondaryCriteria,selections:s}}}case 8:return{...n,secondaryCriteria:{...n.secondaryCriteria,selections:G(n,l.isChecked)}};case 9:{const{keyValueParams:e}=l,a=((e,t)=>(e.forEach(e=>{g(e.key,e.value,t)}),t.toString()))(e,d);return r({...t,search:a}),((e,t)=>{var r;const n=(null==(r=t.secondaryCriteria)?void 0:r.selections)?[...t.secondaryCriteria.selections]:[],a=e.map(e=>e.key),l=n.filter(e=>!a.includes(e.id));return e.forEach(e=>{l.push({id:e.key,value:e.value})}),{...t,secondaryCriteria:{...t.secondaryCriteria,selections:l}}})(e,n)}default:return n}},v)},j=(e=>(e.LOWER="LOWER",e.UPPER="UPPER",e))(j||{}),$=(e=>(e.DAY="DAY",e.MONTH="MONTH",e.WEEK="WEEK",e.WEEKEND="WEEKEND",e))($||{}),q="10:30";function z(e){if(!e)return null;const[t,r]=e.split(",");return t&&r?{latitude:Number(t),longitude:Number(r)}:null}var Q=()=>{var e;const t=new Date;return t.setDate(t.getDate()+14),null!=(e=t.toISOString().split("T")[0])?e:""};function Z(e){const{hotelId:t,hotelName:r,hotelLatLong:n}=e;return{id:t,name:r,coordinates:z(n),type:"PROPERTY"}}function J(e){const{airportCode:t,location:r,airportLatLong:n,regionId:a}=e;return t?{id:t,name:r,coordinates:z(n),type:"AIRPORT"}:{id:a,name:r,type:"DESTINATION"}}function ee(e,t,r){const n=Object.fromEntries(e),{direction:a,roundTrip:l,pickUpDate:o,pickUpTime:i,dropOffDate:s,dropOffTime:u}=n,c=function(e,t){if("true"===e)return"ROUNDTRIP";switch(t){case"H2A":case"TO_AIRPORT":return"TO_AIRPORT";default:return"FROM_AIRPORT"}}(l,a),d="TO_AIRPORT"===c,_=[],E=function(e){const{adults:t,children:r,infants:n}=e,a=[];return t&&a.push({type:"ADULT",count:parseInt(t,10)}),r&&a.push({type:"CHILD",count:parseInt(r,10)}),n&&a.push({type:"INFANT",count:parseInt(n,10)}),a}(n),p={dateTime:I(o,i,t,Q(),q,r),origin:d?Z(n):J(n),destination:d?J(n):Z(n)};if(_.push(p),"true"===n.roundTrip){const e={dateTime:I(null!=s?s:o,null!=u?u:i,t,Q(),q,r),origin:Z(n),destination:J(n)};_.push(e)}return{journeyCriteria:_,shoppingPath:"STANDALONE",travelerDetails:E,dateRange:{},direction:null!=c?c:"FROM_AIRPORT",locations:[]}}var te=e=>{var t;if(0===[...e.keys()].length)return null;const r=[],n=((e,t)=>{const r=[...t.keys()].filter(t=>t.indexOf(e)>-1);return[...new Set(r)]})("filter",e);return r.push({id:"sort",value:null!=(t=e.get("sort"))?t:""}),n.forEach(t=>{const n=[...new Set(e.getAll(t))];n.length&&n.forEach(e=>{e&&r.push({id:t,value:e})})}),r},re=e=>({booleans:[{id:"swp",value:"false"!==e.get("swp")}],selections:te(e)}),ne=({children:e,localDateFormat:t})=>{const r=(0,o.useLocalization)(),[a]=(0,i.useSearchParams)(),l=n.useMemo(()=>({primarySearchCriteria:{groundTransportation:ee(a,r,t)},secondaryCriteria:re(a)}),[a,r,t]);return n.createElement(u.Provider,{value:l},e)};ne.displayName="sharedui-GroundTransportationCriteriaProvider";var ae=(e=>(e.DESTINATION="destination",e.REGION_ID="regionId",e.LAT_LONG="latLong",e.DATE_ONE="d1",e.DATE_TWO="d2",e.START_DATE="startDate",e.END_DATE="endDate",e.ADULTS="adults",e.CHILDREN="children",e.SELECTED="selected",e.FLEXIBILITY="flexibility",e.SEARCH_RANGE="searchRange",e.FLEXIBLE_SEARCH_REQUIREMENT="flexibleSearchRequirement",e.MAP_BOUNDS="mapBounds",e.GROUP="group",e))(ae||{}),le=(e=>(e.SORT="sort",e.HOTEL_NAME="hotelName",e.REWARDS="rewards",e.STAR="star",e.GUEST_RATING="guestRating",e.CLEANING_AND_SAFETY="cleaningAndSafetyPractices",e.LODGING="lodging",e.MEAL_PLAN="mealPlan",e.AMENITIES="amenities",e.TRAVELER_TYPE="travelerType",e.PAYMENT_TYPE="paymentType",e.DEALS="deals",e.PROPERTY_STYLE="propertyStyle",e.BEDROOM_FILTER="bedroomFilter",e.NEIGHBORHOOD="neighborhood",e.STAY_TYPE="stayType",e.ACCESSIBILITY="accessibility",e.POI="poi",e.MIN_BEDROOMS="bedroom_count_gt",e.MIN_BATHROOMS="us_bathroom_count_gt",e.MIN_BEDS="bed_count_ge",e.MIN_KING_BED="king_bed_gt",e.MIN_QUEEN_BED="queen_bed_gt",e.MIN_FULL_BED="full_bed_gt",e.MIN_TWIN_BED="twin_bed_gt",e.MIN_BUNK_BED="bunk_bed_gt",e.PROPERTY_TYPE="property_type_group",e.LOCATION="location_group",e.ACCESSIBILITY_FEATURES="accessibility_features_group",e.BOOKING_OPTIONS="booking_options_group",e.DISCOUNTS_GROUP="discounts_group",e.AMENITIES_FACILITIES="amenities_facilities_group",e.FREE_CANCELLATION_GROUP="free_cancellation_group",e.HOUSE_RULES="house_rules_group",e.NEARBY_ACTIVITIES="nearby_activities_group",e.NEIGHBORHOOD_GROUP="neighborhood_group",e.PREMIER_HOST="premier_host_group",e.PROPERTIES_GOOD="properties_good_for_group",e.PROPERTY_REVIEWS="property_reviews_group",e.ROOMS_SPACES="rooms_spaces_group",e.COMMON_SPACES_GROUP="common_spaces_group",e.SAFETY="safety_group",e.VIRTUAL_TOUR_GROUP="virtual_tour_group",e.PRICING_GROUP="pricing_group",e.PROPERTY_NAME="propertyName",e.AVAILABLE_FILTER="availableFilter",e.AGENCY_BUSINESS_MODELS="agencyBusinessModels",e.COMMISSION_TIERS="commissionTiers",e.USE_REWARDS="useRewards",e.BED_TYPE_GROUP="bed_type_group",e.STAY_OPTIONS_GROUP="stay_options_group",e.HOTEL_BRAND="hotel_brand",e.MULTI_NEIGHBORHOOD_GROUP="multi_neighborhood_group",e.SPECIAL_DISCOUNTS_GROUP="special_discounts_group",e.HIGHLY_RATED_FOR_GROUP="highly_rated_for_group",e.AI_SEARCH_QUERY="ai_search_query",e.AVAILABILITY_GROUP="availableFilter",e.EXPEDIA_REWARDS_GROUP="expedia_rewards_group",e.AVAILABILITY_GROUP_VRBO="availability_group",e.LOCATION_HIGHLIGHTS_GROUP_EXPLORE="location_highlights_explore",e.PROPERTY_AMENITIES_GROUP_EXPLORE="property_amenities_group_explore",e.SPECIALIZED_STAYS_GROUP_EXPLORE="specialized_stays_group_explore",e.ROOM_AMENITIES_GROUP_EXPLORE="room_amenities_group_explore",e.RECREATION_GROUP_EXPLORE="recreation_group_explore",e.NEARBY_GROUP="nearby_group",e.AI_LOCATION="AI_LOCATION",e.AI_AMENITY="AI_AMENITY",e.AI_AFFINITY="AI_AFFINITY",e.AI_AFFINITY_NEARBY="AI_AFFINITY_NEARBY",e.AI_PROPERTY_BRAND="AI_PROPERTY_BRAND",e.AI_PROPERTY_NAME="AI_PROPERTY_NAME",e.AI_RANKED_INPUT="ai_ranked_input",e.AI_SELECTED="ai_selected",e.AI_UNIDENTIFIED="AI_UNIDENTIFIED",e.ROOM_VIEWS_GROUP="room_views_group",e.AI_RANKED_QUERY="ai_ranked_query",e.ROOM_AMENITIES_GROUP="room_amenities_group",e.POPULAR_EVENTS_GROUP="popular_events_group",e.BEACH_ACCESS_GROUP="beach_access_group",e))(le||{}),oe=(e=>(e.VACATION_RENTALS_ONLY="vacationRentalsOnly",e.PACKAGE_RATES="packageRates",e.DATE_SELECTED_BY_USER="dateSelectedByUser",e.SHOW_FILTER_NOTIFICATION="showFilterNotification",e))(oe||{}),ie=(e=>(e.PRICE="price",e.NIGHTLY_PRICE="nightly_price",e.TOTAL_PRICE="total_price",e.PROPERTY_SIZE="property_size",e.AI_PRICE="ai_price",e))(ie||{}),se=({destination:e,regionId:t,latLong:r,selected:n,mapBounds:a,group:l})=>{const[o,i]=(null==r?void 0:r.split(",").map(e=>parseFloat(e)))||[null,null];return{regionName:e,regionId:t,coordinates:o&&i?{latitude:o,longitude:i}:null,mapBounds:a,...n&&{pinnedPropertyId:n},...l&&{propertyIds:l}}},ue=e=>{const t=new Date(e),[r,n,a]=e.split("-").map(e=>parseInt(e,10));return{year:null!=r?r:t.getFullYear(),month:null!=n?n:t.getMonth()+1,day:null!=a?a:t.getDate()}},ce=e=>{const[t,r,n]=e.split("/");return`${n}-${t}-${r}`},de=({startDate:e,endDate:t})=>{if(!e||!t)return null;const r=/^\d{4}-\d{2}-\d{2}$/,n=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}$/,a=r.test(e)||n.test(e),l=r.test(t)||n.test(t);if(!a||!l)return null;const o=r.test(e)?e:ce(e),i=r.test(t)?t:ce(t);return{checkInDate:ue(o),checkOutDate:ue(i)}},_e=({queryParams:e})=>{const t=[];return Object.values(ie).forEach(r=>{const n=e.getAll(r),a=(1===n.length&&null!==n[0]&&void 0!==n[0]?n[0].split(","):n).filter(e=>0!==e.length).map(Number).filter(e=>!Number.isNaN(e)),l=a.includes(-2),o=a.includes(-3);a.length>1&&t.push({id:r,min:o?-3:l?Math.min(...a.filter(e=>e>0)):Math.min(...a),max:l?-2:Math.max(...a)})}),t},Ee=({adults:e,children:t})=>{const r=(null==e?void 0:e.split(",").map(e=>parseInt(e,10)))||[],n=(null==t?void 0:t.split(","))||[];return r.map((e,t)=>{const r=t+1;return{adults:e,children:n.filter(e=>e.startsWith(r.toString())).map(e=>{var t;return{age:parseInt(null!=(t=e.split("_")[1])?t:"",10)}})}}).filter(e=>!Number.isNaN(e.adults))},pe=({queryParams:e,paramsToExclude:t,fetchedFilterKeys:r})=>{const n=Object.values(le),a=r?Object.keys(r):[];return((e,t)=>e.some(e=>e.id===t.id)?e:[...e,t])(Array.from(new Set([...n,...a])).reduce((r,n)=>{const a=t.includes(n),l=e.getAll(n);if(l.length&&""!==l[0]){const e=l.map(e=>(a?[e]:e.split(",")).map(e=>"useRewards"===n?{id:n,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}:{id:n,value:e}));return[...r,...e]}return[...r]},[]).flat(),{id:"sort",value:"RECOMMENDED"})},Ie=e=>{const t=(e=>{const t=e.getAll("flexibility");return 0===t.length?null:t.reduce((e,t)=>{var r;const n=t.split("_");if(n.length>1){const t=parseInt(null!=(r=n[0])?r:"",10),a=n[1]?$[n[1].toUpperCase()]:"DAY",l=3===n.length&&n[2]?{bound:j[n[2].toUpperCase()]}:{};t&&a&&e.push({length:t,unit:a,...l})}return e},[])})(e),r=(e=>e.getAll("searchRange").reduce((e,t)=>{var r,n;const a=t.split("_");return 2===a.length&&e.push({start:ue(null!=(r=a[0])?r:""),end:ue(null!=(n=a[1])?n:"")}),e},[]))(e),n=(e=>e.getAll("flexibleSearchRequirement").filter(e=>e))(e),a={...(null==t?void 0:t.length)&&{flexibility:t},...(null==r?void 0:r.length)&&{searchRange:r},...(null==n?void 0:n.length)&&{flexibleSearchRequirement:n}};return Object.getOwnPropertyNames(a).length?a:null},Ye=e=>{const t=e.map(e=>e.split(",")).filter(([e,t])=>""!==e&&""!==t).map(([e,t])=>({latitude:Number(e),longitude:Number(t)}));return 2===t.length?t:null},Te=e=>{var t;const r=null==(t=null==e?void 0:e.split(","))?void 0:t.filter(e=>""!==e);return(null==r?void 0:r.length)?r:null},ge=[{URL_PARAM_ID:"packageRates",QUERY_BOOLEAN_ID:"showPackageRates"},{URL_PARAM_ID:"vacationRentalsOnly",QUERY_BOOLEAN_ID:"showVacationRentalsOnly"},{URL_PARAM_ID:"dateSelectedByUser",QUERY_BOOLEAN_ID:"isUserSelectedDates"},{URL_PARAM_ID:"showFilterNotification",QUERY_BOOLEAN_ID:"showFilterNotification"}],Re=e=>ge.flatMap(t=>"true"===e.get(t.URL_PARAM_ID)?[{id:t.QUERY_BOOLEAN_ID,value:!0}]:[]),Oe=[...Object.values(ae),...Object.values(oe),...Object.values(le),...Object.values(ie)],Ae=(a.ch.GroundTransportation,n.Fragment,a.ch.Cars,n.Fragment,a.ch.Lodging,n.Fragment,()=>n.useContext(u)),he=()=>{const e=n.useContext(c);return e||(()=>{console.error("useProductShoppingCriteriaDispatch must be used within a ProductShoppingCriteriaDispatchProvider")})},me=e=>{switch(e){case"oneway":default:return"ONE_WAY";case"roundtrip":return"ROUND_TRIP";case"multi":return"MULTI_DESTINATION"}},Me=(e,t,r)=>e.filter(e=>null!==e).map(e=>{var n,a;const l=decodeURIComponent(e).replace("from:","").replace(",to:","|").replace(",departure:","|").split("|"),o=l[2]||"";return{departureDate:E(o,t,r),destination:(null==(n=l[1])?void 0:n.split(",toCode")[0])||"",origin:(null==(a=l[0])?void 0:a.split(",frCode")[0])||""}}),Se=e=>{const t=e.split(","),r=[],n=t.find(e=>e.includes("adults"))||"",a=t.find(e=>e.includes("children"))||"",l=t.find(e=>e.includes("infantinlap"))||"N";return n&&r.push((e=>{const t=e.split(":");return{travelerType:"ADULT",count:t[1]?parseInt(t[1],10):1}})(n)),a&&r.push(...((e,t)=>{var r;const n=[],a=e.split(":");if("0"===(null==a?void 0:a[1]))return[];const l=a[1]?a[1].split("["):"";let o=parseInt(null!=(r=l[0])?r:"",10);const i=l[1]&&l[1].replace("]","").split(";").map(e=>parseInt(e,10))||[],s=i.filter(e=>e<=1);return s.length>0&&(o-=s.length,n.push({count:s.length,travelerType:(null==t?void 0:t.includes("Y"))?"INFANT_IN_LAP":"INFANT_IN_SEAT",ages:s})),o>0&&n.push({count:o,travelerType:"CHILD",ages:i.filter(e=>e>1)}),n})(a,l)),r},fe=e=>e.includes("business")?"BUSINESS":e.includes("premium")||e.includes("premium coach")||e.includes("premium_economy")?"PREMIUM_ECONOMY":e.includes("first")?"FIRST":e.includes("any")?"ANY":"COACH",Ne=(0,n.createContext)(null);(({children:e})=>{const t=(0,l.zy)(),{context:r}=(0,s.R)(),a=(0,n.useMemo)(()=>((e,t,r)=>{const n=e.get("trip"),a=e.get("originalBookingId"),l=e.get("journeysContinuationId"),o=e.get("airCreditIntent"),i=e.get("passengers")||"",s=e.get("options")||"",u=[e.get("leg1")||"",e.get("leg2")||"",e.get("leg3")||"",e.get("leg4")||"",e.get("leg5")||""].filter(e=>""!==e);return{journeyCriteria:Me(u,t,r),searchPreferences:{cabinClass:fe(s)},flightsSearchContext:{tripType:me(n),originalBookingId:a,journeysContinuationId:l,hasCreditRedemptionIntent:"true"===o||null},travelerDetails:Se(i),sortOption:null,searchFilterValuesList:[]}})(new URLSearchParams(t.search),r.locale,r.siteId),[r.locale,r.siteId,t.search]);return n.createElement(Ne.Provider,{value:a},e)}).displayName="sharedui-FlightsSearchCriteriaProvider"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-shopping-search-criteria-providers.2744d83041be70d5a836.js.map