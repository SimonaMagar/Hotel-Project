/*@license For license information please refer to shared-ui-retail-product-gallery.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4190],{35213:function(e,n,t){t.d(n,{MG:function(){return pn},Wx:function(){return me}});var i=t(96540),a=t(1023),l=t(22913),r=t(22828),o=t(3418),d=t(2507),c=t(72195),m=t(39366),s=t(9705),u=t(39656),g=t(57414),v=t(99342),k=t(92416),y=t(68370),p=t(3579),b=t(99310),I=t(25859),S=t(53735),E=t(79611),h=t(6057),f=t(47715),N=t(43951),F=t(45514),C=t(54939),P=t(28667),T=t(39859),_=t(92760),L=t(62547),x=t(97222),D=t(69045),R=t(92461),A=t(11232),G=t(11754),M=t(44203),O=t(37371),w=t(85911),B=t(8983),V=t(23211),z=t(77950),H=t(26143),U=t(28155),Q=t(47376),$=t(21742),Y=t(15336),q=t(96912),K=t(80105),W=t(97250),X=t(93065),j=t(6237),J=t(25607),Z=t(29838),ee=t(50804),ne=t(88616),te=t(6412),ie=t(79786),ae=t(62152),le=t(33685),re=t(22750),oe=t(47730);const de=e=>{const n={};return e.filter(e=>{if("FragmentDefinition"!==e.kind)return!0;const t=e.name.value;return!n[t]&&(n[t]=!0,!0)})};var ce="default-product-details-experience-batch-key",me=(e=>(e.ACTIVITY_ID="ACTIVITY_ID",e.CART_ID="CART_ID",e.CAR_OFFER_TOKEN="CAR_OFFER_TOKEN",e.CHECKOUT_SESSION_ID="CHECKOUT_SESSION_ID",e.ENTITY_ID="ENTITY_ID",e.LEGACY_ORDER_ID="LEGACY_ORDER_ID",e.OFFER_ID="OFFER_ID",e.ORDER_ID="ORDER_ID",e.PROPERTY_ID="PROPERTY_ID",e.SAILING_TOKEN="SAILING_TOKEN",e))(me||{});function se(e,n,t,i,a,l,r){const o=[{imageGalleryMetaTagValue:Date.now().toString(),imageGalleryMetaTagType:"DEVICE_TIME_STAMP"}];r&&o.push({imageGalleryMetaTagValue:r,imageGalleryMetaTagType:"GALLERY_FILTER"});return[{schemaName:"allHotelProducts",messageContent:{hotelProducts:[{imageGalleryAlgorithm:{name:"heroaesthetics.v20190411-hsc.v20190223"},algoMediaGuid:n,...a?{productId:Number(a)}:{}}]}},{schemaName:"imageTracking",messageContent:{galleryName:l,galleryType:"GALLERY_TYPE_SINGLE",galleryMaxPosition:t,galleryPosition:e,repeatedGalleryIndex:null,imageGalleryMetaTagList:o,...i?{images:[{id:i,galleryPosition:e}]}:{}}}]}function ue(e){var n,t,i,a,l,r,o,d,c;return{__typename:e.image.__typename,src:null!=(n=e.image.url)?n:"",caption:null!=(i=null!=(t=e.description)?t:e.image.description)?i:"",displayCaption:null!=(a=e.image.description)?a:"",alt:null!=(r=null!=(l=e.description)?l:e.image.description)?r:"",thumbnailClickAnalytics:null==(o=e.image)?void 0:o.analytics,trackingId:(null==(d=e.analytics)?void 0:d.trackingId)||null,imageId:(null==(c=e.analytics)?void 0:c.imageId)||null}}function ge(e){return e.map(e=>"ProductImageInfo"===e.__typename?ue(e):e)}var ve={position:{zindex:"layer2",bottom:"three",right:"three"},type:"absolute"},ke=e=>{const{data:n,onThumbnailGalleryClick:t,onVirtualTourClick:a,thumbnailButtonText:l,thumbnailDialogTriggerAccessibilityLabel:o,propertyId:d}=e,{galleryButtons:c}=n,m=(0,r.KY)(),s=(0,r.iQ)(),u=i.useCallback(e=>{var n,t,i,l,r,o,d;if("tour_360"===(null==(t=null==(n=null==c?void 0:c[e])?void 0:n.icon)?void 0:t.id)&&(null==(l=null==(i=c[e])?void 0:i.action)?void 0:l.resource)){const n=(null==(d=null==(o=null==(r=null==c?void 0:c[e])?void 0:r.action)?void 0:o.resource)?void 0:d.value)||"";a(n)}},[c,s,a]),g=i.useMemo(()=>({id:"HOT.HIS.PhotoGalleryTrigger",description:"Open Room Gallery dialog",callback:(e,n)=>{m(e,n,void 0,se(0,void 0,0,void 0,d,"PDP_FULL_IMAGE_GALLERY"))}}),[m]);return i.createElement(E.P,{...ve},i.createElement(S.X,{space:"two",wrap:"nowrap"},null==c?void 0:c.map((e,n)=>{var t,a;return i.createElement(b.M,{key:`gallery-mosaic-action-${null==(t=e.icon)?void 0:t.id}`,"aria-label":e.accessibility||"",role:"link",onClick:()=>u(n)},i.createElement(I.LD,{name:(null==(a=e.icon)?void 0:a.id)||"",id:"gallery-mosaic-action-trigger"}),e.accessibility)}),i.createElement(b.M,{"aria-label":o||"",onClick:t,analytics:g},i.createElement(I.LD,{name:"photo_library",id:"gallery-mosaic-thumbnail-trigger"}),l)))};ke.displayName="GalleryButtons",ke.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GalleryButtonsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"galleryButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:231,source:{body:"\n  fragment GalleryButtonsFragment on ProductImageGallery {\n    galleryButtons {\n      accessibility\n      icon {\n        description\n        id\n      }\n      action {\n        resource {\n          value\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var ye="PDP Image Mosaic",pe="PDP Image Gallery",be="Single Image view",Ie=(e=>(e.EMBED="embed",e.BASIC="basic",e))(Ie||{}),Se=(e,n)=>{const t=null==e?void 0:e.filter(e=>e.kind&&e.kind===n);return t&&0!==t.length?t.map(e=>{var t;return{src:e.src,srclang:e.srclang,label:e.label,default:null!=(t=e.default)?t:void 0,kind:e.kind&&e.kind===n?e.kind:void 0}}):[]},Ee={ONE_ONE:y.l.R1_1,FOUR_ONE:y.l.R4_1,FOUR_THREE:y.l.R4_3,SIXTEEN_NINE:y.l.R16_9,THREE_TWO:y.l.R3_2,THREE_FOUR:y.l.R3_4,TWENTY_ONE_NINE:y.l.R21_9},he=e=>{const{data:{button:n},onClick:t}=e,{icon:a,accessibility:l}=n||{};return i.createElement(i.Fragment,null,a&&i.createElement(b.M,{onClick:()=>{t()},"aria-label":l||"",size:h.V.LARGE},i.createElement(I.LD,{name:null==a?void 0:a.id,id:null==a?void 0:a.id})))};he.displayName="ProductVideoActions",he.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductVideoActionsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductVideoAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"withBackground"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"eventType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:290,source:{body:"\n  fragment ProductVideoActionsFragment on ProductVideoAction {\n    actionType\n    clickAnalytics\n    button {\n      icon {\n        id\n        token\n        withBackground\n      }\n      accessibility\n      analytics {\n        eventType\n        linkName\n        referrerId\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var fe=e=>{var n;const{data:t,isThumbnailView:a,videoDescription:l}=e,{authorName:r,profileImage:o}=t||{},d=(0,k.s5)({[k.OB.SMALL]:!0,[k.OB.MEDIUM]:!1}),m=(0,k.s5)({[k.OB.SMALL]:!1,[k.OB.MEDIUM]:!0,[k.OB.LARGE]:!1}),s=(0,k.s5)({[k.OB.SMALL]:!1,[k.OB.MEDIUM]:!1,[k.OB.LARGE]:!0}),u=(null==o?void 0:o.url)?200:m||s?400:d?300:void 0;return i.createElement(c.N,{margin:{block:"two"},padding:{inline:"two"}},i.createElement(S.X,{direction:"row",alignItems:"center",space:"two"},(null==o?void 0:o.url)&&i.createElement(P.C,null,i.createElement(O.k,{image:{src:null==o?void 0:o.url,alt:null!=(n=null==o?void 0:o.altText)?n:""},border:!0,size:a?"small":"medium"})),i.createElement(P.C,null,i.createElement("div",null,r&&i.createElement(w.D,{weight:"medium",theme:"light",size:300,align:"left"},r),!a&&(null==l?void 0:l.text)&&i.createElement(w.D,{size:u,weight:"regular",theme:"light",align:"left"},null==l?void 0:l.text,(null==l?void 0:l.accessibility)&&i.createElement("span",{className:"is-visually-hidden"},null==l?void 0:l.accessibility))))))};fe.displayName="ProductVideoCreator",fe.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductVideoCreatorFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductVideoCreator"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authorName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aspectRatio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fitment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"altText"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:195,source:{body:"\n  fragment ProductVideoCreatorFragment on ProductVideoCreator {\n    authorName\n    profileImage {\n      url\n      aspectRatio\n      description\n      fitment\n      width\n      altText\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Ne=e=>{const{data:n,onThumbnailClick:t,isThumbnailView:a,renderCreatorInfo:l,renderDuration:o,renderActions:d,fetchPriority:c,index:m,componentName:s,thumbnailAspectRatio:u,description:g,thumbnailQuality:v="MEDIUM"}=e,{imageResolutions:k,thumbnailClickAnalytics:p}=n,b=(null==k?void 0:k.find(e=>e.quality===v))||(null==k?void 0:k[0]),{url:I,aspectRatio:S}=b||{},h=(0,r.iQ)(),f=u||(S?Ee[S]:y.l.R16_9);return i.createElement(E.P,{type:"relative"},i.createElement(y.M,{ratio:f},I&&i.createElement(F.F,{src:I,placeholderImage:!0,alt:null!=g?g:"",additionalProps:{fetchPriority:c}}),i.createElement(C.d,null,i.createElement("button",{onClick:()=>{p&&h((0,x.Ft)("video.selected",p,s)),a&&t&&t(m)},type:"button"},g)),d&&i.createElement(E.P,{type:"absolute",position:{top:"center",left:"center",zindex:"layer1"}},d()),l&&i.createElement(E.P,{type:"absolute",position:{bottom:"two",left:"two",zindex:"layer1"}},l()),o&&i.createElement(E.P,{type:"absolute",position:{bottom:"two",right:"two",zindex:"layer1"}},o())))};Ne.displayName="ProductVideoThumbnail",Ne.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductVideoThumbnailFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductVideoThumbnail"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imageResolutions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aspectRatio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quality"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"thumbnailClickAnalytics"},arguments:[],directives:[]}]}}],loc:{start:0,end:172,source:{body:"\n  fragment ProductVideoThumbnailFragment on ProductVideoThumbnail {\n    imageResolutions {\n      url\n      aspectRatio\n      quality\n    }\n    thumbnailClickAnalytics\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Fe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"VideoExperienceTextTrackFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoTextTrack"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"src"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"srclang"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kind"},arguments:[],directives:[]}]}}],loc:{start:0,end:120,source:{body:"\n  fragment VideoExperienceTextTrackFragment on VideoTextTrack {\n    src\n    srclang\n    label\n    default\n    kind\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ce={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductVideoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductVideoInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoActionsFragment"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"analyticsPayload"},name:{kind:"Name",value:"analytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"creator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoCreatorFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"videoDescription"},name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"resolutions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aspectRatio"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"thumbnail"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoThumbnailFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closedCaptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VideoExperienceTextTrackFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"audioDescriptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"VideoExperienceTextTrackFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"videoType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorAnalytics"},arguments:[],directives:[]}]}}].concat(fe.fragment.definitions,Ne.fragment.definitions,he.fragment.definitions,Fe.definitions)),loc:{start:0,end:641,source:{body:"\n  fragment ProductVideoFragment on ProductVideoInfo {\n    actions {\n      ...ProductVideoActionsFragment\n    }\n    analyticsPayload: analytics\n    caption {\n      accessibility\n      text\n    }\n    creator {\n      ...ProductVideoCreatorFragment\n    }\n    duration\n    videoDescription: description {\n      accessibility\n      text\n    }\n    resolutions {\n      url\n      aspectRatio\n    }\n    thumbnail {\n      ...ProductVideoThumbnailFragment\n    }\n    closedCaptions {\n      ...VideoExperienceTextTrackFragment\n    }\n    audioDescriptions {\n      ...VideoExperienceTextTrackFragment\n    }\n    videoType\n    errorAnalytics\n  }\n  \n  \n  \n  \n".concat([fe.fragment.loc.source.body,Ne.fragment.loc.source.body,he.fragment.loc.source.body,Fe.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Pe=e=>{var n,t;const{data:a,index:l,className:o,fetchPriority:d,onThumbnailClick:c,onPlayClick:m,isThumbnailView:s,isPlayIconVisible:u,isDurationVisible:g,isCreatorInfoVisible:v,componentName:p,thumbnailAspectRatio:b,thumbnailQuality:I,isDialog:S=!1,indexChanged:E}=e,{creator:f,duration:N,resolutions:F,thumbnail:C,videoType:P,actions:T,caption:_,videoDescription:L,errorAnalytics:O,closedCaptions:w,audioDescriptions:B}=a||{},{url:V="",aspectRatio:z=null}=null!=(n=null==F?void 0:F[0])?n:{},[,H]=(0,i.useState)(!1),[U,Q]=(0,i.useState)(""),{url:$}=(null==(t=null==C?void 0:C.imageResolutions)?void 0:t[0])||{},Y=(0,i.useRef)(null),q=(0,i.useRef)(null),K=(0,r.iQ)(),W=P&&"basic"===Ie[P],X=P&&"embed"===Ie[P],j=(0,k.eg)({viewSizes:k.pf})<=k.pf.MEDIUM,J=(0,i.useCallback)(()=>{m&&m(l),H(!0)},[m,l]),Z=(0,i.useCallback)(()=>{O&&K((0,x.Ft)("video.failed",O,p))},[O,K,p]),ee=()=>g&&N&&i.createElement(D.G,{theme:R.mc.EMPHASIS,text:N}),ne=()=>v&&f&&i.createElement(fe,{data:f,isThumbnailView:!0}),te=()=>u&&(null==T?void 0:T[0])&&i.createElement(he,{data:null==T?void 0:T[0],onClick:J}),ie=(0,i.useCallback)(()=>{var e;const n=null==(e=null==T?void 0:T.find(e=>"PAUSE"===(null==e?void 0:e.actionType)))?void 0:e.clickAnalytics;n&&K((0,x.Ft)("video_pause.selected",n,p))},[T,K,p]),ae=(0,i.useCallback)(()=>{var e;const n=null==(e=null==T?void 0:T.find(e=>"PLAY"===(null==e?void 0:e.actionType)))?void 0:e.clickAnalytics;n&&K((0,x.Ft)("video_play.selected",n,p))},[T,K,p]);(0,i.useEffect)(()=>{if(P&&"embed"===Ie[P]&&E!==l){Q("");const e=setTimeout(()=>{Q(V)},0);return()=>clearTimeout(e)}Q(V)},[V,P,E,l]),(0,i.useEffect)(()=>{W&&q.current&&void 0!==E&&E!==l&&(q.current.getIsPaused()||q.current.togglePlayPause())},[E,l,W]);const le=(0,i.useMemo)(()=>({id:"video-analytics",callback:e=>{e.includes("playerError")&&Z()}}),[Z]),re=(0,i.useCallback)(e=>({id:e,callback:()=>{"video_pause.selected"===e?ie():"video_play.selected"===e&&ae()}}),[ie,ae]),oe=(0,i.useMemo)(()=>({pauseAnalytics:re("video_pause.selected"),playAnalytics:re("video_play.selected")}),[re]),de=(0,i.useMemo)(()=>{var e,n;return(null!=(e=null==w?void 0:w.length)?e:0)>0||(null!=(n=null==B?void 0:B.length)?n:0)>0},[null==w?void 0:w.length,null==B?void 0:B.length]),ce=(0,i.useMemo)(()=>({src:V,thumbnail:$||"",closedCaptionsTracks:Se(w,"captions"),audioDescriptionTracks:Se(B,"descriptions")}),[V,$,w,B]),me=(0,i.useMemo)(()=>({controlBarProps:{useScrim:!1,buttonSize:h.V.MEDIUM,hideControlsOnInactivity:!1,hasSettingsButton:de,hasFullscreenButton:!0,hasMuteButton:!0}}),[de]),se=(0,i.useCallback)(()=>{var e;if(!V)return null;const n={videoAriaLabel:null!=(e=null==L?void 0:L.accessibility)?e:"",onError:Z};return W?i.createElement(G.V,{ref:q,videoId:`product-video-player-custom-${l}`,isVideoMuted:!0,autoplay:S&&E===l,preserveAspectRatio:!0,preloadAuto:!0,visibleAutoplayThreshold:.5,videoClickAction:M.Hq.PLAY_PAUSE,videoResource:ce,loop:M.Dl.NONE,isExpanded:S,footerContent:me,videoAriaLabel:n.videoAriaLabel,onError:n.onError,analytics:oe,isMobile:j,key:`video-${l}-${E}`}):X?i.createElement(y.M,{ratio:z?Ee[z]:y.l.R16_9},i.createElement(A.H,{src:U,videoType:Ie[P],videoRef:Y,preload:"auto",poster:$||"",isDialog:S,analytics:le,alt:n.videoAriaLabel})):null},[V,null==L?void 0:L.accessibility,Z,W,X,ce,me,oe,j,P,z,U,$,S,le,l,E]);return s&&C?i.createElement(Ne,{data:C,onThumbnailClick:c,isThumbnailView:s,className:o,renderDuration:ee,renderCreatorInfo:ne,renderActions:te,fetchPriority:d,index:l,componentName:p,thumbnailAspectRatio:b,thumbnailQuality:I,description:null==_?void 0:_.accessibility}):se()};Pe.displayName="ProductVideo",Pe.fragment=Ce;var Te=({button:e,onClick:n,showTextLabel:t})=>{var a,l;return i.createElement(b.M,{"aria-label":(null==e?void 0:e.accessibility)||"",size:h.V.SMALL,onClick:n},i.createElement(I.LD,{size:I.So.SMALL,name:(null==(a=null==e?void 0:e.icon)?void 0:a.id)||"",id:`PhotoGallery-${null==(l=null==e?void 0:e.icon)?void 0:l.id}`}),!t&&(null==e?void 0:e.accessibility))},_e=({button:e,onClick:n,showTextLabel:t})=>{var a,l;return i.createElement(b.M,{"aria-label":(null==e?void 0:e.accessibility)||"",size:h.V.SMALL,onClick:n},i.createElement(I.LD,{size:I.So.SMALL,name:(null==(a=null==e?void 0:e.icon)?void 0:a.id)||"",id:`PhotoGallery-${null==(l=null==e?void 0:e.icon)?void 0:l.id}`}),!t&&(null==e?void 0:e.accessibility))},Le=({uitkImages:e,handleMediaButtonClick:n})=>{const{formatText:t}=(0,L.useLocalization)();return i.createElement(b.M,{size:h.V.SMALL,onClick:n},i.createElement(I.LD,{name:"photo_library",id:"photo_library-id",title:t("gallerycarousel.mediaGalleryButton",e.length)}),i.createElement("span",{"aria-hidden":"true"},String(e.length)))},xe=e=>{var n,t;const{ratio:a,uitkImages:o,controlAnalytics:d,label:c,handleIndexChange:m,handleImageClick:s,handleMediaButtonClick:u,onVirtualTourClick:g,virtualTourButton:v,autoplay:k,autoplayInterval:p,onPlayButtonClick:b,handleThumbnailClick:I,thumbnailQuality:h}=e,L=i.useRef(null),[D,R]=i.useState(0),A=i.useRef(k),G=i.useRef(0),{context:M}=(0,l.R)(),{device:O}=M,w="MOBILE_PHONE"===O.type,B=i.useRef(null),V=i.useRef(null);let z=null,H=null;const U=e=>{G.current=e,R(e),m(e)},Q=()=>{B.current&&(clearInterval(B.current),B.current=null)},$=()=>{Q(),A.current=!1,u()},Y=()=>{Q(),A.current=!1,s()},q=e=>{k&&(Q(),A.current=!1),null==b||b(e,0)},K=i.useCallback(([e])=>{A.current&&((null==e?void 0:e.isIntersecting)?(()=>{let e=G.current;B.current=setInterval(()=>{var n;e+=1,e>=o.length&&(e=0),U(e),null==(n=L.current)||n.changeIndex(e)},null!=p?p:4e3)})():Q())},[]);i.useEffect(()=>{const e=new IntersectionObserver(K);return V.current&&e.observe(V.current),()=>{e.disconnect(),Q()}},[]);const W=e=>{const n=e.touches[0];z=n.clientX,H=n.clientY},X=e=>{if(!z||!H)return;const n=e.touches[0].clientX,t=e.touches[0].clientY,i=z-n,a=H-t;Math.abs(i)>Math.abs(a)&&(Q(),A.current=!1),z=null,H=null},j=e=>{Math.abs(e.deltaX)>0&&0===Math.abs(e.deltaY)&&(Q(),A.current=!1)};i.useEffect(()=>{const e=V.current;return e&&(e.addEventListener("wheel",j),e.addEventListener("touchstart",W),e.addEventListener("touchmove",X)),()=>{e&&(e.removeEventListener("wheel",j),e.removeEventListener("touchstart",W),e.removeEventListener("touchmove",X))}},[]);return i.createElement(E.P,{type:"relative"},i.createElement(f._N,{carouselRef:L,domRef:k?V:void 0,analytics:d,carouselHeaderLevel:"h2",carouselHeaderText:c||"",carouselName:"PhotoGallery",itemsVisible:{sm:1,md:1,lg:1},onIndexChange:U,hideNav:w,pagingPersistent:!w,pagingInset:!w,pagingOverlay:!w,peek:!1,wrapItems:!0,buttonText:{nextButton:"Show next card",prevButton:"Show previous card"}},o.map((e,n)=>i.createElement(i.Fragment,null,"ProductVideoInfo"===e.__typename?i.createElement(i.Fragment,null,((e,n)=>e.analyticsPayload?i.createElement(r.E0,{eventData:(0,x.Ft)("video.presented",e.analyticsPayload,ye)},i.createElement(Pe,{data:e,onThumbnailClick:I,onPlayClick:q,index:n,fetchPriority:0===n?"high":void 0,isThumbnailView:!0,isPlayIconVisible:!0,isDurationVisible:!1,isCreatorInfoVisible:!1,componentName:ye,thumbnailAspectRatio:a,thumbnailQuality:h})):i.createElement(Pe,{data:e,onThumbnailClick:I,onPlayClick:q,index:n,fetchPriority:0===n?"high":void 0,isThumbnailView:!0,isPlayIconVisible:!0,isDurationVisible:!1,isCreatorInfoVisible:!1,componentName:ye,thumbnailAspectRatio:a,thumbnailQuality:h}))(e,n)):i.createElement(y.M,{ratio:a,key:n},i.createElement(F.F,{placeholderImage:!0,alt:e.alt,src:e.src,lazyLoading:0===n?"eager":"lazy"}),i.createElement(C.d,null,i.createElement("button",{type:"button",onClick:k?Y:s},e.alt)))))),(null==(n=L.current)?void 0:n.changeIndex)&&w&&i.createElement(T.O,{type:_.Q.BOTTOM},i.createElement(N.W,{activeIndex:D,inset:!0,itemCount:o.length,changeIndex:k?e=>{var n;Q(),A.current=!1,null==(n=L.current)||n.changeIndex(e)}:null==(t=L.current)?void 0:t.changeIndex})),w?i.createElement(i.Fragment,null,i.createElement(E.P,{position:{bottom:"three",left:"three",zindex:"layer3"},type:"absolute"},v&&i.createElement(Te,{button:v,onClick:g,showTextLabel:w})),i.createElement(E.P,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},i.createElement(Le,{uitkImages:o,handleMediaButtonClick:k?$:u}))):i.createElement(E.P,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},i.createElement(S.X,{space:"two"},i.createElement(P.C,null,v&&i.createElement(_e,{button:v,onClick:g,showTextLabel:w})),i.createElement(P.C,null,i.createElement(Le,{uitkImages:o,handleMediaButtonClick:k?$:u})))))},De=({imageIndex:e,images:n,propertyId:t,children:a})=>{var l,o,d,c,m,s,u;let g,v;return"ProductImageInfo"===(null==(l=null==n?void 0:n[e])?void 0:l.__typename)&&(g=null!=(c=null==(d=null==(o=null==n?void 0:n[e])?void 0:o.analytics)?void 0:d.trackingId)?c:void 0,v=null!=(u=null==(s=null==(m=null==n?void 0:n[e])?void 0:m.analytics)?void 0:s.imageId)?u:void 0),i.createElement(r.ee,{tag:"span",referrerId:`HOT.HIS.MosaicTileImageImpression.${e}`,linkName:"Mosaic Tile Image Impression",trackOnce:!0,additionalUisPrimeMicroMessages:se(e,null!=g?g:void 0,n.length,null!=v?v:void 0,t,"PDP_MOSAIC")},a)},Re=e=>{const{data:n,onClick:t,index:a,className:l,fetchPriority:o,galleryLength:d,propertyId:c,isEnlargedAspectRatio:m,imageWithLink:s=!0,...u}=e,{image:g,lowResImage:v,analytics:k,description:p}=n,{trackingId:b,imageId:I}=k||{},S=null==g?void 0:g.analytics,E=(0,r.KY)(),h=i.useCallback(()=>{S&&E(null==S?void 0:S.referrerId,null==S?void 0:S.linkName),t(a)},[t,a,S]),f=i.createElement(i.Fragment,null,i.createElement(F.F,{alt:null!=p?p:"",placeholderImage:!0,src:(null==v?void 0:v.url)?v.url:g.url,additionalProps:{fetchPriority:o}}),s&&i.createElement(C.d,null,i.createElement("button",{onClick:h,type:"button"},i.createElement("span",{className:"is-visually-hidden"},p))));return i.createElement(y.M,{...u,className:l,ratio:m?y.l.R4_3:y.l.R16_9},k?i.createElement(r.ee,{trackOnce:!0,referrerId:`HOT.HIS.MosaicTileImageImpression.${a}`,linkName:"Mosaic Tile Image Impression",additionalUisPrimeMicroMessages:se(a,b,d,I,c,"PDP_MOSAIC")},f):f)};Re.displayName="sharedui-ProductImage",Re.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductImageFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"lowResImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackingId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subjectId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}],loc:{start:0,end:286,source:{body:"\n  fragment ProductImageFragment on ProductImageInfo {\n    image {\n      url\n      description\n      analytics {\n        linkName\n        referrerId\n      }\n    }\n    lowResImage {\n      url\n    }\n    analytics {\n      trackingId\n      imageId\n      subjectId\n    }\n    description\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Ae={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"CarouselContainerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categoryIdAll"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categorizedImages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categoryId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categoryName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientSideAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categoryContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"galleryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UISecondaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"GalleryButtonsFragment"},directives:[]}]}}].concat(ke.fragment.definitions,Re.fragment.definitions,Pe.fragment.definitions)),loc:{start:0,end:700,source:{body:"\n  fragment CarouselContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categoryIdAll\n    categorizedImages {\n      categoryId\n      categoryName\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...ProductImageFragment\n      }\n      categoryContent {\n        ...ProductImageFragment\n        ...ProductVideoFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  \n  \n  \n".concat([ke.fragment.loc.source.body,Re.fragment.loc.source.body,Pe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ge=e=>{const{data:n,allImages:t,onImageClick:a,onVirtualTourClick:o,onTriggerClick:d,imageIndexState:c,propertyId:m,autoplay:s,autoplayInterval:u,onPlayButtonClick:g,thumbnailQuality:v,isEnlargedAspectRatio:k}=e,{galleryButtons:b,accessibilityLabel:I}=n,[,S]=(0,p.DH)(),E=(0,r.KY)(),[h,f]=c,{context:N}=(0,l.R)(),{device:F}=N,C="MOBILE_PHONE"===F.type,P=i.useMemo(()=>({id:"HOT.HIS.Main",description:"Change image in gallery carousel",callback:(e,n)=>{const i=(a=h,l=t.length,(r=e).includes("clickRight")?a<l-1?a+1:0:r.includes("clickLeft")?a>0?a-1:l-1:a);var a,l,r;S(()=>{var a,l;if("ProductImageInfo"===(null==(a=null==t?void 0:t[i])?void 0:a.__typename)){const{trackingId:a,imageId:r}=(null==(l=t[i])?void 0:l.analytics)||{};E(e,n,void 0,se(i,a,t.length,r,m,"PDP_MOSAIC"))}})}}),[E,S,h,t,m]),T=i.useCallback(e=>{f(e)},[f]),_=i.useCallback(()=>{const e=t[h];"ProductImageInfo"===(null==e?void 0:e.__typename)&&(S(()=>{var n,i,a;const l=null==(n=null==e?void 0:e.image)?void 0:n.analytics;l&&E(null==l?void 0:l.referrerId,null==l?void 0:l.linkName),E("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,se(h,null==(i=null==e?void 0:e.analytics)?void 0:i.trackingId,t.length,null==(a=null==e?void 0:e.analytics)?void 0:a.imageId,m,"PDP_MOSAIC"))}),a())},[E,a,S]),L=i.useCallback(()=>{const e=t[h];"ProductVideoInfo"===(null==e?void 0:e.__typename)&&a()},[t,h,a]),x=i.useCallback(()=>{S(()=>{E("HOT.HIS.PhotoGalleryTrigger","Open Room Gallery dialog")}),d()},[S,d,E]),D=null==b?void 0:b.find(e=>{var n,t,i;return"tour_360"===(null==(n=e.icon)?void 0:n.id)?null==(i=null==(t=e.action)?void 0:t.resource)?void 0:i.value:null}),R=i.useCallback(()=>{(null==D?void 0:D.action)&&o(D.action.resource.value)},[o,D]),A=i.useMemo(()=>t.map(e=>{return"ProductImageInfo"===e.__typename?{src:null!=(t=(n=e).image.url)?t:"",caption:null!=(a=null==(i=n.image)?void 0:i.description)?a:"",alt:null!=(r=null!=(l=n.description)?l:n.image.description)?r:""}:e;var n,t,i,a,l,r}),[t]),G=C?y.l.R3_2:y.l.R16_9,M=k?y.l.R1_1:G;return i.createElement(De,{propertyId:m,images:t,imageIndex:h},i.createElement(xe,{ratio:M,uitkImages:A,controlAnalytics:P,label:I,handleIndexChange:T,handleImageClick:_,handleThumbnailClick:L,handleMediaButtonClick:x,onVirtualTourClick:R,onPlayButtonClick:g,virtualTourButton:D,autoplay:s,autoplayInterval:u,thumbnailQuality:v}))};Ge.displayName="CarouselContainer",Ge.fragment=Ae;var Me={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"MosaicContainerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categorizedImages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categoryId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categoryName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientSideAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categoryContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"galleryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UISecondaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"GalleryButtonsFragment"},directives:[]}]}}].concat(ke.fragment.definitions,Re.fragment.definitions,Pe.fragment.definitions)),loc:{start:0,end:680,source:{body:"\n  fragment MosaicContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categorizedImages {\n      categoryId\n      categoryName\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...ProductImageFragment\n      }\n      categoryContent {\n        ...ProductImageFragment\n        ...ProductVideoFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  \n  \n  \n".concat([ke.fragment.loc.source.body,Re.fragment.loc.source.body,Pe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Oe=e=>{var n,t;const{data:a,allImages:l,imagesToShow:o,onImageClick:d,propertyId:c,onPlayButtonClick:m,thumbnailQuality:s,isEnlargedAspectRatio:u}=e,{accessibilityLabel:g}=a,v=(0,r.KY)(),[,k]=(0,p.DH)(),b=i.useMemo(()=>{const e=l.slice(0,o);return e.length%2==0&&e.pop(),e},[l,o]),I=i.useCallback(e=>{var n,t;if("ProductImageInfo"!==(null==(n=null==b?void 0:b[e])?void 0:n.__typename))return;const{trackingId:i,imageId:a}=(null==(t=null==b?void 0:b[e])?void 0:t.analytics)||{};k(()=>{v(`HOT.HIS.ClickMosaicTileImage.${e}`,"Property mosaic tile image click",void 0,se(e,i,b.length,a,c,"PDP_MOSAIC")),v("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,se(e,i,b.length,a,c,"PDP_MOSAIC"))}),d(e)},[v,d,k]),S=i.useCallback(e=>{d(e)},[]),h=i.useCallback(e=>{m(e,0)},[]),f=function(e){switch(e){case 5:return 4;case 3:return 3;default:return 1}}(b.length);return i.createElement(E.P,{type:"relative"},i.createElement(B.w,{columns:f,rows:2,space:"half"},i.createElement("meta",{itemProp:"image",content:"ProductImageInfo"===(null==(n=null==b?void 0:b[0])?void 0:n.__typename)?null==(t=b[0])?void 0:t.image.url:""}),i.createElement("h2",{className:"is-visually-hidden"},g),b.map((e,n)=>i.createElement(V.T,{key:`mosaic-media-${n}`,colSpan:0===n?2:1,rowSpan:0===n?2:1},"ProductVideoInfo"!==e.__typename?i.createElement(Re,{data:e,onClick:I,index:n,fetchPriority:0===n?"high":void 0,galleryLength:o,propertyId:c,isEnlargedAspectRatio:u}):i.createElement(i.Fragment,null,((e,n)=>e.analyticsPayload?i.createElement(r.E0,{eventData:(0,x.Ft)("video.presented",e.analyticsPayload,ye)},i.createElement(Pe,{data:e,onThumbnailClick:S,onPlayClick:h,index:n,fetchPriority:0===n?"high":void 0,componentName:ye,isThumbnailView:!0,isPlayIconVisible:!0,thumbnailAspectRatio:u?y.l.R4_3:y.l.R16_9,thumbnailQuality:s})):i.createElement(Pe,{data:e,onThumbnailClick:S,onPlayClick:h,index:n,fetchPriority:0===n?"high":void 0,componentName:ye,isThumbnailView:!0,isPlayIconVisible:!0,thumbnailAspectRatio:u?y.l.R4_3:y.l.R16_9,thumbnailQuality:s}))(e,n))))))};Oe.fragment=Me,Oe.displayName="MosaicContainer";var we={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"PrimaryButtonFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductScrollToButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSButtonFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetRef"},arguments:[],directives:[]}]}}].concat(x.NO.fragment.definitions)),loc:{start:0,end:148,source:{body:"\n  fragment PrimaryButtonFragment on ProductScrollToButton {\n    button {\n      ...EGDSButtonFragment\n    }\n    clickAnalytics\n    targetRef\n  }\n  \n".concat([x.NO.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Be=({data:e,onClickHandler:n})=>{const{targetRef:t,button:a,clickAnalytics:l}=e,o=(0,r.iQ)(),d=i.useCallback(e=>{n&&(o((0,x.Ft)("reserve_room.selected",l)),n(t,e))},[l,n,t,o]);return(null==a?void 0:a.primary)?i.createElement(i.Fragment,null,a&&i.createElement(x.NO,{inverse:!0,data:a,onClickHandler:d})):null};Be.displayName="PrimaryButton",Be.fragment=we;var Ve={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"MediaGalleryDialogFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categorizedImages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categoryId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categoryName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clientSideAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categoryContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"galleryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UISecondaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"mediaGalleryDialog"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toolbar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"primaryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PrimaryButtonFragment"},directives:[]}]}}]}}]}}].concat(Re.fragment.definitions,Be.fragment.definitions,Pe.fragment.definitions)),loc:{start:0,end:807,source:{body:"\n  fragment MediaGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      accessibilityLabel\n      images {\n        ...ProductImageFragment\n      }\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      categoryContent {\n        ...ProductImageFragment\n        ...ProductVideoFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    mediaGalleryDialog {\n      toolbar {\n        icon {\n          id\n          description\n        }\n      }\n      primaryButton {\n        ...PrimaryButtonFragment\n      }\n    }\n  }\n  \n  \n  \n".concat([Re.fragment.loc.source.body,Be.fragment.loc.source.body,Pe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},ze=e=>{var n,t,a,l,o,d,m,s,u,g,v;const{data:p,allMediaContent:b,isDialogOpen:I,onDialogDismiss:E,imageIndexState:h,categoryImageIndexState:N,categoryIndexState:C,propertyId:T,mediaGalleryStartIndexState:_,triggerRef:L,onReserveButtonClick:D}=e,{categorizedImages:R,mediaGalleryDialog:A}=p,{primaryButton:G}=A||{},[,M]=h,[O,$]=N,[Y]=C,[q]=_,[K,W]=i.useState(q),X=(0,r.KY)(),j=(0,k.s5)({[k.OB.SMALL]:!0,[k.OB.MEDIUM]:!1}),J=(0,k.s5)({[k.OB.SMALL]:!1,[k.OB.MEDIUM]:!1,[k.OB.LARGE]:!0}),Z=i.useMemo(()=>{if(Y<0)return b.map(e=>"ProductImageInfo"===e.__typename?ue(e):e);const e=R?R[Y]:null;return((null==e?void 0:e.categoryContent)||(null==e?void 0:e.images)||[]).map(e=>"ProductImageInfo"===e.__typename?ue(e):e)},[Y,R,b]),ee=i.useMemo(()=>{const e={id:"HOT.HIS.PhotoGalleryTrigger",description:"Change image in media gallery",callback:(e,n)=>{var t,i,a;const l=((e,n,t)=>t.includes("clickRight")||t.includes("scrollRight")?e<n-1?e+1:e:t.includes("clickLeft")||t.includes("scrollLeft")?e>0?e-1:0:t.includes("itemViewed")?parseInt((null==t?void 0:t.split(".")[(null==t?void 0:t.split(".").length)-1])||"0",10):e)(O,Z.length,e),r=(null==(t=null==R?void 0:R[Y])?void 0:t.images)||b;if("ProductImageInfo"===(null==(i=null==r?void 0:r[l])?void 0:i.__typename)){const{trackingId:t,imageId:i}=(null==(a=r[l])?void 0:a.analytics)||{};X(e,n,void 0,se(l,t,Z.length,i,T,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}}};return e},[X]),ne=i.useMemo(()=>({id:"HOT.HIS.PhotoGalleryTrigger",description:"Close review gallery dialog",callback:(e,n)=>{var t,i,a;const l=(null==(t=null==R?void 0:R[Y])?void 0:t.images)||b;if("ProductImageInfo"===(null==(i=null==l?void 0:l[O])?void 0:i.__typename)){const{trackingId:t,imageId:i}=(null==(a=null==l?void 0:l[O])?void 0:a.analytics)||{};X(e,n,void 0,se(O,t,Z.length,i,T,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}}}),[X]),te=i.useCallback(e=>{W(e),Y<0?M(e):$(e)},[Y,$,M,W]),ie=i.useCallback((e,n)=>{setTimeout(()=>{D&&D(e,n)},300)},[D]),ae={analytics:ee,carouselHeaderText:"MediaGalleryCarousel",carouselName:"MediaGalleryCarousel",itemsVisible:{sm:1,md:1,lg:1,xl:1},pagingInset:!0,onIndexChange:te,stretchToFill:!1,navigationIconId:{next:"next-button-media-gallery",prev:"prev-button-media-gallery"},buttonText:{nextButton:"Show next card",prevButton:"Show previous card"},pageBy:1,peek:!1},le=i.useRef(null);if(!(null==Z?void 0:Z.length))return null;const re=e=>i.createElement(fe,{data:e.creator,videoDescription:e.videoDescription,isThumbnailView:!1}),oe=e=>{const n=null==e?void 0:e.caption;return i.createElement(i.Fragment,null,"string"==typeof n?n:null)},de=(e,n)=>e.analyticsPayload?i.createElement(r.E0,{eventData:(0,x.Ft)("video.presented",e.analyticsPayload,be)},i.createElement(Pe,{data:e,index:n,componentName:be,isDialog:!0,indexChanged:K})):i.createElement(Pe,{data:e,index:n,componentName:be,isDialog:!0,indexChanged:K}),ce=(e,n)=>i.createElement(B.w,{columns:{small:["minmax(300px, 500px)"],medium:["1fr"],large:["180x"],extra_large:["1000px"]},key:`EMBED-${n}`,alignItems:"center",justifyContent:"center",blockSize:"full_size",rows:["1fr"]},i.createElement(V.T,{colSpan:{medium:1,large:1},rowSpan:{medium:1,large:1}},de(e,n))),me=(e,n)=>i.createElement(i.Fragment,null,"ProductVideoInfo"===e.__typename?i.createElement(i.Fragment,null,j?((e,n)=>"EMBED"===e.videoType?de(e,n):i.createElement(S.X,{blockSize:"full_size",justifyContent:"center",key:`BASIC-${n}`},ce(e,n)))(e,n):ce(e,n)):i.createElement(y.M,{key:n,ratio:j?y.l.R1_1:y.l.R16_9},i.createElement(F.F,{alt:e.alt,src:e.src}))),ge=Z.map((e,n)=>i.createElement(i.Fragment,null,j?i.createElement(S.X,{blockSize:"full_size",justifyContent:"center",direction:"column",key:n},i.createElement(P.C,null,me(e,n)),i.createElement(P.C,null,i.createElement(c.N,{padding:{block:"four",inline:"four"}},"ProductVideoInfo"===e.__typename?re(e):i.createElement(w.D,{theme:"inverse",overflow:"wrap","data-stid":"mweb-media-gallery-caption"},oe(e))))):me(e,n))),ve=J?i.createElement(S.X,{alignItems:"center",blockSize:"full_size",justifyContent:"end"},i.createElement(P.C,{grow:1},i.createElement(S.X,{alignItems:"center",blockSize:"full_size",justifyContent:(null==(n=null==G?void 0:G.button)?void 0:n.primary)?"end":"center"},i.createElement(P.C,null,i.createElement(c.N,{margin:(null==(t=null==G?void 0:G.button)?void 0:t.primary)?{inlinestart:"sixteen"}:{inline:"four"},padding:{inlinestart:"twelve"}},i.createElement(w.D,{theme:"inverse",weight:"medium",size:400,"data-stid":"desktop-image-count"},`${String(K+1)}/${String(Z.length)}`))))),(null==(a=null==G?void 0:G.button)?void 0:a.primary)&&i.createElement(P.C,{grow:1},i.createElement(S.X,{alignItems:"center",blockSize:"full_size",justifyContent:"end"},i.createElement(P.C,null,i.createElement(c.N,{margin:{inlineend:"four"}},i.createElement("div",null,i.createElement(Be,{data:G,onClickHandler:ie}))))))):null,ke=J?null:i.createElement(c.N,{padding:{inline:"six"}},i.createElement(w.D,{theme:"inverse",size:400,weight:"medium","data-stid":"mweb-tabweb-image-count"},`${String(K+1)}/${String(Z.length)}`));return i.createElement(H.t,{isVisible:I,type:"full",triggerRef:L,theme:"dark"},i.createElement(Q.b,{overlay:!0,navigationContent:{navButtonId:"UitkMediaGalleryImageToolbar",navType:(ye=null==(o=null==(l=null==A?void 0:A.toolbar)?void 0:l.icon)?void 0:o.id,"arrow_back"===ye?"back":"close"),navIconLabel:null==(m=null==(d=null==A?void 0:A.toolbar)?void 0:d.icon)?void 0:m.description,onClick:E,onClickAnalytics:ne},toolbarActionContent:ke,toolbarSubtitle:ve}),i.createElement(U.Y,{padded:!1},i.createElement(S.X,{direction:"column",blockSize:"full_size"},i.createElement(k.LM,null,i.createElement(k.NP,null,i.createElement(i.Fragment,null,i.createElement(P.C,null,i.createElement(c.N,{padding:{blockstart:"twelve"}},i.createElement(f._N,{...ae,carouselRef:le,fullSheetVisible:I,startIndex:q,stretchToFill:!0},ge))),(null==(s=null==G?void 0:G.button)?void 0:s.primary)&&i.createElement(P.C,null,i.createElement(c.N,{padding:{blockstart:"four",blockend:"eight",inline:"three"}},i.createElement(S.X,{direction:"column",alignItems:"center"},i.createElement(P.C,null,i.createElement(Be,{data:G,onClickHandler:ie}))))))),i.createElement(k.rw,null,i.createElement(i.Fragment,null,i.createElement(P.C,null,i.createElement(c.N,{padding:{blockstart:"twelve"}},i.createElement(f._N,{...ae,carouselRef:le,fullSheetVisible:I,startIndex:q},ge))),i.createElement(P.C,null,i.createElement(c.N,{padding:{blockend:"eight",inline:"three"}},i.createElement(S.X,{direction:"column",alignItems:"center"},i.createElement(P.C,null,i.createElement(c.N,{margin:{blockstart:"four"}},i.createElement(B.w,{columns:[(0,z.l)("600px")]},i.createElement(V.T,null,"ProductVideoInfo"===(null==(u=null==Z?void 0:Z[K])?void 0:u.__typename)?re(null==Z?void 0:Z[K]):i.createElement(w.D,{theme:"inverse",overflow:"wrap",size:400,align:"center","data-stid":"tabweb-media-gallery-caption"},oe(null==Z?void 0:Z[K])))))),(null==(g=null==G?void 0:G.button)?void 0:g.primary)&&i.createElement(P.C,null,i.createElement(c.N,{margin:{blockstart:"eight"}},i.createElement("div",null,i.createElement(Be,{data:G,onClickHandler:ie}))))))))),i.createElement(k.zQ,null,i.createElement(i.Fragment,null,i.createElement(P.C,null,i.createElement(c.N,{margin:{blockstart:"sixteen"},padding:{blockstart:"four",inline:"three"}},i.createElement(f._N,{...ae,pagingPersistent:!0,fullSheetVisible:I,startIndex:q},ge))),i.createElement(P.C,null,i.createElement(c.N,{padding:{blockend:"eight",inline:"three"}},i.createElement(S.X,{direction:"column",alignItems:"center"},i.createElement(P.C,null,i.createElement(c.N,{margin:{block:"eight"}},i.createElement(B.w,{columns:[(0,z.l)("720px")]},i.createElement(V.T,null,"ProductVideoInfo"===(null==(v=null==Z?void 0:Z[K])?void 0:v.__typename)?re(null==Z?void 0:Z[K]):i.createElement(w.D,{theme:"inverse",overflow:"wrap",size:400,align:"center","data-stid":"desktop-media-gallery-caption"},oe(null==Z?void 0:Z[K])," "))))))))))))));var ye};ze.displayName="MediaGalleryDialog",ze.fragment=Ve;var He="Selected gallery tab",Ue="Launch Thumbnail Gallery From Image Click",Qe="HOT.HIS.Gallery",$e="HOT.HIS.ClickThumbnailImage",Ye={xl:8,lg:8,md:8,sm:8},qe={PILLS_SHOW_OFFSET:40,PILLS_HIDE_OFFSET:30,PILLS_SENSITIVITY:5,COLLAPSIBLE_MINIFY:120,COLLAPSIBLE_EXPAND:10,COLLAPSIBLE_SENSITIVITY:10,CAROUSEL_MARGIN:32,get PILLS_SHOW_THRESHOLD(){return 140+this.CAROUSEL_MARGIN+this.PILLS_SHOW_OFFSET},get PILLS_HIDE_THRESHOLD(){return 140+this.CAROUSEL_MARGIN+this.PILLS_HIDE_OFFSET}},Ke=(e,n,t)=>{const a=(0,r.KY)(),[l,o]=i.useState(n>=0||!(null==e?void 0:e.length)?n:0),d=i.useCallback(n=>{var t;if(e){const i=n>=0?null==(t=e[n])?void 0:t.categoryName:"";a(`${Qe}.${i}.${n}`,He)}},[e,a]),c=i.useCallback((e,n)=>{d(e);const i=()=>{var i;o(e),t&&t(e),null==(i=null==n?void 0:n.callback)||i.call(n)};(null==n?void 0:n.immediate)?i():setTimeout(i,200)},[d,t]);return{currentLocalCategoryIndex:l,setCurrentLocalCategoryIndex:o,handleCategorySelect:c,trackCategorySelection:d}},We=(e,n)=>{const[t,a]=i.useState([]);i.useEffect(()=>{const t=new Array(e).fill(!1);n>-1?t[n]=!0:e>0&&(t[0]=!0),a(t)},[e,n]);const l=i.useCallback(e=>{const n=new Array(t.length).fill(!1);n[e]=!0,a(n)},[t.length]);return{isPillSelected:t,setIsPillSelected:a,updatePillSelection:l}},Xe=(e,n,t,a=5)=>{const[l,r]=i.useState(!1);return i.useEffect(()=>{if(!(null==e?void 0:e.current))return;const i=e.current.offsetParent;if(!i)return;let o=null,d=-1;const c=()=>{o||(o=requestAnimationFrame(()=>{const e=i.scrollTop;if(Math.abs(e-d)<a)return void(o=null);d=e;const c=e>n,m=e<t;c||m?(!l&&c?r(!0):l&&m&&r(!1),o=null):o=null}))};return i.addEventListener("scroll",c,{passive:!0}),c(),()=>{o&&cancelAnimationFrame(o),i.removeEventListener("scroll",c)}},[l,e,n,t,a]),l},je=e=>{var n,t;null==(t=null==(n=null==e?void 0:e.current)?void 0:n.offsetParent)||t.scrollTo({top:0,left:0,behavior:"smooth"})},Je={peek:!0,pagingInset:!0,naturalWidthItems:!0,innerSpacing:{xl:16,lg:16,md:16,sm:16},buttonText:{nextButton:"Next category",prevButton:"Previous category"},carouselName:"Category Carousel",navigationIconId:{next:"next-button",prev:"prev-button"},itemsGap:Ye},Ze=({media:e,onImageSelected:n,columns:t,space:a,imagesRatio:l,focusIndex:o,containerRef:d,propertyId:m,categoryId:s,thumbnailQuality:u})=>{if(!(null==e?void 0:e.length))return null;const g=(e,t)=>i.createElement(E.P,{cloneElement:!0,type:"relative"},i.createElement("div",null,"ProductVideoInfo"!==e.__typename?i.createElement(re.e,{...e,index:t,imagesRatio:l,onImageSelected:()=>n(t),focusIndex:o,containerRef:d}):i.createElement(i.Fragment,null,((e,t)=>e.analyticsPayload?i.createElement(r.E0,{eventData:(0,x.Ft)("video.presented",e.analyticsPayload,pe)},i.createElement(Pe,{data:e,onThumbnailClick:()=>n(t),onPlayClick:()=>n(t),index:t,fetchPriority:0===t?"high":void 0,componentName:pe,isThumbnailView:!0,isPlayIconVisible:!0,isDurationVisible:!0,isCreatorInfoVisible:!0,thumbnailQuality:u,thumbnailAspectRatio:l})):i.createElement(Pe,{data:e,onThumbnailClick:()=>n(t),onPlayClick:()=>n(t),index:t,fetchPriority:0===t?"high":void 0,componentName:pe,isThumbnailView:!0,isPlayIconVisible:!0,isDurationVisible:!0,isCreatorInfoVisible:!0,thumbnailQuality:u,thumbnailAspectRatio:l}))(e,t))));return i.createElement(le.y,{bullet:"no-bullet",spacing:!1},i.createElement(B.w,{columns:t,space:a},i.createElement(i.Fragment,null,e.map((n,t)=>((n,t)=>i.createElement(V.T,{key:t},i.createElement("div",{"data-stid":"media-thumbnail-view-with-label"},i.createElement(r.ee,{trackOnce:!0,referrerId:`HOT.HIS.ThumbnailImageImpression.${s?`${s}.`:""}${t}`,linkName:"Thumbnail Image Impression",additionalUisPrimeMicroMessages:se(t,n.trackingId,e.length,n.imageId,m,"PDP_FULL_IMAGE_GALLERY",s)},g(n,t)),i.createElement(c.N,{margin:{blockstart:"two",blockend:"three"}},i.createElement(w.D,{align:"left",overflow:"wrap","aria-hidden":"true"},"ProductVideoInfo"!==n.__typename?n.displayCaption:n.caption.text)))))(n,t)))))};Ze.displayName="MediaGalleryThumbnailView";var en=({category:e,mediaContent:n,onImageClick:t,categoryIndex:a=0,imageIndexState:l,propertyId:o,isFallback:d,showImageNumberOnCategoryHeading:m=!1,onThumbnailGalleryButtonClick:s,thumbnailQuality:u,travelSearchCriteria:g,reviewOverlay:v,setRef:y})=>{const[p]=l,b=(0,r.KY)(),I=i.useCallback(e=>{if(e){const{linkName:n,referrerId:t}=e;b(t,n)}s&&s()},[b,s]),S=i.useCallback(i=>{var l,r,d,c,m,s,u;if(a){const{categoryId:n,images:c=[]}=e||{},{trackingId:m,imageId:s}=(null==(l=c[i])?void 0:l.analytics)||{},u=null==(d=null==(r=c[i])?void 0:r.image)?void 0:d.analytics,g=c.length;b(`${$e}.${n}.${i}`,Ue,void 0,se(i,m,g,s,o,"PDP_FULL_IMAGE_GALLERY")),u&&b(null==u?void 0:u.referrerId,null==u?void 0:u.linkName),t(i,a)}else{if("ProductImageInfo"===(null==(c=null==n?void 0:n[i])?void 0:c.__typename)){const{trackingId:e,imageId:t}="ProductImageInfo"===(null==n?void 0:n[i].__typename)&&(null==(m=n[i])?void 0:m.analytics)||{},a="ProductImageInfo"===(null==n?void 0:n[i].__typename)&&(null==(u=null==(s=n[i])?void 0:s.image)?void 0:u.analytics);b(`${$e}.${i}`,Ue,void 0,se(i,e,n.length,t,o,"PDP_FULL_IMAGE_GALLERY")),a&&b(null==a?void 0:a.referrerId,null==a?void 0:a.linkName)}t(i,a)}},[a,t,e,b,n,o]),E=i.useCallback((e,n,t)=>i.createElement(Ze,{imagesRatio:ie.l.R16_9,media:e,onImageSelected:S,columns:n,space:"three",focusIndex:p,propertyId:o,categoryId:t,travelSearchCriteria:g,thumbnailQuality:u}),[S,p,o]),f=i.useCallback((n,t,l,r,o,m,s)=>{const{analytics:u,primary:g,accessibility:v}=(null==s?void 0:s.button)||{},k=i.createElement(i.Fragment,null,t&&i.createElement(c.N,{padding:{blockend:"three"}},i.createElement(ae.M,{tag:m,size:o,id:`category-${a}`},i.createElement("div",{ref:y?y(a):void 0},t))),g&&i.createElement(c.N,{margin:{blockend:"three"}},i.createElement(te.y,{"data-stid":"category-gallery-button","aria-label":null!=v?v:void 0,size:h.V.MEDIUM,onClick:()=>I(u)},g)),E(n,r,l));if(e||d)return i.createElement(c.N,{padding:{blockend:"three",small:{inline:"three"},medium:{inline:"three"}}},i.createElement("div",null,k))},[E,a]),N=i.useCallback((e,n,t,a)=>i.createElement(k.LM,null,i.createElement(k.NP,null,f(e,n,t,1,5,"h4",a)),i.createElement(k.rw,null,f(e,n,t,2,4,"h3",a)),i.createElement(k.zQ,null,f(e,n,t,2,4,"h3",a))),[f]),F=i.useCallback(e=>{if(!(null==v?void 0:v.hideButton)||v.categoryIndex!==a)return e},[v,a]);return i.createElement(i.Fragment,null,(()=>{if(d)return N(ge(n));if(e){const n=e.categoryContent?e.categoryContent.length:e.images.length,t=m?`${null==e?void 0:e.categoryName} (${n})`:null==e?void 0:e.categoryName;return N(ge(e.categoryContent||e.images),t,e.categoryId,F(e.galleryButton||void 0))}})())},nn=({categories:e,mediaContent:n,onImageClick:t,categoryIndexState:a,imageIndexState:l,propertyId:r,refGallery:o,onCategorySelect:d,onThumbnailGalleryButtonClick:m,thumbnailQuality:s,travelSearchCriteria:u,reviewOverlay:g})=>{const[v]=a,k=i.useRef(null),{currentLocalCategoryIndex:p,handleCategorySelect:b}=Ke(e,v,d),{isPillSelected:I,updatePillSelection:S}=We(e.length,v),[h,N]=i.useState(null),C=Xe(o,qe.PILLS_SHOW_THRESHOLD,qe.PILLS_HIDE_THRESHOLD,qe.PILLS_SENSITIVITY);i.useEffect(()=>{var e;null!==h&&p===h&&(je(o),null==(e=k.current)||e.changeIndex(p),N(null))},[p,h,o]);const P=i.useCallback(e=>{S(e),b(e),N(e)},[S,b]),T=i.createElement(i.Fragment,null,i.createElement(E.P,{type:"sticky",position:{top:"minus-half",zindex:"layer2"}},i.createElement(Z.m,{isShow:C,type:"slide-vertical",unmountOnExit:!0},i.createElement(ne.s,{layout:"fullwidth",canvasTheme:"primary",paddedViewRow:!1,maxWidth:!0},i.createElement(c.N,{padding:{block:"four"}},i.createElement(f._N,{...(_=p,{...Je,startIndex:_,itemsGap:Ye})},e.map((e,n)=>{var t;return i.createElement(J.B,{key:`thumbail-gallery-pill-${n}`,id:`thumbail-gallery-pill-${n}`,checked:I[n],onChange:()=>P(n),value:null==e?void 0:e.categoryName,altText:null!=(t=null==e?void 0:e.accessibilityLabel)?t:""},e.categoryName)})))))),(()=>{return i.createElement("div",null,i.createElement(c.N,{margin:{block:"four"}},i.createElement(f._N,{...(n=p,{...Je,startIndex:n}),carouselRef:k},e.map((e,n)=>{var t,a,l,r;return i.createElement(i.Fragment,null,i.createElement(c.N,{margin:{blockend:"two"},key:n},i.createElement(ee.V,{key:n,selected:p===n,dimensions:{height:140,width:140},accessibilityText:(null==e?void 0:e.accessibilityLabel)||""},i.createElement(y.M,{ratio:y.l.R1_1},i.createElement(F.F,{alt:(null==(a=null==(t=e.images[0])?void 0:t.image)?void 0:a.description)||"",src:null==(r=null==(l=e.images[0])?void 0:l.image)?void 0:r.url,placeholderImage:!0})),i.createElement(j.w,null,i.createElement("button",{type:"button",onClick:()=>{P(n)}})))),i.createElement(w.D,{size:300,weight:"medium",align:"center"},null==e?void 0:e.categoryName))}))));var n})(),e.map((e,a)=>((e,a)=>{if(a===p)return i.createElement(en,{category:e,mediaContent:n,onImageClick:t,showImageNumberOnCategoryHeading:!0,propertyId:r,isFallback:!1,imageIndexState:l,categoryIndex:a,travelSearchCriteria:u,onThumbnailGalleryButtonClick:m,thumbnailQuality:s,reviewOverlay:g})})(e,a)));var _;return i.createElement(i.Fragment,null,T)},tn=({categories:e,mediaContent:n,onImageClick:t,categoryIndexState:a,imageIndexState:l,propertyId:r,refGallery:o,onCategorySelect:d,onThumbnailGalleryButtonClick:m,thumbnailQuality:s,travelSearchCriteria:u,reviewOverlay:g})=>{const[v]=a,k=i.useRef(null),[p,b]=i.useState(null),{currentLocalCategoryIndex:I,handleCategorySelect:h}=Ke(e,v,d),N=Xe(o,qe.COLLAPSIBLE_MINIFY,qe.COLLAPSIBLE_EXPAND,qe.COLLAPSIBLE_SENSITIVITY);i.useEffect(()=>{null!==p&&I===p&&(je(o),b(null))},[I,p,o]);const C=i.useCallback(e=>{h(e),b(e)},[h]),L=i.createElement(i.Fragment,null,i.createElement(E.P,{type:"sticky",position:{top:"minus-half",zindex:"layer2"},display:"block"},i.createElement(E.P,{type:"relative"},i.createElement(c.N,{padding:{block:"four"},margin:{blockend:"four"}},i.createElement(ne.s,{layout:"fullwidth",canvasTheme:"primary",paddedViewRow:!1,maxWidth:!0},i.createElement(f._N,{...{...Je},carouselRef:k},e.map((e,n)=>{var t;const a=null==e?void 0:e.categoryName,l=null==(t=null==e?void 0:e.images[0])?void 0:t.image;return i.createElement(ee.V,{expanded:!N,selected:I===n,key:n,accessibilityText:(null==e?void 0:e.accessibilityLabel)||""},i.createElement(y.M,{ratio:y.l.R1_1},i.createElement(F.F,{src:null==l?void 0:l.url,alt:(null==l?void 0:l.description)||"",placeholderImage:!0}),i.createElement(T.O,{type:_.Q.BOTTOM},i.createElement(c.N,{margin:{blockend:"one"}},i.createElement(S.X,{alignItems:"center",direction:"column",justifyContent:"center"},i.createElement(P.C,null,i.createElement(w.D,{size:300,weight:"medium"},a)))))),i.createElement(j.w,null,i.createElement("button",{type:"button",onClick:()=>{C(n)}})))})))))),e.map((e,a)=>((e,a)=>{if(a===I)return i.createElement(en,{category:e,mediaContent:n,onImageClick:t,propertyId:r,imageIndexState:l,isFallback:!1,categoryIndex:a,travelSearchCriteria:u,onThumbnailGalleryButtonClick:m,thumbnailQuality:s,reviewOverlay:g,showImageNumberOnCategoryHeading:!0})})(e,a)));return i.createElement(i.Fragment,null,L)},an=({categories:e,mediaContent:n,onImageClick:t,categoryIndexState:a,imageIndexState:l,propertyId:r,refGallery:o,refContent:d,isSmallView:m,onCategorySelect:s,onThumbnailGalleryButtonClick:u,thumbnailQuality:g,travelSearchCriteria:v,reviewOverlay:k})=>{const[y]=a,p=i.useRef(null),b=i.useRef({}),I=i.useRef(null),{currentLocalCategoryIndex:h,handleCategorySelect:f}=Ke(e,y,s),{isPillSelected:N,updatePillSelection:F}=We((null==e?void 0:e.length)||0,y),C=e=>n=>{b.current[e]=n},P=i.useCallback(e=>{F(e),f(e,{immediate:!0,callback:()=>{var n,t,i;const a=(null==(n=b.current[e])?void 0:n.offsetTop)||0,l=(null==(i=null==(t=I.current)?void 0:t.offsetParent)?void 0:i.clientHeight)||0;((e,n,t=0)=>{var i,a;null==(a=null==(i=null==e?void 0:e.current)?void 0:i.offsetParent)||a.scrollTo(0,n-t)})(o,a,l)}})},[F,f,o]),T=(e,a)=>{if(a===h)return i.createElement(en,{category:e,mediaContent:n,onImageClick:t,propertyId:r,imageIndexState:l,isFallback:!1,categoryIndex:a,travelSearchCriteria:v,onThumbnailGalleryButtonClick:u,thumbnailQuality:g,reviewOverlay:k,setRef:C})},_=i.createElement(i.Fragment,null,i.createElement(E.P,{type:"sticky",position:{top:"zero",zindex:"layer2"},display:"block"},i.createElement(c.N,{padding:{small:{block:"one",inline:"three"},large:{block:"three"}}},i.createElement(ne.s,{layout:"fullwidth",paddedViewRow:!1,canvasTheme:"primary"},i.createElement("div",{ref:I},i.createElement(oe.v,{direction:"horizontal"},i.createElement(c.N,{padding:{small:{block:"three"},large:{block:"one"}}},i.createElement(E.P,{type:"relative"},i.createElement(S.X,null,null==e?void 0:e.map((e,n)=>{var t;const a=((e,n=!1)=>{const t=(null==e?void 0:e.categoryName)||"";if(!n)return t;const i=(e=>e.categoryContent?e.categoryContent.length:e.images.length)(e);return`${t} (${i})`})(e,!0);return i.createElement(J.B,{key:`thumbail-gallery-pill-${n}`,id:`thumbail-gallery-pill-${n}`,checked:N[n],onChange:()=>P(n),value:null==e?void 0:e.categoryName,altText:null!=(t=null==e?void 0:e.accessibilityLabel)?t:""},a)}))))))))),m?i.createElement(B.w,{blockSize:"85vb"},i.createElement(oe.v,{direction:"vertical"},e.map((e,n)=>T(e,n)))):e.map((e,n)=>T(e,n)));return i.createElement(i.Fragment,null,i.createElement("div",{ref:p}),i.createElement(E.P,{type:"sticky",position:{top:"zero",zindex:"layer2"},cloneElement:!0},_))},ln={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ThumbnailGalleryDialogFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categorizedImages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categoryId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"categoryName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientSideAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categoryContent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductImageFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ProductVideoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"galleryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UISecondaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"thumbnailGalleryDialog"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toolbar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"trigger"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"primaryButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UIPrimaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"targetRef"},arguments:[],directives:[]}]}}]}}]}}].concat(Re.fragment.definitions,Pe.fragment.definitions)),loc:{start:0,end:1082,source:{body:"\n  fragment ThumbnailGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...ProductImageFragment\n      }\n      categoryContent {\n        ...ProductImageFragment\n        ...ProductVideoFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    thumbnailGalleryDialog {\n      toolbar {\n        title\n        icon {\n          id\n          description\n        }\n      }\n      trigger {\n        accessibilityLabel\n        value\n      }\n      primaryButton {\n        button {\n          ... on UIPrimaryButton {\n            primary\n            accessibility\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n        targetRef\n      }\n    }\n  }\n  \n  \n".concat([Re.fragment.loc.source.body,Pe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},rn=e=>{var n,t,a,l,o,d,m,s,u;const{data:v,allMediaContent:y,isDialogOpen:p,onDialogDismiss:b,onImageClick:I,categoryIndexState:S,imageIndexState:h,triggerRef:f,propertyId:N,onThumbnailGalleryButtonClick:F,thumbnailQuality:C,travelSearchCriteria:P,reviewOverlay:T}=e,{categorizedImages:_,thumbnailGalleryDialog:L}=v,x="UIPrimaryButton"===(null==(n=null==L?void 0:L.primaryButton)?void 0:n.button.__typename)?null==(t=null==L?void 0:L.primaryButton)?void 0:t.button:void 0,{scrollTo:D}=(0,g.xC)(),{ref:R,inView:A,entry:G}=(0,$.Wx)({threshold:0}),[,M]=(0,i.useState)(!1),[O,B]=S,V=i.useRef(null),z=(0,r.KY)();(0,i.useEffect)(()=>{!A&&(null==G?void 0:G.target)&&M(!0)},[A,null==G?void 0:G.target]);const Q=()=>{if("UIPrimaryButton"===(null==x?void 0:x.__typename)&&(null==x?void 0:x.analytics)){const{linkName:e,referrerId:n}=x.analytics;z(`${n}.Thumbnail_Gallery`,e)}setTimeout(()=>{b(),setTimeout(()=>{var e;const n=null==(e=null==L?void 0:L.primaryButton)?void 0:e.targetRef;n&&D(n,[{sectionName:"navigation"}])},500)},300)},j=x&&i.createElement(c.N,{padding:{blockend:"two"}},i.createElement(E.P,{type:"absolute",position:{bottom:"six",left:"center",zindex:"layer1"}},i.createElement(Y.W,{onClick:Q,"aria-label":"UIPrimaryButton"===(null==x?void 0:x.__typename)&&null!=(a=x.accessibility)?a:""},x.primary))),J=x&&"UIPrimaryButton"===(null==x?void 0:x.__typename)&&i.createElement(q.y,{"aria-label":null!=(l=null==x?void 0:x.accessibility)?l:"",onClick:Q},i.createElement(w.D,{whiteSpace:"nowrap",theme:"light"},x.primary)),Z={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close thumbnail gallery dialog",callback:(e,n)=>{var t,i,a;const[l]=h,r=null!=(a=null==(i=null==(t=_[O])?void 0:t.images)?void 0:i.length)?a:y.length;z(e,n,void 0,se(l,void 0,r,void 0,N,"PDP_FULL_IMAGE_GALLERY"))}},ee=L&&i.createElement(c.N,{padding:{inlineend:"three"}},i.createElement(K.p,{navigationContent:{onClick:b,onClickAnalytics:Z,navType:(null==T?void 0:T.isReviewOverlay)?T.id:(ne=null==(d=null==(o=null==L?void 0:L.toolbar)?void 0:o.icon)?void 0:d.id,"arrow_back"===ne?"back":ne),navIconLabel:(null==T?void 0:T.isReviewOverlay)?T.accessibility:null==(s=null==(m=L.toolbar)?void 0:m.icon)?void 0:s.description},toolbarTitle:(null==(u=L.toolbar)?void 0:u.title)||"",toolbarActionContent:i.createElement(k.LM,null,i.createElement(k.rw,null,i.createElement(i.Fragment,null,J)))}));var ne;const te={returnFocusOnClose:!0,isVisible:p,triggerRef:f},ie=e=>{B(e),M(!0)},ae=e=>i.createElement(i.Fragment,null,ee,i.createElement(U.Y,{padded:!1},i.createElement("div",{ref:V},(e=>{const n=!(null==_?void 0:_.length)||1===_.length,t={mediaContent:y,onImageClick:I,propertyId:N,imageIndexState:h,travelSearchCriteria:P,onThumbnailGalleryButtonClick:F,thumbnailQuality:C,reviewOverlay:T};if(n)return i.createElement(en,{...t,isFallback:n,categoryIndex:O});const a={...t,categories:_,categoryIndexState:S,refGallery:V,onCategorySelect:ie};return i.createElement(X.Experiment,{name:"Optimize_image_gallery_categories_web"},i.createElement(X.ExperimentControl,null,i.createElement(an,{...a,isSmallView:e,refContent:R})),i.createElement(X.ExperimentVariant,{bucket:1},i.createElement(nn,{...a})),i.createElement(X.ExperimentVariant,{bucket:2},i.createElement(tn,{...a})))})(e))));return i.createElement(k.LM,null,i.createElement(k.NP,null,i.createElement(H.t,{...te,type:"full"},ae(!0),j)),i.createElement(k.rw,null,i.createElement(W.R,{...te,centeredSheetSize:"xxxlarge",height:1200},ae(!1))))};rn.displayName="ThumbnailGalleryDialog",rn.fragment=ln;var on=(e,n)=>{const t=(e=>(0,i.useMemo)(()=>{var n,t,i,a;return(null==(t=null==(n=null==e?void 0:e.categorizedImages)?void 0:n.find(n=>n.categoryId===e.categoryIdAll))?void 0:t.categoryContent)||(null==(a=null==(i=null==e?void 0:e.categorizedImages)?void 0:i.find(n=>n.categoryId===e.categoryIdAll))?void 0:a.images)||[]},[e]))(e);return(0,i.useMemo)(()=>{if(!(null==n?void 0:n.length)||!t.length)return t;const e=t.map(e=>{var n,t,i;return{...e,baseUrl:null!=(i=(null!=(t=null==(n=e.lowResImage)?void 0:n.url)?t:e.image.url).split("?")[0])?i:""}}),i=n.map(e=>({...e,baseUrl:e.url.split("?")[0]})),a=i.reduce((e,n,t)=>({...e,[n.baseUrl]:t}),{}),l=i.reduce((e,n)=>({...e,[n.baseUrl]:n}),{});return[...[...e.filter(e=>l[e.baseUrl]).map(e=>{var n,t;return{...e,image:{...e.image,url:(null==(n=l[e.baseUrl])?void 0:n.url)||e.image.url},lowResImage:{...e.lowResImage,url:(null==(t=l[e.baseUrl])?void 0:t.url)||""}}})].sort((e,n)=>(a[e.baseUrl]||-1)-(a[n.baseUrl]||-1)).map(({baseUrl:e,...n})=>n),...t.filter((n,t)=>{var i,a;return!l[null!=(a=null==(i=e[t])?void 0:i.baseUrl)?a:""]})]},[t,n])},dn=(e,n,t,a,l,r)=>(0,i.useCallback)((i,o)=>{r.current=document.activeElement,e(o),n(i),o<0&&a(i),l(i),t.openDialog()},[e,n,t,a,l]),cn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ProductGalleryImageContainerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductImageGallery"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MosaicContainerFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"CarouselContainerFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"MediaGalleryDialogFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ThumbnailGalleryDialogFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GalleryButtonsFragment"},directives:[]}]}}].concat(Oe.fragment.definitions,Ge.fragment.definitions,ze.fragment.definitions,rn.fragment.definitions,ke.fragment.definitions)),loc:{start:0,end:259,source:{body:"\n  fragment ProductGalleryImageContainerFragment on ProductImageGallery {\n    ...MosaicContainerFragment\n    ...CarouselContainerFragment\n    ...MediaGalleryDialogFragment\n    ...ThumbnailGalleryDialogFragment\n    ...GalleryButtonsFragment\n  }\n  \n  \n  \n  \n  \n".concat([Oe.fragment.loc.source.body,Ge.fragment.loc.source.body,ze.fragment.loc.source.body,rn.fragment.loc.source.body,ke.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},mn=({propertyId:e,data:n,placeholderData:t,className:a,travelSearchCriteria:l,autoplay:r,autoplayInterval:o,onClickSeeAllReviewsButton:y,isLuxuryProperty:p,showLuxuryRibbon:b=!0,isEnlargedAspectRatio:I})=>{var S,E,h,f;const[N,F,C]=(0,u.useDialog)("media-gallery","pwaDialogNested"),[P,T,_]=(0,u.useDialog)("thumbnail-gallery","pwaThumbnailDialog"),L=(0,k.s5)({[k.OB.SMALL]:!0,[k.OB.MEDIUM]:!1,[k.OB.LARGE]:!1}),x=i.useRef(null),D=i.useRef(null),R=i.useState(0),A=i.useState(-1),G=i.useState(0),M=i.useState(0),[,O]=R,[,w]=A,[,B]=G,[,V]=M,[z,H]=i.useState({}),{scrollTo:U}=(0,g.xC)(),Q=on(n,t),$=i.useCallback(e=>{O(e),w(-1),x.current=document.activeElement,T.openDialog()},[T,w,O]),Y=i.useCallback(e=>{window.open(e)},[]),q=i.useCallback(()=>{w(-1),T.openDialog()},[T,w]),K=dn(w,B,F,O,V,D),W=i.useCallback((e,n)=>{K(e,n)},[K]),X=i.useCallback((e=-1)=>{const n=document.activeElement;x.current=n,O(0),w(e),T.openDialog()},[T,O,w]);(0,s._H)("OPEN_GUEST_IMAGES_REVIEWS_OVERLAY",v.v0,{onSuccess(e){var t,i,a;const l=(null==(t=null==n?void 0:n.categorizedImages)?void 0:t.findIndex(e=>"Guest photos"===e.categoryId))||-1;H({isReviewOverlay:e.payload.message,id:null==(i=e.payload.icon)?void 0:i.id,accessibility:null==(a=e.payload.icon)?void 0:a.accessibility,hideButton:!0,categoryIndex:l}),X(l)}}),(0,s._H)("OPEN_GUEST_IMAGES_REVIEWS_OVERVIEW",v.mn,{onSuccess(){var e;const t=(null==(e=null==n?void 0:n.categorizedImages)?void 0:e.findIndex(e=>"Guest photos"===e.categoryId))||-1;H({hideButton:!0,categoryIndex:t}),X(t)}}),(0,s._H)("OPEN_GUEST_IMAGE",v.sD,{onSuccess(e){var t;const i=(null==(t=null==n?void 0:n.categorizedImages)?void 0:t.findIndex(e=>"Guest photos"===e.categoryId))||-1;K(e.payload.index,i)}});const j=i.useCallback(()=>{T.closeDialog(),setTimeout(()=>{var e;null==(e=x.current)||e.focus(),H({})},0)},[T]),J=i.useCallback(()=>{F.closeDialog(),setTimeout(()=>{var e;null==(e=D.current)||e.focus()},0)},[F]),Z=i.useCallback(e=>{J(),requestAnimationFrame(()=>{j()}),e&&setTimeout(()=>{U(e,[{sectionName:"navigation"}])},500)},[U,J,j]);if(!n||!Q.length)return null;const ee={imageIndexState:R,categoryImageIndexState:G,categoryIndexState:A},ne={onTriggerClick:X,onVirtualTourClick:Y,thumbnailDialogTriggerTitle:null==(E=null==(S=null==n?void 0:n.thumbnailGalleryDialog)?void 0:S.trigger)?void 0:E.value,thumbnailDialogTriggerAccessibilityLabel:null==(f=null==(h=null==n?void 0:n.thumbnailGalleryDialog)?void 0:h.trigger)?void 0:f.accessibilityLabel,propertyId:e,data:n,allImages:Q,...ee},te=e=>i.createElement(Oe,{onImageClick:e=>$(e),imagesToShow:e,...ne,onPlayButtonClick:W,thumbnailQuality:L?"LOW":"MEDIUM",isEnlargedAspectRatio:I}),ie=i.createElement(Ge,{onImageClick:q,...ne,autoplay:r,autoplayInterval:o,onPlayButtonClick:W,thumbnailQuality:L?"LOW":"MEDIUM",isEnlargedAspectRatio:I}),ae=t=>i.createElement(i.Fragment,null,te(t),i.createElement(ke,{data:n,onThumbnailGalleryClick:ne.onTriggerClick,onVirtualTourClick:Y,thumbnailButtonText:ne.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:ne.thumbnailDialogTriggerAccessibilityLabel,propertyId:e})),le=i.createElement(i.Fragment,null,i.createElement(d.K,{isVisible:P},i.createElement(_,null,i.createElement(rn,{allMediaContent:Q,data:n,isDialogOpen:P,onDialogDismiss:j,onImageClick:K,triggerRef:x,propertyId:e,onThumbnailGalleryButtonClick:y,thumbnailQuality:L?"LOW":"MEDIUM",travelSearchCriteria:l,reviewOverlay:z,...ee}))),i.createElement(d.K,{isVisible:N},i.createElement(C,null,i.createElement(ze,{allMediaContent:Q,data:n,isDialogOpen:N,onDialogDismiss:J,propertyId:e,mediaGalleryStartIndexState:M,triggerRef:D,onReserveButtonClick:Z,...ee})))),re=i.createElement(k.LM,null,i.createElement(k.NP,null,ie),i.createElement(k.rw,null,ae(3)),i.createElement(k.zQ,null,ae(5))),oe=i.createElement(i.Fragment,null,i.createElement(k.LM,null,i.createElement(k.NP,null,ie),i.createElement(k.rw,null,i.createElement(i.Fragment,null,te(3),i.createElement(ke,{data:n,onThumbnailGalleryClick:ne.onTriggerClick,onVirtualTourClick:Y,thumbnailButtonText:ne.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:ne.thumbnailDialogTriggerAccessibilityLabel,propertyId:e}))),i.createElement(k.zQ,null,i.createElement(i.Fragment,null,te(5),i.createElement(ke,{data:n,onThumbnailGalleryClick:ne.onTriggerClick,onVirtualTourClick:Y,thumbnailButtonText:ne.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:ne.thumbnailDialogTriggerAccessibilityLabel,propertyId:e})))),b&&i.createElement("div",{"aria-hidden":"true"},i.createElement(m.EGDSThemeProvider,{config:{lightMode:{colorTheme:"bright-1"},color:{isColorThemeContainer:!0}}},i.createElement(c.N,{padding:"half"},i.createElement("div",{"data-stid":"luxury-ribbon"})))));return i.createElement("div",{className:a},p?oe:re,le)};mn.displayName="ProductGalleryImageContainer",mn.fragment=cn;var sn=({images:e,isLuxuryProperty:n})=>{const t=(()=>{const[e,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{n(!0)},[]),e})();return i.createElement(i.Fragment,null,t?i.createElement(vn,{images:e,isLuxuryProperty:n}):i.createElement(kn,{images:e,isLuxuryProperty:n}))},un=({additionalImage:e,className:n,style:t,isLuxuryProperty:a,isMobile:l})=>{const r=l?y.l.R3_2:y.l.R16_9;return i.createElement(y.M,{ratio:a?y.l.R16_9:r,className:n,style:t},i.createElement(F.F,{placeholderImage:!0,src:null==e?void 0:e.url,alt:null==e?void 0:e.description,additionalProps:{fetchPriority:(null==e?void 0:e.url)?"high":void 0}}))},gn=e=>{const n=({images:e,isLuxuryProperty:n})=>i.createElement(k.LM,null,i.createElement(k.NP,null,i.createElement(un,{additionalImage:null==e?void 0:e[0],isMobile:!0})),i.createElement(k.rw,null,i.createElement(B.w,{rows:2,columns:3,space:"half"},Array.from(Array(3)).map((t,a)=>i.createElement(V.T,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:`gallery-placeholder-${a}`},i.createElement(un,{additionalImage:null==e?void 0:e[a],isLuxuryProperty:n}))))),i.createElement(k.zQ,null,i.createElement(B.w,{rows:2,columns:4,space:"half"},Array.from(Array(5)).map((t,a)=>i.createElement(V.T,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:`gallery-placeholder-${a}`},i.createElement(un,{additionalImage:null==e?void 0:e[a],isLuxuryProperty:n}))))));return n.displayName=e,n},vn=gn("CsrPlaceholder"),kn=gn("SsrPlaceholder"),yn={kind:"Document",definitions:de([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ProductGalleryQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProductIdentifierInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productGallery"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"productIdentifier"},value:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductGalleryImageContainerFragment"},directives:[]}]}}]}}].concat(mn.fragment.definitions)),loc:{start:0,end:240,source:{body:"\n  query ProductGalleryQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productGallery(context: $context, productIdentifier: $productIdentifier) {\n      ...ProductGalleryImageContainerFragment\n    }\n  }\n\n  \n".concat([mn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},pn=({inputs:e,skipSsr:n,placeholderData:t,batchKey:d=ce,onClickSeeAllReviewsButton:c,autoplay:m,autoplayInterval:s,prefetchedData:u,isLuxuryProperty:g,showLuxuryRibbon:v,isEnlargedAspectRatio:k})=>{var y,p,b,I,S,E;const{context:h}=(0,l.R)(),f={...e,context:h},N=(0,o.kY)(),{data:F,loading:C}=(0,a.IT)(yn,{context:{batchKey:d,shouldLogPerformance:!0},variables:f,ssr:!n,errorPolicy:"all",skip:(null==(y=null==N?void 0:N.product)?void 0:y.productGallery)||u}),P=null!=(b=null!=u?u:null==(p=null==N?void 0:N.product)?void 0:p.productGallery)?b:null==F?void 0:F.productGallery,T=null==(E=null==(S=null==(I=null==F?void 0:F.productGallery)?void 0:I.categorizedImages)?void 0:S.find(e=>"Guest photos"===e.categoryId))?void 0:E.clientSideAnalytics,_=i.createElement(mn,{propertyId:e.productIdentifier.id,data:P,placeholderData:t,shoppingContext:e.productIdentifier.shoppingContext,travelSearchCriteria:e.productIdentifier.travelSearchCriteria,onClickSeeAllReviewsButton:c,autoplay:m,autoplayInterval:s,isLuxuryProperty:g,showLuxuryRibbon:v,isEnlargedAspectRatio:k});return i.createElement(i.Fragment,null,C&&i.createElement(sn,{images:t,isLuxuryProperty:g}),T?i.createElement(r.ee,{referrerId:T.referrerId,linkName:T.linkName,trackOnce:!0},_):_)};pn.displayName="sharedui-ProductGallery";rn.fragment.definitions,ze.fragment.definitions,"\n  query ProductGalleryDialogsQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productGallery(context: $context, productIdentifier: $productIdentifier) {\n      categoryIdAll\n      ...ThumbnailGalleryDialogFragment\n      ...MediaGalleryDialogFragment\n    }\n  }\n\n  \n  \n".concat([rn.fragment.loc.source.body,ze.fragment.loc.source.body].join("\n"))}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-retail-product-gallery.9ca4f072a8f2513a03bb.js.map