/*@license For license information please refer to shared-ui-retail-places-place-details.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8105],{11262:function(e,n,t){t.d(n,{$Q:function(){return M},S3:function(){return R},cw:function(){return z},gH:function(){return w}});var i=t(96540),a=t(47848),l=t(98750),r=t(68370),o=t(53735),c=t(28667),d=t(8983),s=t(23211),m=t(72195),u=t(62152),p=t(85911),v=t(1023),g=t(22913),k=t(59836),f=t(25859),y=t(79611),N=t(45514),E=t(22828),C=t(99310),S=t(47715),_=t(64308),b=t(58994),D=t(62547);const h=e=>{const n={};return e.filter(e=>{if("FragmentDefinition"!==e.kind)return!0;const t=e.name.value;return!n[t]&&(n[t]=!0,!0)})};var x=({closeAction:e,onClick:n})=>{var t;if(!(null==e?void 0:e.icon))return null;const a=null==e?void 0:e.icon;return i.createElement(y.P,{type:"absolute",position:{top:"zero",right:"zero"}},i.createElement(k.q,{type:"button","aria-label":null!=(t=e.accessibility)?t:"",onClick:n},i.createElement(f.LD,{name:a.id})))};x.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CloseActionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UITertiaryButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]}]}}],loc:{start:0,end:147,source:{body:"\n  fragment CloseActionFragment on UITertiaryButton {\n    __typename\n    icon {\n      description\n      id\n      token\n    }\n    accessibility\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},x.displayName="CloseAction";var F=e=>{const{data:n,imageRatio:t}=e;return"Image"===n.__typename?i.createElement(r.M,{ratio:t,roundcorner:["startstart"]},i.createElement(N.F,{placeholderImage:!0,src:n.url,alt:n.description})):null};F.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PlaceCardMediaFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}],loc:{start:0,end:74,source:{body:"\n  fragment PlaceCardMediaFragment on Image {\n    description\n    url\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},F.displayName="PlaceCardMedia";var T=({eventName:e,eventType:n,eventVersion:t,eventCategory:i})=>({event_name:e,event_type:n,event_version:t,event_category:i||"maps"}),I="Interaction",P=(e,n={})=>({...n,event:e});function A(){const e=(0,E.iQ)(),n=n=>{e&&e(n)};return{trackMapCardPresented:(e,t)=>{const i=T({eventName:"map_card.presented",eventType:"Impression",eventVersion:"1.0.0"});n(P(i,{content_card_list:[{id:e,card_type:t}]}))},trackMapPlaceInfoOpened:()=>{const e=T({eventName:"map_place_info.opened",eventType:I,eventVersion:"1.0.0"});n(P(e,{additional_context:{component_name:"map_card_expando",component_element_name:"hours_of_operation"}}))},trackMapPlaceInfoClosed:()=>{const e=T({eventName:"map_place_info.closed",eventType:I,eventVersion:"1.0.0"});n(P(e,{additional_context:{component_name:"map_card_expando",component_element_name:"hours_of_operation"}}))},trackMapCardImageScrolled:()=>{const e=T({eventName:"image_scroll.selected",eventType:I,eventVersion:"1.0.0"});n(P(e))}}}var M=(e=>(e[e.STANDARD=0]="STANDARD",e[e.COMPACT=1]="COMPACT",e))(M||{}),z={kind:"Document",definitions:h([{kind:"FragmentDefinition",name:{kind:"Name",value:"PlaceCardDetailsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlaceCardDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subtitle"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"media"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PlaceCardMediaFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footerText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closeAction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CloseActionFragment"},directives:[]}]}}]}}].concat(x.fragment.definitions,F.fragment.definitions)),loc:{start:0,end:309,source:{body:"\n  fragment PlaceCardDetailsFragment on PlaceCardDetails {\n    id\n    title {\n      text\n    }\n    subtitle {\n      text\n    }\n    description {\n      text\n    }\n    media {\n      ...PlaceCardMediaFragment\n    }\n    footerText {\n      text\n    }\n    closeAction {\n      ...CloseActionFragment\n    }\n  }\n  \n  \n".concat([x.fragment.loc.source.body,F.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},O={kind:"Document",definitions:h([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PlaceCardDetailsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"placeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"directionsTo"}},type:{kind:"NamedType",name:{kind:"Name",value:"DirectionsReferenceInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"placeCardDetails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"placeId"},value:{kind:"Variable",name:{kind:"Name",value:"placeId"}}},{kind:"Argument",name:{kind:"Name",value:"directionsTo"},value:{kind:"Variable",name:{kind:"Name",value:"directionsTo"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PlaceCardDetailsFragment"},directives:[]}]}}]}}].concat(z.definitions)),loc:{start:0,end:255,source:{body:"\n  query PlaceCardDetailsQuery($context: ContextInput!, $placeId: String!, $directionsTo: DirectionsReferenceInput) {\n    placeCardDetails(context: $context, placeId: $placeId, directionsTo: $directionsTo) {\n      ...PlaceCardDetailsFragment\n    }\n  }\n  \n".concat([z.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},R=e=>{var n,t,k,f,y,N,E;const{inputs:C,skipSsr:S,fetchPolicy:_,data:b,size:D,imageRatio:h,onClose:T,skipQuery:I=!1,placeCardDetailsResult:P}=e,{context:M}=(0,g.R)(),z=Boolean(P),R=i.useMemo(()=>({...C,context:M}),[C,M]),{data:L,error:w}=(0,v.IT)(O,{context:{shouldLogPerformance:!0},variables:R,ssr:!S,notifyOnNetworkStatusChange:!0,skip:I||z,..._?{fetchPolicy:_}:{}}),V=($=b)?Object.fromEntries(Object.entries($).filter(([,e])=>null!==e)):{};var $;const j=z?P:null==L?void 0:L.placeCardDetails,H=j||null===j||w?{...V,...j||{}}:null,U=h||1===D?r.l.R3_4:r.l.R4_3,{trackMapCardPresented:Q}=A(),q=null==H?void 0:H.closeAction;return i.useEffect(()=>{(null==H?void 0:H.id)&&Q(H.id,"place")},[null==H?void 0:H.id]),H?i.createElement(a.g,null,i.createElement("div",{"data-testid":`place-card-${H.id||C.placeId}`}),i.createElement(d.w,{alignItems:"start",columns:4,style:{minHeight:63}},H.media&&"Image"===H.media.__typename?i.createElement(s.T,{colSpan:1},i.createElement(F,{imageRatio:U,data:H.media})):null,i.createElement(s.T,{colSpan:3},i.createElement(o.X,{direction:"column",blockSize:"full_size",justifyContent:"space-between"},i.createElement(c.C,null,i.createElement(l.E,null,i.createElement(m.N,{margin:{inlineend:"eight"}},i.createElement(u.M,null,null!=(t=null==(n=null==H?void 0:H.title)?void 0:n.text)?t:"")),H.subtitle?i.createElement(p.D,{size:200,spacing:"one"},null==(k=H.subtitle)?void 0:k.text):null,H.description?i.createElement(p.D,{size:200,spacing:"one"},null!=(y=null==(f=H.description)?void 0:f.text)?y:""):null)),i.createElement(c.C,null,i.createElement(l.E,null,H.footerText?i.createElement(p.D,{size:200},null!=(E=null==(N=H.footerText)?void 0:N.text)?E:""):null))))),q&&i.createElement(x,{closeAction:q,onClick:T})):null};R.displayName="sharedui-PlaceCard";var L=416,w=e=>{var n,t;const{placeId:s,data:v,photoMaxWidth:g=L,onClose:E}=e,[h,x]=i.useState(!1),[F,T]=i.useState([]),{formatText:I}=(0,D.useLocalization)(),{regularOpeningHours:P,photos:M,displayName:z,primaryTypeDisplayName:O,rating:R,userRatingCount:w,priceRange:V}=v,{trackMapCardPresented:$,trackMapPlaceInfoOpened:j,trackMapPlaceInfoClosed:H,trackMapCardImageScrolled:U}=A(),Q=v&&Object.keys(v).length>0;i.useEffect(()=>{if(Q){x(!1);const e=[((null==M?void 0:M.length)||0)>0?void 0:"photos",z?void 0:"displayName",O?void 0:"primaryTypeDisplayName",V?void 0:"priceRange",R?void 0:"rating",w?void 0:"userRatingCount",P?void 0:"regularOpeningHours"].filter(e=>void 0!==e);$(s,e.length>0?`missing ${e.join(", ")}`:"")}},[s,Q]);const q=i.useCallback(()=>{x(!h),h?H():j()},[h]),B=P?i.createElement(i.Fragment,null,i.createElement(_.X,{expandoTitle:null!=(n=I("place.card.openingHours.title"))?n:"Hours of operation",expandedLabel:null!=(t=I("place.card.openingHours.title"))?t:"Hours of operation",triggerPosition:"trailing",isVisible:h,onToggle:q,"data-stid":"google-place-card-expando"}),h&&P.weekdayDescriptions.map((e,n)=>{const[t,a]=e.split(": ");return i.createElement("div",{key:`weekdayDescription-${n}`},i.createElement(o.X,{direction:"row",blockSize:"full_size",justifyContent:"space-between"},i.createElement(p.D,{size:200,spacing:"one"},t),a?i.createElement(p.D,{size:200,spacing:"one"},a):null))})):null,X=E?i.createElement(y.P,{type:"absolute",position:{top:"one",right:"one"}},(G=i.createElement(f.LD,{name:"close"}),(null==F?void 0:F.length)>0?i.createElement(C.M,{type:"button",onClick:E,"aria-label":"close"},G):i.createElement(k.q,{type:"button",onClick:E,"aria-label":"close"},G))):null;var G;i.useEffect(()=>{M&&M.length>0?M.every(e=>e.photoUri)?T(M.filter(e=>e.photoUri)):(T([]),Promise.all(M.filter(e=>!e.photoUri&&e.getPhotoUri).map(e=>{var n;return null==(n=e.getPhotoUri)?void 0:n.call(e,g)})).then(()=>{T(M.filter(e=>e.photoUri))})):T([])},[M,g]);const K={callback:e=>{(e.includes("clickRight")||e.includes("clickLeft"))&&U()},id:"image_scroll.selected"},W=M&&M.length>0?i.createElement(c.C,null,i.createElement(S._N,{navigationIconId:{next:"next-button-gallery",prev:"prev-button-gallery"},peek:!1,buttonText:{nextButton:"Show next photo",prevButton:"Show previous photo"},itemsVisible:{sm:1,md:1,lg:1},pagingInset:!0,pagingOverlay:!0,pagingPersistent:!0,wrapItems:!0,analytics:K},F.length>0?F.map((e,n)=>{var t;return i.createElement(r.M,{roundcorner:["startend"],ratio:r.l.R21_9,key:`photo-${n}`},i.createElement(N.F,{placeholderImage:!0,src:e.photoUri,alt:null==(t=e.authorAttributions)?void 0:t.map(e=>e.displayName).join(", ")}))}):i.createElement(r.M,{roundcorner:["startend"],ratio:r.l.R21_9},i.createElement(N.F,{placeholderImage:!0,width:g})))):null,J=(null==z?void 0:z.text)?i.createElement(m.N,{margin:{inlineend:"eight"}},i.createElement(u.M,{size:5},null==z?void 0:z.text)):null,Y=(null==O?void 0:O.text)?i.createElement(c.C,null,i.createElement(p.D,{size:400,spacing:"one"},O.text)):null,{startPrice:Z,endPrice:ee}=V||{},ne=Z&&ee?"-":"",te=(null==Z?void 0:Z.currencyCode)||(null==ee?void 0:ee.currencyCode),ie=V?i.createElement(c.C,null,i.createElement(p.D,{size:400,spacing:"one"},te," ",null==Z?void 0:Z.units,ne,null==ee?void 0:ee.units)):null,ae=Y&&ie?i.createElement(c.C,null,i.createElement(p.D,{size:400,spacing:"one",align:"center"},"â€¢")):null,le=Y||ie?i.createElement(o.X,{direction:"row",justifyContent:"start"},Y,ae,ie):null,re=R?i.createElement(c.C,null,i.createElement(p.D,{size:400,spacing:"one"},R)):null,oe=R?i.createElement(c.C,null,i.createElement(p.D,{size:200,spacing:"one"},i.createElement(b.v,{rating:`${R}`}))):null,ce=w?i.createElement(c.C,null,i.createElement(p.D,{size:400,spacing:"one"},"(",w.toLocaleString(),")")):null,de=R||oe||w?i.createElement(o.X,{direction:"row",justifyContent:"start",space:"one"},re," ",oe," ",ce):null;return W||J||le||de||B?i.createElement(a.g,null,i.createElement("div",{"data-testid":`base-google-map-place-card-${s}`}),i.createElement(d.w,{alignItems:"start",style:{minHeight:63}},i.createElement(o.X,{direction:"column",blockSize:"full_size",justifyContent:"space-between"},W,i.createElement(l.E,null,J,le,de,B))),X):null};w.displayName="BaseGooglePlaceCard"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-retail-places-place-details.ba7292f9862ae18e2917.js.map