/*@license For license information please refer to property-search-form-wrapper.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2506],{77312:function(e,t,s){s.d(t,{B:function(){return r},E:function(){return l}});var r,n=s(96540),o=s(8311),a=s(59671);!function(e){e.LODGING_SRP="LODGING_SRP",e.FLIGHTS_SRP="FLIGHTS_SRP"}(r||(r={}));const c={[r.LODGING_SRP]:{appName:"shopping-pwa",url:"/get-shopping-pwa-manifest-assets"},[r.FLIGHTS_SRP]:{appName:"flights-shopping-pwa",url:"/flights-search-api/resources"}},i=o.ClientLogger.getLoggerWithIdentifier("blossom.usePrefetchAssets"),u=e=>`prefetch-resources-${e}`,f=e=>{const t=u(e),s=sessionStorage.getItem(t);if(s){const e=JSON.parse(s),{timestamp:r,resources:n}=e;return(e=>{const t=new Date(e),s=new Date;return t.setMinutes(t.getMinutes()+10),s.getTime()>t.getTime()})(r)?void sessionStorage.removeItem(t):n}},p=async(e,t)=>{const s=f(e);if(s)return s;try{const s=c[e].url,r=await fetch(s);if(r.ok){const s=t(await r.json());if(Array.isArray(s))return((e,t)=>{sessionStorage.setItem(u(e),JSON.stringify({timestamp:new Date,resources:t}))})(e,s),s}}catch(r){i.logEvent(new a.SystemEvent(a.SystemEventLevel.ERROR,`Failed to fetch list of resource assets for product: ${e}`),r)}},l=(e,t)=>{const s=n.useRef(!1),r=n.useRef(!1);n.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);return{prefetch:n.useCallback(async()=>{if(r.current&&!s.current){const r=await p(e,t);(null==r?void 0:r.length)&&(r.forEach(t=>((e,t)=>{const{path:s}=t;if(s){const t=document.createElement("link");t.rel="prefetch",t.href=`https://c.travel-assets.com/${c[e].appName}/${s}`,document.head.appendChild(t)}})(e,t)),s.current=!0)}},[e,t])}}}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/property-search-form-wrapper.52df9cacf880e8acf8c4.js.map