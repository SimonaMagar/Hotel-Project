/*@license For license information please refer to shared-ui-retail-product-review-details.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2978],{76918:function(e,n,t){t.d(n,{C7:function(){return it},D_:function(){return at},GZ:function(){return Te},Ub:function(){return tt},Wx:function(){return ve},y9:function(){return Wn}});var i=t(96540),a=t(69045),l=t(92461),r=t(25859),d=t(72195),s=t(1023),o=t(22913),c=t(97222),m=t(30702),u=t(22828),v=t(93065),k=t(53735),p=t(28667),g=t(85911),y=t(68370),S=t(8983),F=t(23211),f=t(99374),N=t(62152),E=t(55727),b=t(6412),w=t(47848),h=t(98750),T=t(15685),R=t(85215),C=t(26368),D=t(6057),I=t(47715),A=t(45514),_=t(54939),x=t(2507),P=t(26143),L=t(28155),M=t(47376),V=t(39656),G=t(48141),O=t(65113),$=t(84286),B=t(59836),z=t(79611),Q=t(70185),q=t(82715),X=t(62547),j=t(96912),K=t(22429),H=t(3169),Y=t(92416),U=t(14679),W=t(27158),Z=t(25607),J=t(80105),ee=t(48436),ne=t(62735),te=t(70157),ie=t(5155),ae=t(43094),le=t(20536),re=t(97250);const de=e=>{const n={};return e.filter(e=>{if("FragmentDefinition"!==e.kind)return!0;const t=e.name.value;return!n[t]&&(n[t]=!0,!0)})};var se="pageIndex",oe="size",ce={search:"",sortBy:"",travelerType:""},me={search:"",sortBy:"",travelerType:"",withPhotos:""},ue=(e,n,t,i,a,l)=>{var r,d;if(!e)return e;const s=((null==(r=e.secondary)?void 0:r.selections)||[]).filter(e=>"sortBy"!==e.id&&"searchTerm"!==e.id&&"travelerType"!==e.id),o=((null==(d=e.secondary)?void 0:d.counts)||[]).filter(e=>e.id!==se&&e.id!==oe);return{...e,secondary:{...e.secondary,selections:[...s,{id:"sortBy",value:t},{id:"searchTerm",value:a},{id:"travelerType",value:i},...l?[{id:"reviewsWithPhotos",value:l}]:[]],counts:[...o,{id:se,value:n},{id:oe,value:10}]}}},ve=(e=>(e.ACTIVITY_ID="ACTIVITY_ID",e.CART_ID="CART_ID",e.CAR_OFFER_TOKEN="CAR_OFFER_TOKEN",e.CHECKOUT_SESSION_ID="CHECKOUT_SESSION_ID",e.ENTITY_ID="ENTITY_ID",e.LEGACY_ORDER_ID="LEGACY_ORDER_ID",e.OFFER_ID="OFFER_ID",e.ORDER_ID="ORDER_ID",e.PROPERTY_ID="PROPERTY_ID",e.SAILING_TOKEN="SAILING_TOKEN",e))(ve||{}),ke={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewDisclaimerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductTextInfoSection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductTextInfoSectionFragment"},directives:[]}]}}].concat(c.wK.fragment.definitions)),loc:{start:0,end:110,source:{body:"\n  fragment ReviewDisclaimerFragment on ProductTextInfoSection {\n    ...ProductTextInfoSectionFragment\n  }\n  \n".concat([c.wK.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},pe=({data:e})=>{var n;const t=(0,u.KY)(),a=1===(0,v.useExperiment)("Reviews_Overlay_revamp",!1).exposure.bucket,{content:l,openAnalytics:r}=e.message||{};return(null==(n=e.title)?void 0:n.text)?i.createElement(d.N,{padding:a?{blockstart:"half"}:{blockstart:"one"}},i.createElement("div",null,i.createElement(c.wK,{data:e,trackTooltipToggle:()=>{const{referrerId:e,linkName:n}=r||{};e&&n&&t(e,n)},trackTextInfoContentLinkClick:()=>{var e;const n=null==l?void 0:l.filter(e=>"EGDSInlineLink"===e.__typename)[0],{referrerId:i,linkName:a}=(null==(e=null==n?void 0:n.action)?void 0:e.analytics)||{};i&&a&&t(i,a)},paraTextSize:1}))):null};pe.fragment=ke,pe.displayName="ReviewDisclaimer";var ge={STRONG:"bold"},ye=({data:e})=>{const{primary:n,accessibilityLabel:t,theme:a}=e;return i.createElement(k.X,{alignItems:"start",direction:"column"},i.createElement(p.C,null,i.createElement("div",null,t&&i.createElement("span",{className:"is-visually-hidden"},t),n&&i.createElement(g.D,{size:500,weight:a&&ge[a]||void 0,"aria-hidden":null!==t},n))))};ye.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewSummaryFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductRatingSummary"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]}]}}],loc:{start:0,end:109,source:{body:"\n  fragment ReviewSummaryFragment on ProductRatingSummary {\n    primary\n    accessibilityLabel\n    theme\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ye.displayName="ReviewSummary";var Se=()=>i.createElement(S.w,{space:"two"},i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:24,lineLength:"primary"})),i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:20,lineLength:"secondary"}))),Fe=i.createElement(k.X,{justifyContent:"space-between"},i.createElement(p.C,null,i.createElement(f.R,{type:"line",lineHeight:14,lineLength:"secondary"})),i.createElement(p.C,null,i.createElement(f.R,{type:"line",lineHeight:14,lineLength:"secondary"}))),fe=()=>i.createElement(S.w,{space:"two"},i.createElement(F.T,null,Fe),i.createElement(F.T,null,i.createElement(S.w,{rows:["10px"]},i.createElement(F.T,null,i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:4})))))),Ne=({times:e})=>i.createElement(d.N,{padding:{blockend:"four"}},i.createElement(S.w,{space:"four","data-stid":"product-review-summary-details-skeleton"},i.createElement(F.T,null,i.createElement(Se,null)),i.createElement(F.T,null,i.createElement(i.Fragment,null,Array.from({length:e}).map((e,n)=>i.createElement(fe,{key:`category-skeleton-${n}`})))))),Ee=()=>i.createElement(d.N,{padding:{blockend:"twelve"}},i.createElement(S.w,{space:"four","data-stid":"product-review-summary-details-skeleton"},i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:32,lineLength:"secondary"})),i.createElement(F.T,null,i.createElement(y.M,{ratio:y.l.R21_9},i.createElement(f.R,{type:"block",cornerRadius:8}))))),be={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewRatingummaryFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductRatingSummary"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overallRating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSStylizedTextFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"superlative"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSStylizedTextFragment"},directives:[]}]}}]}}].concat(c.Z3.fragment.definitions)),loc:{start:0,end:214,source:{body:"\n  fragment ReviewRatingummaryFragment on ProductRatingSummary {\n    accessibilityLabel\n    overallRating {\n      ...EGDSStylizedTextFragment\n    }\n    superlative {\n      ...EGDSStylizedTextFragment\n    }\n  }\n\n  \n".concat([c.Z3.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},we=({data:e,disclaimer:n})=>{const{accessibilityLabel:t,overallRating:a,superlative:l}=e;return a&&0!==a.length?i.createElement(k.X,{direction:"row","data-stid":"product-review-rating-summary"},i.createElement(p.C,{grow:0},i.createElement(i.Fragment,null,t&&i.createElement(N.M,{className:"is-visually-hidden","aria-label":t||""},t),a.map(e=>i.createElement(c.Z3,{data:e,key:`${null==e?void 0:e.text}`,skipScreenReader:!0})))),(l||n)&&i.createElement(d.N,{padding:{inlinestart:"four"}},i.createElement(p.C,{grow:1},i.createElement(k.X,{direction:"column"},i.createElement(p.C,null,l&&i.createElement(c.Z3,{data:l})),i.createElement(p.C,null,n&&i.createElement(pe,{data:n})))))):null};we.fragment=be,we.displayName="ReviewRatingSummary";var he={kind:"Document",definitions:de([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PWAReviewsOverlayProductReviewDetailsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProductIdentifierInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productReviewDetails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"productIdentifier"},value:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}}},{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewSummaryFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewRatingummaryFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disclaimer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewDisclaimerFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"categories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductContainerSectionFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GuestImagesSectionFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reviewSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ShoppingReviewSummaryFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tnlFields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}].concat(ye.fragment.definitions,we.fragment.definitions,pe.fragment.definitions,c.WZ.fragment.definitions,c.uA.fragment.definitions,c.XM.fragment.definitions)),loc:{start:0,end:649,source:{body:"\n  query PWAReviewsOverlayProductReviewDetailsQuery($productIdentifier: ProductIdentifierInput!, $context: ContextInput!) {\n    productReviewDetails(productIdentifier: $productIdentifier, context: $context) {\n      summary {\n        ...ReviewSummaryFragment\n        ...ReviewRatingummaryFragment\n      }\n      disclaimer {\n        ...ReviewDisclaimerFragment\n      }\n      categories {\n        ...ProductContainerSectionFragment\n      }\n      images {\n        ...GuestImagesSectionFragment\n      }\n      reviewSummary {\n        ...ShoppingReviewSummaryFragment\n      }\n      tnlFields {\n        key\n        value\n      }\n    }\n  }\n  \n  \n  \n  \n  \n  \n".concat([ye.fragment.loc.source.body,we.fragment.loc.source.body,pe.fragment.loc.source.body,c.WZ.fragment.loc.source.body,c.uA.fragment.loc.source.body,c.XM.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Te=({inputs:e,skipSsr:n,batchKey:t})=>{var u,v,k,p,g,y,S;const{context:F}=(0,o.R)(),f={productIdentifier:{id:null==(u=null==e?void 0:e.productIdentifier)?void 0:u.id,type:"PROPERTY_ID",travelSearchCriteria:{property:(0,i.useMemo)(()=>{var n;return ue(null==(n=e.productIdentifier.travelSearchCriteria)?void 0:n.property,0,ce.sortBy,ce.travelerType,ce.search)},[null==(v=e.productIdentifier.travelSearchCriteria)?void 0:v.property])}},context:F},{data:N,error:E,loading:b}=(0,s.IT)(he,{context:{batchKey:null!=t?t:"default-product-details-experience-batch-key",shouldLogPerformance:!0},variables:f,ssr:!n});if(E)return null;const{summary:w,disclaimer:h,categories:T,images:R,tnlFields:C,reviewSummary:D}=(null==N?void 0:N.productReviewDetails)||{},I=null==(k=null==C?void 0:C.find(e=>"egtnl59480_badgeText"===e.key))?void 0:k.value,A=(null!=(g=null==(p=null==T?void 0:T.progressBarGroup)?void 0:p.progressBars.length)?g:0)>(null!=(S=null==(y=null==T?void 0:T.expando)?void 0:y.items)?S:5)?"one":"four";return i.createElement("div",{"data-stid":"product-reviews-details"},b&&i.createElement(Ne,{times:5}),!D&&I&&i.createElement(d.N,{padding:{blockend:"two",extra_large:{blockend:"four"}},margin:{blockend:"half",extra_large:{blockend:"unset"}}},i.createElement("div",null,i.createElement(a.G,{theme:l.mc.INFO,text:I},i.createElement(r.LD,{name:"trophy",size:r.So.EXTRA_SMALL})))),!D&&w&&i.createElement(ye,{data:w}),D&&i.createElement(c.XM,{data:D}),h&&i.createElement(pe,{data:h}),i.createElement(m.j,{inputs:{productIdentifier:{id:e.productIdentifier.id,type:m.W.PROPERTY_ID,travelSearchCriteria:e.productIdentifier.travelSearchCriteria}}}),T&&i.createElement(d.N,{padding:{blockstart:"four"}},i.createElement("div",null,i.createElement(c.WZ,{data:T}))),R&&i.createElement(d.N,{padding:{blockstart:A}},i.createElement("div",null,i.createElement(c.uA,{data:R,isOverlay:!0}))))};Te.displayName="sharedui-ProductReviewDetails";var Re=(e,n)=>e&&n?[...n,...e.filter(({id:e})=>!n.some(n=>e===(null==n?void 0:n.id)))]:e,Ce=(e,n)=>{var t,i,a,l,r,d,s,o,c,m;return e&&n?{...e,...n,secondary:{booleans:Re(null==(t=e.secondary)?void 0:t.booleans,null==(i=n.secondary)?void 0:i.booleans),counts:Re(null==(a=e.secondary)?void 0:a.counts,null==(l=n.secondary)?void 0:l.counts),dates:Re(null==(r=e.secondary)?void 0:r.dates,null==(d=n.secondary)?void 0:d.dates),ranges:Re(null==(s=e.secondary)?void 0:s.ranges,null==(o=n.secondary)?void 0:o.ranges),selections:Re(null==(c=e.secondary)?void 0:c.selections,null==(m=n.secondary)?void 0:m.selections)}}:e},De=(e,n)=>({updateQuery:t,variables:i})=>{var a,l,r,d,s;e({updateQuery:t,variables:{...n,productIdentifier:{...n.productIdentifier,travelSearchCriteria:{...null==(a=n.productIdentifier)?void 0:a.travelSearchCriteria,property:Ce(null==(r=null==(l=n.productIdentifier)?void 0:l.travelSearchCriteria)?void 0:r.property,null==(s=null==(d=i.productIdentifier)?void 0:d.travelSearchCriteria)?void 0:s.property)}}}})},Ie={sortBy:{name:"reviews_sort.selected",version:"1.0.0"},sortByOpened:{name:"reviews_sort.opened",version:"1.0.0"},travelerType:{name:"reviews_filter.selected",version:"1.0.0"},travelerTypeOpened:{name:"reviews_filter.opened",version:"1.0.0"},reviewsDetailsSection:{name:"reviews.viewed",version:"1.0.0"},individualReview:{name:"review.presented",version:"1.0.0"},reviewSearchInit:{name:"reviews_search.initiated",version:"1.0.0"},reviewSearchSubmit:{name:"reviews_search.submitted",version:"1.0.0"},reviewPagination:{name:"additional_reviews.selected",version:"1.0.0"},reviewSeeMore:{name:"see_more.selected",version:"1.0.0"},reviewSeeLess:{name:"see_less.selected",version:"1.0.0"},reviewTranslate:{name:"translate_review.selected",version:"1.0.0"},reportSelected:{name:"report.selected",version:"1.0.0"},reportReasonSelected:{name:"report_reason.selected",version:"1.0.0"},reportSubmitted:{name:"report.submitted",version:"1.0.0"},reviewImageScroll:{name:"image_scroll.selected",version:"1.0.0"},reviewImageSelected:{name:"image.selected",version:"1.0.0"},reviewImagePresented:{name:"image.presented",version:"1.12.0"},reviewImagePreviewClose:{name:"image.closed",version:"1.0.0"},reviewPhotosSelected:{name:"reviews_pill.selected",version:"1.0.0"},reviewPhotosDeselected:{name:"reviews_pill.deselected",version:"1.0.0"},sortByApplied:{name:"reviews_sort.applied",version:"1.0.0"},travelerTypeApplied:{name:"reviews_filter.applied",version:"1.0.0"}},Ae=(e,n)=>({event:{event_name:e,event_version:n}}),_e=({data:e})=>{const{heading:n,body:t}=e;return i.createElement(E.I,null,i.createElement(d.N,{margin:{blockstart:"six"}},i.createElement(N.M,{size:5,tag:"h3"},n)),i.createElement(g.D,{spacing:"two",size:300},t))};_e.displayName="EmptyState",_e.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EmptyStateFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UIEmptyState"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"heading"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:89,source:{body:"\n  fragment EmptyStateFragment on UIEmptyState {\n    heading\n    body\n    __typename\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var xe=({data:e,handleClick:n})=>{var t,a;const{graphic:l,primary:s,secondaries:o,actions:c}=e,m="Icon"===(null==l?void 0:l.__typename)&&i.createElement(r.LD,{name:l.id,id:l.id,description:l.description,spotlight:"info"}),u=(0,i.useCallback)(()=>{n&&n()},[n]);return i.createElement(v.Experiment,{name:"Reviews_Overlay_revamp",logExposure:!1},i.createElement(v.ExperimentControl,null,i.createElement(w.g,{padded:!0,border:!0},i.createElement(k.X,{alignItems:"center",space:"two"},i.createElement(p.C,null,i.createElement("div",null,m)),i.createElement(d.N,{margin:{inlinestart:"two"}},i.createElement(p.C,null,i.createElement("div",null,s&&i.createElement(N.M,{tag:"h4"},s),i.createElement(g.D,{size:300},null==o?void 0:o[0]))))))),i.createElement(v.ExperimentVariant,{bucket:1},i.createElement(k.X,{space:"four",direction:"column",alignItems:"center"},i.createElement(p.C,null,i.createElement(k.X,{space:"two",direction:"column",alignItems:"center"},s&&i.createElement(p.C,null,i.createElement(N.M,{tag:"h4"},s)),(null==o?void 0:o[0])&&i.createElement(p.C,null,i.createElement(g.D,{size:300},null==o?void 0:o[0])))),i.createElement(p.C,null,c&&i.createElement(p.C,null,i.createElement(b.y,{"aria-label":(null==(t=c.primary)?void 0:t.accessibility)||"",onClick:u,id:"clear-search-reviews-filter"},null==(a=c.primary)?void 0:a.primary))))))};xe.displayName="MessagingCard";var Pe={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"NoResultsMessageFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviews"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"noResultsMessage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"MessagingCardFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"EmptyStateFragment"},directives:[]}]}}]}}].concat((xe.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MessagingCardFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UIMessagingCard"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"secondaries"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}],loc:{start:0,end:299,source:{body:"\n  fragment MessagingCardFragment on UIMessagingCard {\n    graphic {\n      __typename\n      ... on Icon {\n        id\n        description\n        __typename\n      }\n    }\n    primary\n    secondaries\n    actions {\n      primary {\n        primary\n        accessibility\n      }\n    }\n    __typename\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}).definitions,_e.fragment.definitions)),loc:{start:0,end:172,source:{body:"\n  fragment NoResultsMessageFragment on ProductReviews {\n    noResultsMessage {\n      __typename\n      ...MessagingCardFragment\n      ...EmptyStateFragment\n    }\n  }\n  \n  \n".concat([xe.fragment.loc.source.body,_e.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Le=({data:e,handleClick:n})=>{const{noResultsMessage:t}=e;switch(null==t?void 0:t.__typename){case"UIMessagingCard":return i.createElement(xe,{data:t,handleClick:n});case"UIEmptyState":return i.createElement(_e,{data:t});default:return null}};Le.fragment=Pe,Le.displayName="NoResultsMessage";var Me=()=>i.createElement(S.w,{space:"two"},i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineLength:"secondary"})),i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:16,lineLength:"primary"})),i.createElement(F.T,null,i.createElement(i.Fragment,null,i.createElement(S.w,{rows:["8px"]},i.createElement(F.T,null,i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:4})))),i.createElement(S.w,{rows:["8px"]},i.createElement(F.T,null,i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:4})))))),i.createElement(F.T,null,i.createElement(d.N,{margin:{blockstart:"three"}},i.createElement(S.w,{rows:["68px"]},i.createElement(F.T,null,i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:4}))))))),Ve=({times:e})=>i.createElement(w.g,{"data-stid":"product-review-list-skeleton"},Array.from({length:e}).map((n,t)=>i.createElement(h.E,{padded:["blockstart","blockend"],border:t<e-1?"bottom":void 0,key:`product-review-list-loading-${t}`},i.createElement(Me,null)))),Ge=({times:e})=>i.createElement(S.w,{space:"twelve","data-stid":"product-review-list-skeleton"},Array.from({length:e}).map((e,n)=>i.createElement(F.T,{key:`product-review-list-loading-${n}`},i.createElement(S.w,{key:n,space:"three","data-stid":`product-review-list-skeleton-${n}`},i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:12,lineLength:"primary"})),i.createElement(F.T,null,i.createElement(f.R,{type:"line",lineHeight:12,lineLength:"secondary"})),i.createElement(F.T,null,i.createElement(y.M,{ratio:y.l.R4_1},i.createElement(f.R,{type:"block",cornerRadius:8}))))))),Oe=({data:e,fetchMore:n,page:t,showNextPage:a})=>{var l,r;const{pagination:s}=e,[o,c]=(0,i.useState)(!1),m=(0,u.iQ)(),v=(0,i.useCallback)(()=>{(null==s?void 0:s.analytics)&&m({clientPayload:Ae(Ie.reviewPagination.name,Ie.reviewPagination.version),serverPayload:null==s?void 0:s.analytics})},[null==s?void 0:s.analytics,m]),g=(0,i.useCallback)(()=>{c(!0),a(!0),v(),n({variables:{productIdentifier:{travelSearchCriteria:{property:{secondary:{counts:[{id:se,value:t},{id:oe,value:10}]}}}}},updateQuery:(e,{fetchMoreResult:n})=>{var t,i,a,l;if(setTimeout(()=>c(!1)),!n)return e;const r=null!=(t=e.productReviewDetails.reviews.details)?t:[],d=null!=(l=null==(a=null==(i=n.productReviewDetails)?void 0:i.reviews)?void 0:a.details)?l:[];return{...e,productReviewDetails:{...e.productReviewDetails,reviews:{...n.productReviewDetails.reviews,details:[...r,...d]}}}}})},[n,t,a,v]);return(null==s?void 0:s.button)?o?i.createElement(Me,null):i.createElement(S.w,null,i.createElement(F.T,null,i.createElement(d.N,{margin:{block:"three"}},i.createElement(k.X,{alignContent:"center",justifyContent:"center",wrap:"wrap"},i.createElement(p.C,null,i.createElement(b.y,{"aria-label":(null==(l=s.button)?void 0:l.accessibility)||"",onClick:g,disabled:o,id:"load-more-reviews"},null==(r=s.button)?void 0:r.primary)))))):null};Oe.displayName="Paginate",Oe.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PaginateFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviews"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:153,source:{body:"\n  fragment PaginateFragment on ProductReviews {\n    pagination {\n      button {\n        primary\n        accessibility\n      }\n      analytics\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var $e="egtnl64435",Be="egtnl67203",ze=({data:e,reviewId:n})=>{var t,a,l,r;const{carousel:s}=e,o=(0,u.iQ)(),c=(0,i.useRef)(null),m=(0,i.useRef)(null),[v,f]=(0,i.useState)(0),[N,E]=(0,i.useState)(0),[b,w]=i.useState(0),[h,T,R]=(0,V.useDialog)(`review-${n}-photo-gallery-dialog`,"pwaPhotosReviewsDialog");let C=0;const G=(0,i.useCallback)((e,n)=>{T.openDialog(),f(e),E(e),n&&o({clientPayload:Ae(Ie.reviewImageSelected.name,Ie.reviewImageSelected.version),serverPayload:n})},[T,o]),O=i.useCallback(e=>{var n;if(null==(n=c.current)||n.focus(),T.closeDialog(),f(0),e){const n={additional_context:{image_list:[{image_id:"review_photos",gallery_position:N+1}]}},t={...Ae(Ie.reviewImagePreviewClose.name,Ie.reviewImagePreviewClose.version),...n};o({clientPayload:t,serverPayload:e})}},[N,T,o]),$=(0,i.useCallback)((e,n,t)=>{if(null==n?void 0:n.analytics){const i={...Ae(Ie.reviewImageScroll.name,Ie.reviewImageScroll.version),additional_context:{image_gallery:{gallery_name:"review_photos",gallery_max_position:C},user_interface:{scroll_direction:t},image_list:[{image_id:"review_photos",gallery_position:e+1}]}};o({clientPayload:i,serverPayload:null==n?void 0:n.analytics})}w(e)},[C,o]);if(!s||!s.items||0===(null==(t=s.items)?void 0:t.length))return null;const{items:B,nextButton:z,previousButton:Q,closeAnalytics:q}=s;C=null==B?void 0:B.length;const X={carouselName:"ReviewPhotosGallery",itemsVisible:{sm:1,md:1,lg:1,xl:1},pagingInset:!0,pagingPersistent:!0,stretchToFill:!1,navigationIconId:{next:"next-button-review-gallery",prev:"prev-button-review-gallery"},buttonText:{nextButton:(null==(a=null==z?void 0:z.button.icon)?void 0:a.description)||"",prevButton:(null==(l=null==Q?void 0:Q.button.icon)?void 0:l.description)||""},peek:!1,wrapItems:!0},j=e=>({clientPayload:Ae(Ie.reviewImagePresented.name,Ie.reviewImagePresented.version),serverPayload:e}),K=B.map((e,n)=>i.createElement(y.M,{key:`review-gallery-${e.image.url}-${n}`,ratio:y.l.R16_9},e.analytics?i.createElement(u.E0,{eventData:j(e.analytics)},i.createElement(A.F,{src:e.image.url,alt:e.image.description,placeholderImage:!0})):i.createElement(A.F,{src:e.image.url,alt:e.image.description,placeholderImage:!0})));return i.createElement(i.Fragment,null,i.createElement(S.w,{columns:4,rows:1,space:"one",key:`review-photos-grid-${n}`},B.slice(0,4).map((e,t)=>i.createElement(F.T,{key:e.image.url},i.createElement(y.M,{ratio:y.l.R4_3},e.analytics?i.createElement(u.E0,{eventData:j(e.analytics)},i.createElement(A.F,{src:e.image.url,alt:e.image.description,placeholderImage:!0})):i.createElement(A.F,{src:e.image.url,alt:e.image.description,placeholderImage:!0}),i.createElement(_.d,null,i.createElement(D.u,{id:`${n}-gallery-image-button-${t}`,onClick:()=>G(t,e.previewAnalytics),domRef:e=>{0===t&&(c.current=e)},"aria-label":`${t+1}/${B.length}`})))))),i.createElement(x.K,{isVisible:h},i.createElement(R,null,i.createElement(P.t,{type:"full",isVisible:h,triggerRef:c,theme:"dark"},i.createElement(M.b,{navigationContent:{navIconLabel:"Close the dialog",onClick:()=>O(q)},overlay:!0}),i.createElement(L.Y,null,i.createElement(k.X,{blockSize:"full_size",direction:"column"},i.createElement(p.C,null,i.createElement(d.N,{padding:{blockstart:"twelve"}},i.createElement(I._N,{...X,carouselRef:m,fullSheetVisible:h,startIndex:v,onIndexChange:e=>{e>b&&$(e,z,"right"),e<b&&$(e,Q,"left"),E(e)}},K))),i.createElement(p.C,null,i.createElement(d.N,{padding:{block:"four"}},i.createElement(k.X,{alignItems:"end",justifyContent:"space-between"},i.createElement(p.C,null,i.createElement(g.D,{theme:"inverse"}," ",null==(r=B[N])?void 0:r.image.description)),i.createElement(p.C,null,i.createElement(g.D,{theme:"inverse"},`${String(N+1)}/${String(B.length)}`)))))))))))};ze.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewPhotosFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GuestImages"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"carousel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aspectRatio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewAnalytics"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nextButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"previousButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"button"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"closeAnalytics"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:651,source:{body:"\n  fragment ReviewPhotosFragment on GuestImages {\n    carousel {\n      items {\n        image {\n          aspectRatio\n          url\n          description\n        }\n        analytics\n        previewAnalytics\n      }\n      nextButton {\n        button {\n          accessibility\n          icon {\n            id\n            description\n            token\n          }\n          disabled\n        }\n        analytics\n      }\n      previousButton {\n        button {\n          accessibility\n          icon {\n            id\n            description\n            token\n          }\n          disabled\n        }\n        analytics\n      }\n      closeAnalytics\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ze.displayName="ReviewPhotos";var Qe={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewSectionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ReviewSection"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expando"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProductEGDSExpandoPeekFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewPhotosFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"highlightedText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSSpannableTextFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"collapseAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expandAnalytics"},arguments:[],directives:[]}]}}].concat(c.vD.fragment.definitions,ze.fragment.definitions,c.$B.fragment.definitions)),loc:{start:0,end:314,source:{body:"\n  fragment ReviewSectionFragment on ReviewSection {\n    __typename\n    text\n    title\n    expando {\n      ...ProductEGDSExpandoPeekFragment\n    }\n    photos {\n      ...ReviewPhotosFragment\n    }\n    highlightedText {\n      ...EGDSSpannableTextFragment\n    }\n    collapseAnalytics\n    expandAnalytics\n  }\n  \n  \n  \n".concat([c.vD.fragment.loc.source.body,ze.fragment.loc.source.body,c.$B.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},qe=({data:e,reviewId:n,isTranslated:t,translatedContent:a})=>{const[l,r]=i.useState(!1),d=(0,u.iQ)(),{text:s,title:o,expando:c,photos:m,highlightedText:v,collapseAnalytics:k,expandAnalytics:p}=e,{expandedLabel:y,collapsedLabel:f,expandedAccessibilityText:E,collapsedAccessibilityText:b}=c||{},w=t&&a?a.text:s,h=t&&a?a.title:o,T=i.useCallback(()=>{r(!l)},[l]),D=(0,i.useCallback)((e,n)=>{var t;return(null==(t=null==n?void 0:n.inlineContent)?void 0:t.length)?i.createElement(i.Fragment,null,i.createElement("span",{className:"is-visually-hidden"},e),i.createElement(C.V,{inlineContentList:n.inlineContent,isHiddenFromScreenReader:!0})):e},[]),I={id:"review-expand",callback:e=>{"review-expand.opened"===e&&p&&d({clientPayload:Ae(Ie.reviewSeeMore.name,Ie.reviewSeeMore.version),serverPayload:p}),"review-expand.closed"===e&&k&&d({clientPayload:Ae(Ie.reviewSeeLess.name,Ie.reviewSeeLess.version),serverPayload:k})}};return i.createElement(S.w,{space:"two",key:`review-section-${n}-${t}`},h&&i.createElement(F.T,null,i.createElement(N.M,{tag:"h5",size:6},h)),w&&i.createElement(F.T,{key:`review-text-area-${n}-${t}`},c?i.createElement(R.A,{lines:5,isVisible:l,expandLabel:y,collapseLabel:f,handleClick:T,expandA11yLabel:null!=E?E:y,collapseA11yLabel:null!=b?b:f,analytics:I,key:`review-expando-${n}-${t}`},i.createElement(g.D,{size:300,theme:"standard",key:`review-text-${n}-${t}`},D(w,v))):i.createElement(g.D,{size:300,theme:"standard",key:`review-text-${n}-${!t}`},D(w,v))),m&&i.createElement(F.T,{key:`review-photos-${n}-${t}`},i.createElement(ze,{data:m,reviewId:n})))};qe.displayName="Review";var Xe={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ManagementResponseFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"managementResponses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewSectionFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}].concat((qe.fragment=Qe).definitions)),loc:{start:0,end:145,source:{body:"\n  fragment ManagementResponseFragment on ProductReview {\n    managementResponses {\n      ...ReviewSectionFragment\n      __typename\n    }\n  }\n  \n".concat([qe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},je=({data:e})=>{const{managementResponses:n}=e;return n?i.createElement(d.N,{border:["inlinestart"],padding:{inlinestart:"three"},margin:{blockstart:"four"}},n.map((e,n)=>i.createElement("article",{key:`review-management-response${n}-key`},(null==e?void 0:e.title)&&i.createElement(g.D,{weight:"bold",size:200},e.title),(null==e?void 0:e.text)&&i.createElement(d.N,{padding:{block:"two"}},i.createElement(g.D,{size:200,theme:"standard"},e.text))))):null};je.displayName="ManagementResponse",je.fragment=Xe;var Ke={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FeedbackCallToActionFragmentn"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DirectFeedbackCallToAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promptId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eager"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"callToAction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CDFEGDSStandardLinkFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"postSubmitDisplay"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CDFEGDSStandardLinkFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"contextValues"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GraphQLPairFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sheetType"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"GraphQLPairFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GraphQLPair"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CDFEGDSStandardLinkFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSStandardLink"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"uiLinkAction"},name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UILinkAction"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ClientSideAnalytics"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"eventType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HttpURI"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relativePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"standardLinkIcon"},name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CDFIconFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"iconPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CDFIconFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"withBackground"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:1046,source:{body:"\n  fragment FeedbackCallToActionFragmentn on DirectFeedbackCallToAction {\n    __typename\n    promptId\n    eager\n    callToAction {\n      ...CDFEGDSStandardLinkFragment\n    }\n    postSubmitDisplay {\n      ...CDFEGDSStandardLinkFragment\n    }\n    contextValues {\n      ...GraphQLPairFragment\n    }\n    sheetType\n  }\n\n  fragment GraphQLPairFragment on GraphQLPair {\n    key\n    value\n  }\n\n  fragment CDFEGDSStandardLinkFragment on EGDSStandardLink {\n    uiLinkAction: action {\n      ... on UILinkAction {\n        accessibility\n        analytics {\n          ... on ClientSideAnalytics {\n            eventType\n            linkName\n            referrerId\n          }\n        }\n        resource {\n          ... on HttpURI {\n            relativePath\n            value\n          }\n        }\n        target\n      }\n    }\n    disabled\n    standardLinkIcon: icon {\n      ...CDFIconFragment\n    }\n    iconPosition\n    size\n    text\n  }\n\n  fragment CDFIconFragment on Icon {\n    description\n    id\n    size\n    theme\n    title\n    withBackground\n    token\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},He={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReportReviewFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promptId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"callToAction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FeedbackCallToActionFragmentn"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reportSubmissionAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewReasonInsightsAnalytics"},arguments:[],directives:[]}]}}]}}].concat(Ke.definitions)),loc:{start:0,end:264,source:{body:"\n  fragment ReportReviewFragment on ProductReview {\n    reportReview {\n      promptId\n      callToAction {\n        ...FeedbackCallToActionFragmentn\n      }\n      clickStreamAnalytics\n      reportSubmissionAnalytics\n      reviewReasonInsightsAnalytics\n    }\n  }\n  \n".concat([Ke.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ye=({data:e,propertyId:n,reviewId:t,isRebrandEnabled:a=!1})=>{var l;const r=(0,s.mK)(),o=(0,u.iQ)(),[c,m]=i.useState(!1),{clickStreamAnalytics:v,reportSubmissionAnalytics:k,reviewReasonInsightsAnalytics:p}=e.reportReview||{};if(!(null==(l=e.reportReview)?void 0:l.callToAction))return null;return i.createElement("div",null,i.createElement(d.N,{padding:a?void 0:{blockstart:"one"}},i.createElement("div",null,i.createElement(G.CW,{data:e.reportReview.callToAction,eventDispatch:e=>{switch(e.type){case G.Fk.Load:v&&o({clientPayload:Ae(Ie.reportSelected.name,Ie.reportSelected.version),serverPayload:v});break;case G.Fk.Submit:m(!0),k&&o({clientPayload:Ae(Ie.reportSubmitted.name,Ie.reportSubmitted.version),serverPayload:k});break;case G.Fk.SetValue:p&&o({clientPayload:Ae(Ie.reportReasonSelected.name,Ie.reportReasonSelected.version),serverPayload:p});break;case G.Fk.Close:c&&((n=t,()=>{const e=r.cache.identify({id:n,__typename:"ProductReview"});r.cache.evict({id:e}),r.cache.gc()})(),m(!1))}var n},key:`${n}-${t}`}))))};Ye.displayName="ReportReview",Ye.fragment=He;var Ue={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewContentFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"review"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewSectionFragment"},directives:[]}]}}]}}].concat(qe.fragment.definitions)),loc:{start:0,end:110,source:{body:"\n  fragment ReviewContentFragment on ProductReview {\n    review {\n      ...ReviewSectionFragment\n    }\n  }\n  \n".concat([qe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},We=({data:e,reviewId:n,isTranslated:t,translatedContent:a})=>{const{review:l}=e;return l?i.createElement(qe,{data:l,reviewId:n,isTranslated:t,translatedContent:a,key:`${n}_${t}_section`}):null};We.displayName="ReviewContent",We.fragment=Ue;var Ze=({data:e})=>{var n;return(null==(n=e.reviewFeedback)?void 0:n.promptId)?i.createElement("div",null,i.createElement(d.N,{padding:{blockstart:"one"}},i.createElement("div",{"data-stid":"product-review-feedback-indicator"},i.createElement(O.i,null,i.createElement("button",{"aria-label":"like",type:"button"},i.createElement(r.LD,{name:"thumb_up",size:r.So.EXTRA_SMALL})))))):null};Ze.displayName="ReviewFeedback",Ze.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewFeedbackFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewFeedback"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promptId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:117,source:{body:"\n  fragment ReviewFeedbackFragment on ProductReview {\n    reviewFeedback {\n      promptId\n      __typename\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Je=({data:e})=>{const{seoStructuredData:n}=e;return n?i.createElement(N.M,{size:7,tag:"h5",itemScope:n.itemscope,itemProp:n.itemprop,itemType:n.itemtype,hidden:!0},i.createElement("span",{itemProp:"name"},n.content)):null};Je.displayName="ReviewSeo",Je.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewSeoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"seoStructuredData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemscope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemprop"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemtype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:174,source:{body:"\n  fragment ReviewSeoFragment on ProductReview {\n    seoStructuredData {\n      content\n      itemscope\n      itemprop\n      itemtype\n      content\n      __typename\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var en=({data:e})=>{const{summary:n}=e,{primary:t,accessibilityLabel:a,secondary:l,supportingMessages:r}=n;return i.createElement(S.w,{space:"two"},t&&i.createElement(F.T,null,i.createElement(N.M,{tag:"h3",size:5,"aria-label":a||""},t)),(l||r.length>0)&&i.createElement(F.T,null,i.createElement("div",null,l&&i.createElement(N.M,{size:7,tag:"h4"},l),r.length>0&&r.map((e,n)=>"EGDSPlainText"===e.__typename&&i.createElement(g.D,{size:300,theme:"standard",key:`review-summary-travel-${n}`},e.text)))))};en.displayName="ReviewSummarySection",en.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewSummarySectionFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"secondary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supportingMessages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSPlainText"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:292,source:{body:"\n  fragment ReviewSummarySectionFragment on ProductReview {\n    summary {\n      accessibilityLabel\n      primary\n      secondary\n      supportingMessages {\n        ... on EGDSPlainText {\n          text\n          accessibility\n          __typename\n        }\n      }\n      __typename\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var nn=({data:e,isLoading:n,isTranslated:t,onTranslateClicked:a})=>{var l;const r=(0,u.iQ)(),{translationInfo:d}=e;if(!d)return null;return n?i.createElement(g.D,{size:200,theme:"standard"},d.loadingMessage):i.createElement(i.Fragment,null,t?i.createElement(k.X,{space:"two",direction:"row",alignItems:"center"},i.createElement(p.C,null,i.createElement("div",null,i.createElement(g.D,{size:200,theme:"standard"},null==(l=null==d?void 0:d.disclaimer)?void 0:l.description))),i.createElement(p.C,null,i.createElement("div",null,i.createElement(O.i,null,i.createElement("button",{type:"button",onClick:a},d.seeOriginalMessage))))):i.createElement(O.i,{inline:!0},i.createElement("button",{type:"button",onClick:()=>{r({clientPayload:Ae(Ie.reviewTranslate.name,Ie.reviewTranslate.version),serverPayload:null==d?void 0:d.clickStreamAnalytics}),a()}},d.initialMessage)))};nn.displayName="ReviewTranslation",nn.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewTranslationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"translationInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"disclaimer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"initialMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"loadingMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"seeOriginalMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetLocale"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:291,source:{body:"\n  fragment ReviewTranslationFragment on ProductReview {\n    translationInfo {\n      disclaimer {\n        id\n        token\n        description\n      }\n      initialMessage\n      loadingMessage\n      seeOriginalMessage\n      targetLocale\n      clickStreamAnalytics\n      __typename\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var tn=({data:e})=>{const{sentiments:n}=e;return n&&0!==(null==n?void 0:n.length)?i.createElement(S.w,{space:"two"},n.map((e,n)=>i.createElement(F.T,{key:`review-sentiments-${n}`},i.createElement(k.X,{direction:"row",space:"two"},(null==e?void 0:e.icon)&&i.createElement(p.C,null,i.createElement(r.LD,{"aria-hidden":!0,size:r.So.SMALL,name:e.icon.id,id:`${e.icon.id}}`})),i.createElement(p.C,null,i.createElement(g.D,{size:200,theme:"standard",inline:!0},e.label)))))):null};tn.displayName="Sentiments",tn.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SentimentsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sentiments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:191,source:{body:"\n  fragment SentimentsFragment on ProductReview {\n    sentiments {\n      __typename\n      label\n      icon {\n        __typename\n        id\n        description\n        token\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var an=({data:e,isSecondaryTheme:n=!1})=>{var t;const{tripSummary:a}=e;return a&&a.text?i.createElement(k.X,{space:"two"},"EGDSGraphicText"===(null==a?void 0:a.__typename)&&"Mark"===(null==(t=a.graphic)?void 0:t.__typename)&&i.createElement(p.C,null,i.createElement($.n,{name:a.graphic.id})),i.createElement(p.C,null,i.createElement(g.D,{size:200,theme:n?"secondary":"standard"},a.text))):null};an.displayName="TripSummary",an.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TripSummaryFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tripSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSPlainText"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EGDSGraphicText"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Mark"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relativePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:653,source:{body:"\n  fragment TripSummaryFragment on ProductReview {\n    tripSummary {\n      __typename\n      ... on EGDSPlainText {\n        text\n        accessibility\n        __typename\n      }\n      ... on EGDSGraphicText {\n        text\n        accessibility\n        graphic {\n          ... on Icon {\n            description\n            id\n            theme\n            title\n            token\n          }\n          ... on Mark {\n            description\n            id\n            size\n            url {\n              relativePath\n              value\n            }\n            __typename\n          }\n\n          __typename\n        }\n        __typename\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var ln=e=>{if(!e)return null;try{return JSON.parse(e)}catch(n){return null}},rn=(e,n)=>{const t=".uitk-sheet",a=t=>{var i;(null==(i=n.current)?void 0:i.contains(t.target))||e()},l=n=>{"Escape"===n.key&&e()};i.useEffect(()=>((()=>{const e=document.querySelector(t);e&&(e.addEventListener("click",a),e.addEventListener("keydown",l))})(),()=>(()=>{const e=document.querySelector(t);e&&(e.removeEventListener("click",a),e.removeEventListener("keydown",l))})()),[])},dn=({data:e,prefix:n})=>{var t;const a=i.useRef(null),[l,s]=i.useState(!1),o=(0,u.KY)(),{formatText:m}=(0,X.useLocalization)(),{tnlFields:v}=e,{label:k,accessibility:p,popupText:y,icon:S,link:F,analytics:f}=((e,n)=>{var t,a;const l=i.useMemo(()=>e&&e.length>0?(e=>e.reduce((e,n)=>(e[n.key]=n.value,e),{}))(e):{},[e]),r=ln(l[`${n}_reviewIcon`]),d=ln(l[`${n}_reviewAnalytics`]),s=ln(l[`${n}_reviewLearnMoreLink`]);return{label:l[`${n}_reviewLabel`],accessibility:l[`${n}_reviewAccessibility`],popupText:l[`${n}_reviewPopup`],icon:(null==r?void 0:r.token)?r:null,link:(null==(a=null==(t=null==s?void 0:s.action)?void 0:t.resource)?void 0:a.value)&&(null==s?void 0:s.text)?s:null,analytics:(null==d?void 0:d.referrerId)&&(null==d?void 0:d.linkName)?d:null}})(v,n),N=i.useCallback(()=>{const{referrerId:e,linkName:n}=f||{};e&&n&&o(e,n)},[f,o]),E=i.useCallback(()=>{l||N(),s(e=>!e)},[l,N]),b=i.useCallback(()=>{s(!1)},[]);rn(b,a);const w=i.useMemo(()=>{var e;return i.createElement(O.i,{size:"small",domRef:a,onClick:E},i.createElement("button",{type:"button","aria-label":p||k,role:"link"},i.createElement("span",null,k),S&&i.createElement(r.LD,{id:S.id,name:S.token,size:S.size&&r.So[S.size]?r.So[S.size]:r.So.SMALL,theme:null!=(e=S.theme)?e:void 0,description:S.description,title:S.title||""})))},[E,p,k,S]);return k&&y?i.createElement(z.P,{type:"relative"},w,i.createElement(x.K,{isVisible:l},i.createElement(P.t,{autoPosition:!0,position:(h=n,h===Be?{block:Q.t.TRAILING,inline:Q.t.LEADING}:{block:Q.t.TRAILING,inline:Q.t.TRAILING}),triggerRef:a,width:n===Be?320:268,type:"popover",isVisible:l,ariaLabel:null!=p?p:k,returnFocusOnClose:!0,onDismiss:b},i.createElement(q.t,null,i.createElement(B.q,{type:"button",onClick:b,name:"sheet-close-button"},i.createElement(r.LD,{name:"close",size:r.So.MEDIUM,title:null!=(t=m("close.dialog"))?t:"Close",id:"sheet-close-button"}))),i.createElement(L.Y,{padded:!1},i.createElement(d.N,{padding:{block:"six",inlinestart:"six"}},i.createElement("div",null,i.createElement(g.D,{size:300},y),F&&i.createElement(c.Fg,{data:F,size:"medium",inline:!0}))))))):null;var h},sn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"disclaimer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"impressionAnalytics"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ManagementResponseFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReportReviewFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewContentFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewFeedbackFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewSeoFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SentimentsFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewSummarySectionFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewTranslationFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"TripSummaryFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"tnlFields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}].concat(je.fragment.definitions,Ye.fragment.definitions,We.fragment.definitions,Ze.fragment.definitions,Je.fragment.definitions,tn.fragment.definitions,en.fragment.definitions,nn.fragment.definitions,an.fragment.definitions)),loc:{start:0,end:450,source:{body:"\n  fragment ReviewFragment on ProductReview {\n    __typename\n    id\n    disclaimer\n    impressionAnalytics\n    ...ManagementResponseFragment\n    ...ReportReviewFragment\n    ...ReviewContentFragment\n    ...ReviewFeedbackFragment\n    ...ReviewSeoFragment\n    ...SentimentsFragment\n    ...ReviewSummarySectionFragment\n    ...ReviewTranslationFragment\n    ...TripSummaryFragment\n    tnlFields {\n      key\n      value\n    }\n  }\n  \n  \n  \n  \n  \n  \n  \n  \n  \n".concat([je.fragment.loc.source.body,Ye.fragment.loc.source.body,We.fragment.loc.source.body,Ze.fragment.loc.source.body,Je.fragment.loc.source.body,tn.fragment.loc.source.body,en.fragment.loc.source.body,nn.fragment.loc.source.body,an.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},on={kind:"Document",definitions:de([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TranslateReviewQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locale"}},type:{kind:"NamedType",name:{kind:"Name",value:"Locale"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reviewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"translateReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"locale"},value:{kind:"Variable",name:{kind:"Name",value:"locale"}}},{kind:"Argument",name:{kind:"Name",value:"reviewId"},value:{kind:"Variable",name:{kind:"Name",value:"reviewId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"highlightedText"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSSpannableTextFragment"},directives:[]}]}}]}}]}}].concat(c.$B.fragment.definitions)),loc:{start:0,end:278,source:{body:"\n  query TranslateReviewQuery($context: ContextInput!, $locale: Locale, $reviewId: String!) {\n    translateReview(context: $context, locale: $locale, reviewId: $reviewId) {\n      text\n      title\n      highlightedText {\n        ...EGDSSpannableTextFragment\n      }\n    }\n  }\n  \n".concat([c.$B.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},cn=({data:e,propertyId:n})=>{var t;const[a,l]=i.useState(!1),{context:r}=(0,o.R)(),[d,c]=(0,s._l)(on),m=c.data,{called:y,loading:f}=c,{disclaimer:N,id:E}=e,b={clientPayload:Ae(Ie.individualReview.name,Ie.individualReview.version),serverPayload:e.impressionAnalytics},w=1===(0,v.useExperiment)("Verified_Reviews_BEX_HCOM",!1).exposure.bucket;return i.createElement(u.E0,{eventData:b},i.createElement("article",{id:E,key:`review_${E}_${a}_${f}`},i.createElement(S.w,{space:"two"},N&&i.createElement(F.T,null,i.createElement(g.D,{size:200,theme:"standard"},N)),i.createElement(F.T,null,i.createElement(en,{data:e})),i.createElement(F.T,null,i.createElement(tn,{data:e})),i.createElement(F.T,null,i.createElement(nn,{data:e,isLoading:f,isTranslated:a,onTranslateClicked:()=>{y||d({variables:{context:r,locale:r.locale,reviewId:E}}),l(!a)}})),i.createElement(F.T,null,i.createElement(We,{data:e,reviewId:E,isTranslated:a,translatedContent:null==m?void 0:m.translateReview,key:`review_content_${E}_${a}_${f}`})),i.createElement(F.T,null,i.createElement(Je,{data:e})),i.createElement(F.T,null,i.createElement(k.X,{space:"two",alignItems:"center"},i.createElement(p.C,null,i.createElement(an,{data:e})),w&&i.createElement(i.Fragment,null,(null==e?void 0:e.tnlFields)&&e.tnlFields.length>1&&(null==(t=null==e?void 0:e.tripSummary)?void 0:t.text)&&i.createElement(p.C,null,i.createElement(g.D,{"aria-hidden":"true",weight:"bold",size:200},"")),i.createElement(p.C,{shrink:0},i.createElement("div",null,i.createElement(dn,{data:e,prefix:Be})))))),(e.reviewFeedback||e.reportReview)&&i.createElement(F.T,null,i.createElement(k.X,{direction:"row",space:"one"},i.createElement(p.C,null,i.createElement(Ze,{data:e})),i.createElement(p.C,null,i.createElement(Ye,{data:e,propertyId:n,reviewId:E})))),i.createElement(F.T,null,i.createElement(je,{data:e})))))};cn.displayName="Review",cn.fragment=sn;var mn=({data:e})=>{const{managementResponses:n}=e;return n?i.createElement(d.N,{border:["inlinestart"],padding:{inlinestart:"three"},margin:{inlinestart:"three"}},n.map((e,n)=>i.createElement("article",{key:`review-management-response${n}-key`},(null==e?void 0:e.text)&&i.createElement(d.N,{padding:{blockend:"one"}},i.createElement(g.D,{size:200,theme:"standard"},e.text)),(null==e?void 0:e.title)&&i.createElement(g.D,{weight:"bold",size:200},e.title)))):null};mn.displayName="ManagementResponseRebrand",mn.fragment=je.fragment;var un=({data:e,isLoading:n,isTranslated:t,onTranslateClicked:a,tnlFields:l})=>{var d;const s=(0,u.iQ)(),{translationInfo:o}=e,c=null==l?void 0:l.find(e=>"egtnl64435_reviewTranslateIcon"===e.key),m=ln((null==c?void 0:c.value)||"");if(!o)return null;const v=(null==m?void 0:m.token)&&i.createElement(r.LD,{id:m.id,name:m.token,size:m.size&&r.So[m.size]?r.So[m.size]:r.So.SMALL,theme:m.theme,description:m.description,title:m.title});return n?i.createElement(g.D,{size:200,theme:"standard"},o.loadingMessage):i.createElement(i.Fragment,null,t?i.createElement(k.X,{space:"two",direction:"row",alignItems:"center"},i.createElement(p.C,null,i.createElement("div",null,i.createElement(g.D,{size:200,theme:"standard"},null==(d=null==o?void 0:o.disclaimer)?void 0:d.description))),i.createElement(p.C,null,i.createElement("div",null,i.createElement(O.i,{size:"small"},i.createElement("button",{type:"button",onClick:a},v,o.seeOriginalMessage))))):i.createElement(O.i,{size:"small"},i.createElement("button",{type:"button",onClick:()=>{s({clientPayload:Ae(Ie.reviewTranslate.name,Ie.reviewTranslate.version),serverPayload:null==o?void 0:o.clickStreamAnalytics}),a()}},v,o.initialMessage)))};un.displayName="ReviewTranslationRebrand",un.fragment=nn.fragment;var vn=({data:e,propertyId:n,isLoading:t,isTranslated:a,onTranslateClicked:l})=>{const{id:r,reportReview:d,translationInfo:s}=e;return d||s?i.createElement(k.X,{direction:"row",space:"four"},d&&i.createElement(p.C,null,i.createElement(Ye,{data:e,propertyId:n,reviewId:r,isRebrandEnabled:!0})),i.createElement(p.C,null,i.createElement(un,{data:e,isLoading:t,isTranslated:a,onTranslateClicked:l,tnlFields:e.tnlFields}))):null},kn=({data:e,isSecondaryTheme:n=!1})=>{const{summary:t}=e,{secondary:a,supportingMessages:l}=t;return i.createElement(d.N,{padding:{inlineend:"one"}},i.createElement("div",null,a&&i.createElement(g.D,{size:400,weight:"medium",theme:"standard",wordBreak:!0},a),i.createElement(an,{data:e,isSecondaryTheme:n}),(null==l?void 0:l.length)>0&&l.map((e,n)=>"EGDSPlainText"===e.__typename&&i.createElement(g.D,{size:200,theme:"secondary",key:`review-summary-travel-${n}`},e.text))))},pn=({data:e,propertyId:n})=>{const[t,a]=i.useState(!1),{context:l}=(0,o.R)(),[r,d]=(0,s._l)(on),c=d.data,{loading:m,called:v}=d,{id:y,summary:f,disclaimer:E}=e,{primary:b,accessibilityLabel:w}=f,h={clientPayload:Ae(Ie.individualReview.name,Ie.individualReview.version),serverPayload:e.impressionAnalytics},T=b&&i.createElement(N.M,{tag:"h4",size:5,"aria-label":w||""},b);return i.createElement(u.E0,{eventData:h},i.createElement("article",{id:y,key:`review_${y}`},i.createElement(S.w,{space:"four"},E&&i.createElement(F.T,null,i.createElement(g.D,{size:200,theme:"standard"},E)),i.createElement(F.T,null,T),i.createElement(F.T,null,i.createElement(We,{data:e,reviewId:y,isTranslated:t,translatedContent:null==c?void 0:c.translateReview,key:`review_content_${y}`})),i.createElement(F.T,null,i.createElement(Je,{data:e})),i.createElement(F.T,null,i.createElement(tn,{data:e})),i.createElement(F.T,null,i.createElement(k.X,{direction:"row",justifyContent:"space-between"},i.createElement(p.C,null,i.createElement(kn,{data:e,isSecondaryTheme:!0})),i.createElement(p.C,{alignSelf:"end",shrink:0},i.createElement("div",null,i.createElement(dn,{data:e,prefix:$e}))))),i.createElement(F.T,null,i.createElement(vn,{data:e,propertyId:n,isLoading:m,isTranslated:t,onTranslateClicked:()=>{v||r({variables:{context:l,locale:l.locale,reviewId:y}}),a(!t)}})),i.createElement(F.T,null,i.createElement(mn,{data:e})))))};pn.displayName="ReviewRebrand",pn.fragment=cn.fragment;var gn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"DetailsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviews"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}].concat(cn.fragment.definitions)),loc:{start:0,end:116,source:{body:"\n  fragment DetailsFragment on ProductReviews {\n    details {\n      ...ReviewFragment\n      __typename\n    }\n  }\n  \n".concat([cn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},yn=({data:e,propertyId:n})=>{const{details:t}=e,a=(0,i.useRef)(null),{bucket:l}=(0,v.useExperiment)("Vrbo_Verified_Reviews",!1).exposure,r=function(){const e=(0,T.zy)();return(0,i.useMemo)(()=>new URLSearchParams(e.search),[e.search])}(),d=function(){const e=(0,T.Zp)(),n=(0,T.zy)();return(0,i.useCallback)(t=>{const i=new URLSearchParams(n.search);i.delete(t),e(`${n.pathname}?${i}`,{replace:!0})},[e,n])}();return i.useEffect(()=>{var e,n;if(r.get("reviewId")){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches;null==(e=a.current)||e.scrollIntoView({behavior:t?"auto":"smooth",block:"start"}),null==(n=a.current)||n.focus(),d("reviewId")}},[d,r]),t&&0!==t.length?i.createElement(w.g,null,t.map((e,d)=>{const{id:s}=e;return i.createElement(h.E,{padded:["blockstart","blockend"],border:d<t.length-1?"bottom":void 0,key:`product-review-${s}`,"data-stid":"product-reviews-list-item"},i.createElement("div",{ref:e.id===r.get("reviewId")?a:null,tabIndex:e.id===r.get("reviewId")?0:void 0},1===l?i.createElement(pn,{data:e,key:`review-card-${d}`,propertyId:n}):i.createElement(cn,{data:e,key:`review-card-${d}`,propertyId:n})))})):null};yn.displayName="Details",yn.fragment=gn;var Sn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"FilteredReviewsFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviewDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"impressionAnalytics"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"PaginateFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"NoResultsMessageFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"DetailsFragment"},directives:[]}]}}]}}].concat(Le.fragment.definitions,Oe.fragment.definitions,yn.fragment.definitions)),loc:{start:0,end:206,source:{body:"\n  fragment FilteredReviewsFragment on ProductReviewDetails {\n    reviews {\n      impressionAnalytics\n      ...PaginateFragment\n      ...NoResultsMessageFragment\n      ...DetailsFragment\n    }\n  }\n  \n  \n  \n".concat([Le.fragment.loc.source.body,Oe.fragment.loc.source.body,yn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Fn=({data:e,propertyId:n,fetchMore:t,showNextPage:a,loading:l,clearFilters:r})=>{if(l)return i.createElement(Ve,{times:8,"data-stid":"reviews-filter-applied-loading"});if(!e||!e.reviews)return null;const{reviews:d}=e,s={clientPayload:Ae(Ie.reviewsDetailsSection.name,Ie.reviewsDetailsSection.version),serverPayload:d.impressionAnalytics};return i.createElement(u.E0,{eventData:s},i.createElement("section",{"data-stid":"reviews-container"},i.createElement(yn,{data:d,propertyId:n}),i.createElement(Oe,{data:d,fetchMore:t,page:(()=>{var e;const n=(null==(e=d.details)?void 0:e.length)||0;return Math.ceil(n/10)})(),showNextPage:a}),i.createElement(Le,{data:d,handleClick:r})))};Fn.displayName="FilteredReviews",Fn.fragment=Sn;var fn=()=>i.createElement(S.w,{space:"six"},i.createElement(F.T,null,i.createElement(S.w,{rows:["48px"],columns:12,space:"two"},i.createElement(F.T,{colSpan:10},i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:8}))),i.createElement(F.T,{colSpan:2},i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:48}))))),i.createElement(F.T,null,i.createElement(S.w,{rows:["48px"],columns:12,space:"six"},i.createElement(F.T,{colSpan:6},i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:8}))),i.createElement(F.T,{colSpan:6},i.createElement(y.M,{imageFit:"cover"},i.createElement(f.R,{type:"block",cornerRadius:8})))))),Nn=({times:e})=>i.createElement(S.w,{space:"three","data-stid":"product-reviews-sorting-and-filters-placeholder"},i.createElement(F.T,null,i.createElement(fn,null)),i.createElement(F.T,null,i.createElement(Ve,{times:e}))),En=()=>i.createElement(k.X,{direction:"column",space:"four"},i.createElement(p.C,null,i.createElement(f.R,{type:"line",lineHeight:12,lineLength:"secondary"})),i.createElement(p.C,null,i.createElement(k.X,{space:"two"},i.createElement(p.C,null,i.createElement(f.R,{type:"line",lineHeight:32,lineLength:"primary"})),i.createElement(p.C,null,i.createElement(f.R,{type:"line",lineHeight:32,lineLength:"primary"}))))),bn=({times:e})=>i.createElement(k.X,{direction:"column",space:"twelve","data-stid":"product-reviews-sorting-and-filters-placeholder"},i.createElement(p.C,null,i.createElement(En,null)),i.createElement(p.C,null,i.createElement(Ge,{times:e}))),wn=({data:e,filters:n,onSubmitFilters:t})=>{const[a,l]=(0,i.useState)(n.search),d=e.sortAndFilter.find(e=>"reviewsSearch"===e.name),s=(0,u.iQ)();(0,i.useEffect)(()=>{n.isFilterApplied||l(n.search)},[n]);const o=(0,i.useMemo)(()=>({...n,search:a,travelerType:"",isFilterApplied:!0}),[n,a]),c=(0,i.useCallback)(e=>{n.search!==a&&t(o),e.preventDefault()},[n.search,t,a,o]),m=(0,i.useCallback)(e=>{const{value:i}=e.target;l(i),""===i.trim()&&n.search&&t({...n,isFilterApplied:!0,search:""})},[n,t]),v=(0,i.useCallback)(()=>{n.search?t({...n,isFilterApplied:!0,search:""}):l("")},[n,t]),g=(0,i.useCallback)(()=>{const e=document.getElementById("search-input-box");null==e||e.scrollIntoView({behavior:"smooth",block:"start"}),(null==d?void 0:d.initiatedAnalytics)&&s({clientPayload:Ae(Ie.reviewSearchInit.name,Ie.reviewSearchInit.version),serverPayload:d.initiatedAnalytics})},[d,s]);if(!(d&&d.label&&d.name&&d.graphic))return null;const{label:y,name:S,graphic:F,submittedAnalytics:f}=d,{id:N,description:E,token:b}=F,w=i.createElement(i.Fragment,null,i.createElement(p.C,null,i.createElement(H.V,{size:300,id:"search-input-box",label:y,name:S,onChange:m,hasClearButton:!0,value:a,onClick:g,handleClear:v,autoComplete:"off"})),i.createElement(p.C,null,i.createElement(j.y,{size:D.V.LARGE,type:"submit",name:E,title:E,id:"search-btn","aria-label":E,disabled:!1},i.createElement(r.LD,{name:b,id:N}))));return i.createElement(K.m,{onSubmit:e=>{c(e),0!==(null==a?void 0:a.trim().length)&&s({clientPayload:Ae(Ie.reviewSearchSubmit.name,Ie.reviewSearchSubmit.version),serverPayload:f})}},i.createElement(Y.LM,null,i.createElement(Y.NP,null,i.createElement(k.X,{space:"four"},w)),i.createElement(Y.rw,null,i.createElement(k.X,{space:"two"},w))))};wn.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SearchTextFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSelected"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optionValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SearchTextIconFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"initiatedAnalytics"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SearchTextIconFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:530,source:{body:"\n  fragment SearchTextFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      name\n      label\n      options {\n        label\n        isSelected\n        optionValue\n        description\n        clickAnalytics {\n          linkName\n          referrerId\n        }\n        clickStreamAnalytics\n      }\n      graphic {\n        ...SearchTextIconFragment\n      }\n      clickStreamAnalytics\n      submittedAnalytics\n      initiatedAnalytics\n    }\n  }\n\n  fragment SearchTextIconFragment on Icon {\n    description\n    id\n    token\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},wn.displayName="SearchBox";var hn=({data:e,value:n,onSubmit:t,optionSelectEvent:a,openEvent:l})=>{const r=(0,u.iQ)(),{name:d,label:s,options:o,clickStreamAnalytics:c}=e;return i.createElement(U._,{id:d,label:s||"",value:n,name:d,emptyState:!1,onChange:e=>{const n=e.currentTarget.value;t(n);const i=o.find(e=>e.optionValue===n);(null==i?void 0:i.clickStreamAnalytics)&&r({clientPayload:Ae(a.name,a.version),serverPayload:i.clickStreamAnalytics})},onClick:()=>{c&&r({clientPayload:Ae(l.name,l.version),serverPayload:c})}},i.createElement(i.Fragment,null,o.map((e,n)=>e.optionValue&&e.label&&i.createElement("option",{key:n,value:e.optionValue,label:e.label,"aria-selected":e.isSelected},e.label))))};hn.displayName="FilterViewModel";var Tn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"SortTypeFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FilterViewModelFragment"},directives:[]}]}}]}}].concat((hn.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FilterViewModelFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSelected"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optionValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SearchTextIconFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"initiatedAnalytics"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SearchTextIconFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:464,source:{body:"\n  fragment FilterViewModelFragment on FilterViewModel {\n    name\n    label\n    options {\n      label\n      isSelected\n      optionValue\n      description\n      clickAnalytics {\n        linkName\n        referrerId\n      }\n      clickStreamAnalytics\n    }\n    graphic {\n      ...SearchTextIconFragment\n    }\n    clickStreamAnalytics\n    submittedAnalytics\n    initiatedAnalytics\n  }\n\n  fragment SearchTextIconFragment on Icon {\n    description\n    id\n    token\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}).definitions)),loc:{start:0,end:123,source:{body:"\n  fragment SortTypeFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...FilterViewModelFragment\n    }\n  }\n  \n".concat([hn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Rn=({data:e,filters:n,onSubmitFilters:t})=>{const a=e.sortAndFilter.find(e=>"sortBy"===e.name);(0,i.useEffect)(()=>{var e;if(!n.isFilterApplied&&(null==(e=null==a?void 0:a.options)?void 0:e.length)){const e=null==a?void 0:a.options.find(e=>!0===e.isSelected);(null==e?void 0:e.optionValue)&&n.sortBy!==e.optionValue&&t(n=>({...n,sortBy:null==e?void 0:e.optionValue}))}},[null==a?void 0:a.options,n.sortBy,n.isFilterApplied,t]);const l=(0,i.useCallback)(e=>{t(n=>({...n,sortBy:e,search:"",isFilterApplied:!0}))},[t]);return a&&a.options&&a.label&&0!==a.options.length?i.createElement(hn,{data:a,value:n.sortBy,onSubmit:l,optionSelectEvent:Ie.sortBy,openEvent:Ie.sortByOpened}):null};Rn.displayName="SortType",Rn.fragment=Tn;var Cn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelerTypeFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FilterViewModelFragment"},directives:[]}]}}]}}].concat(hn.fragment.definitions)),loc:{start:0,end:127,source:{body:"\n  fragment TravelerTypeFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...FilterViewModelFragment\n    }\n  }\n  \n".concat([hn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Dn=({data:e,filters:n,onSubmitFilters:t})=>{var a;const l=e.sortAndFilter.find(e=>"travelerType"===e.name);(0,i.useEffect)(()=>{if(!n.isFilterApplied){const e=null==l?void 0:l.options.find(e=>!0===e.isSelected);t(n=>({...n,travelerType:(null==e?void 0:e.optionValue)||""}))}},[l,t,n.isFilterApplied]);const r=(0,i.useCallback)(e=>{t(n=>({...n,travelerType:e,search:"",isFilterApplied:!0}))},[t]);return(null==l?void 0:l.label)&&0!==(null==(a=l.options)?void 0:a.length)?i.createElement(hn,{data:l,value:n.travelerType,onSubmit:r,optionSelectEvent:Ie.travelerType,openEvent:Ie.travelerTypeOpened}):null};Dn.displayName="TravelerType";var In={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"SortAndFiltersFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviewDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelerTypeFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SortTypeFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SearchTextFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}].concat((Dn.fragment=Cn).definitions,Rn.fragment.definitions,wn.fragment.definitions)),loc:{start:0,end:201,source:{body:"\n  fragment SortAndFiltersFragment on ProductReviewDetails {\n    sortAndFilter {\n      ...TravelerTypeFragment\n      ...SortTypeFragment\n      ...SearchTextFragment\n      __typename\n    }\n  }\n  \n  \n  \n".concat([Dn.fragment.loc.source.body,Rn.fragment.loc.source.body,wn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},An=({data:e,filters:n,onSubmitFilters:t})=>{if(!e||!e.sortAndFilter)return null;const{sortAndFilter:a}=e;return i.createElement("section",{"data-stid":"reviews-filters"},i.createElement(S.w,{space:"six"},i.createElement(F.T,null,i.createElement(wn,{data:a,filters:n,onSubmitFilters:t})),i.createElement(F.T,null,i.createElement(S.w,{columns:2,space:"six"},i.createElement(F.T,null,i.createElement(Rn,{data:a,filters:n,onSubmitFilters:t})),i.createElement(F.T,null,i.createElement(Dn,{data:a,filters:n,onSubmitFilters:t}))))))};An.displayName="SortAndFilters",An.fragment=In;var _n=({data:e,onClick:n})=>{const{id:t,description:a,token:l}=e;return i.createElement(b.y,{size:D.V.SMALL,name:a,title:a,id:"search-toggle-btn","aria-label":a,type:"button",onClick:n},i.createElement(r.LD,{name:l,id:t}))};_n.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SearchToggleButtonFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Icon"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:86,source:{body:"\n  fragment SearchToggleButtonFragment on Icon {\n    description\n    id\n    token\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},_n.displayName="SearchToggleButton";var xn=({children:e,DialogComponent:n,...t})=>{const{triggerRef:a,isVisible:l,onDismiss:r,inlineTrailing:d,width:s}=t,o={position:{inline:d?"trailing":"leading",block:"trailing"},type:"popover",width:null!=s?s:0,applyBlockStartMargin:!0,autoFocus:!0,autoPosition:!1,triggerRef:a,isVisible:l,onDismiss:r},c={type:"bottom",isVisible:l,triggerRef:a,fullWidth:!0,onDismiss:r};return(0,Y.eg)({viewSizes:Y.pf})===Y.pf.SMALL?i.createElement(x.K,{isVisible:l,closeCallback:r},i.createElement(n,null,i.createElement(P.t,{...c,onDismiss:r},e))):i.createElement(x.K,{isVisible:l},i.createElement(P.t,{...o},e))};xn.displayName="shared-ui-FilterSheetWrapper";var Pn=({data:e,onDoneClick:n,eventName:t,extraEventDetails:a})=>{const{accessibility:l,primary:r,actions:s}=e,[o]=s||[],m=(0,u.iQ)(),v={onClick:()=>{n&&(n(),(null==o?void 0:o.analyticsPayload)&&t&&m((0,c.Ft)(t,o.analyticsPayload,"",a)))},"aria-label":l||void 0};return r&&i.createElement(d.N,{border:["blockstart"],padding:{block:"four",inlineend:"six"}},i.createElement(k.X,{justifyContent:"end",space:"two"},i.createElement(p.C,null,i.createElement(j.y,{...v},r))))};Pn.displayName="SheetFooter",Pn.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SheetFooterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ShoppingButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analyticsPayload"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerType"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:210,source:{body:"\n  fragment SheetFooterFragment on ShoppingButton {\n    accessibility\n    buttonType\n    disabled\n    primary\n    actions {\n      accessibility\n      actionId\n      analyticsPayload\n      triggerType\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Ln=e=>{var n;const{data:t,onCloseButtonClick:a,onClearAllButtonClick:l,id:r}=e,{actions:s,primary:o}=t,{primary:c,secondaries:m}=s,u=null!=(n=c.accessibility)?n:"",v=i.useCallback(()=>{null==a||a()},[a]);if(!o||!Array.isArray(m)||0===m.length)return null;const[k]=m;return i.createElement(d.N,{padding:{medium:{inlinestart:"six",inlineend:"three"},small:{inlinestart:"three",inlineend:"three"}}},i.createElement(J.p,{toolbarTitle:o,navigationContent:a?{onClick:v,navIconLabel:u,navButtonId:r}:void 0,toolbarActionContent:k&&i.createElement(ee.p,{onClick:l,"aria-label":k.accessibility||""},k.primary)}))};Ln.displayName="Toolbar",Ln.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewFilterToolbarFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UIToolbar"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"analytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"urls"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"secondaries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primary"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:388,source:{body:"\n  fragment ReviewFilterToolbarFragment on UIToolbar {\n    __typename\n    primary\n    actions {\n      primary {\n        accessibility\n        analytics {\n          urls\n        }\n        disabled\n        icon {\n          id\n          description\n          theme\n          title\n        }\n        primary\n      }\n      secondaries {\n        accessibility\n        primary\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var Mn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewsFilterViewModelFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitButton"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SheetFooterFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"toolbar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewFilterToolbarFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"default"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"disabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isSelected"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optionValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAnalytics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"linkName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referrerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"graphic"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SearchToggleButtonFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clickStreamAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"initiatedAnalytics"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}].concat(_n.fragment.definitions,Ln.fragment.definitions,Pn.fragment.definitions)),loc:{start:0,end:611,source:{body:"\n  fragment ReviewsFilterViewModelFragment on FilterViewModel {\n    title\n    label\n    submitButton {\n      ...SheetFooterFragment\n    }\n    toolbar {\n      ...ReviewFilterToolbarFragment\n    }\n    options {\n      default\n      disabled\n      label\n      isSelected\n      optionValue\n      description\n      clickAnalytics {\n        linkName\n        referrerId\n        __typename\n      }\n      clickStreamAnalytics\n      __typename\n    }\n    graphic {\n      ...SearchToggleButtonFragment\n      __typename\n    }\n    clickStreamAnalytics\n    submittedAnalytics\n    initiatedAnalytics\n    __typename\n  }\n  \n  \n  \n".concat([_n.fragment.loc.source.body,Ln.fragment.loc.source.body,Pn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Vn=({options:e,selectedRadioOption:n,onChange:t,groupName:a="radioGroup",legendLabel:l=" ",idPrefix:r="radio"})=>i.createElement(i.Fragment,null,e&&i.createElement(ne.S,{group:a,legendLabel:l,onChange:t,selected:n,key:`${r}-${a}`},e.map(e=>i.createElement(te.P,{id:`${r}-${e.optionValue}`,key:`${r}-${e.optionValue}`,name:`${r}-${e.optionValue}`,a11yLabel:e.label||"",label:e.label||"",value:e.optionValue||""}))));function Gn(e,n,t=!0){(0,i.useEffect)(()=>{function i(i){const a=i.target;t&&e.current&&!e.current.contains(a)&&n()}return t&&(document.addEventListener("pointerdown",i),document.addEventListener("mousedown",i),document.addEventListener("touchstart",i)),()=>{document.removeEventListener("pointerdown",i),document.removeEventListener("mousedown",i),document.removeEventListener("touchstart",i)}},[e,n,t])}Vn.displayName="shared-ui-RadioButtonGroupSection";var On={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelerTypePillFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewsFilterViewModelFragment"},directives:[]}]}}]}}].concat(Mn.definitions)),loc:{start:0,end:138,source:{body:"\n  fragment TravelerTypePillFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...ReviewsFilterViewModelFragment\n    }\n  }\n  \n".concat([Mn.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},$n=({data:e,filters:n,onSubmit:t,activeFilter:a,setActiveFilter:l})=>{const[r,d]=(0,i.useState)(!1),s=(0,Y.eg)({viewSizes:Y.pf})===Y.pf.SMALL,o=(0,i.useMemo)(()=>e.sortAndFilter.find(e=>"travelerType"===e.title),[e.sortAndFilter]),[m,v]=(0,i.useState)(""),[k,p]=(0,i.useState)(!1),[g,{openDialog:y,closeDialog:S},F]=(0,V.useDialog)(s?"reviews-traveler-type-filter-small":"reviews-traveler-type-filter","pwaDialogNested"),f=(0,i.useRef)(null),N=(0,i.useRef)(null),E=(0,u.iQ)(),b=(0,i.useMemo)(()=>(null==o?void 0:o.options)||[],[null==o?void 0:o.options]),w=(0,i.useMemo)(()=>{const e=b.find(e=>null==e?void 0:e.isSelected),n=b.find(e=>null==e?void 0:e.default);return e||n},[b]);(0,i.useEffect)(()=>{w&&v(w.optionValue||"")},[w]),(0,i.useEffect)(()=>{if(b){const e=b.find(e=>!0===(null==e?void 0:e.default));""!==(null==n?void 0:n.travelerType)&&(null==n?void 0:n.travelerType)!==(null==e?void 0:e.optionValue)||d(!1)}},[null==n?void 0:n.travelerType,b]);const h=(0,i.useCallback)(()=>{s&&(k||y()),p(!k)},[k,s,y]),T=(0,i.useCallback)(()=>{s&&S(),p(!1)},[S,s]),R=(0,i.useCallback)(()=>{k||(w&&v(w.optionValue||""),(null==o?void 0:o.clickStreamAnalytics)&&E((0,c.Ft)(Ie.travelerTypeOpened.name,null==o?void 0:o.clickStreamAnalytics)),null==l||l("travelerType")),h()},[w,k,l,h,E,null==o?void 0:o.clickStreamAnalytics]),C=(0,i.useCallback)(e=>{const{value:n}=e.target;v(n);const t=b.find(e=>e.optionValue===n);(null==t?void 0:t.clickStreamAnalytics)&&E((0,c.Ft)(Ie.travelerType.name,t.clickStreamAnalytics))},[b,E]),D=(0,i.useCallback)(()=>{const e=b.find(e=>!0===(null==e?void 0:e.default));e&&v(e.optionValue||"")},[b]),I=(0,i.useCallback)(()=>{p(!1)},[]),A=(0,i.useCallback)(()=>{var e;if(b.find(e=>e.optionValue===m)&&m!==(null==n?void 0:n.travelerType)&&t){const i={...null!=n?n:{},search:"",withPhotos:"",sortBy:null!=(e=null==n?void 0:n.sortBy)?e:"",travelerType:null!=m?m:"",isFilterApplied:!0};t(i),d(!0)}T()},[T,n,t,b,m]);if((0,i.useEffect)(()=>{!s&&a&&"travelerType"!==a&&T()},[a,T,s]),(0,i.useEffect)(()=>{s&&!g&&I()},[I,s,g]),Gn(N,T,k&&!s),!o||!o.label||!o.title)return null;const{label:_,title:x,toolbar:P,submitButton:M}=o;return i.createElement("div",{ref:N},i.createElement(z.P,{type:"relative"},i.createElement(Z.B,{id:x,triggerPill:!0,onClick:R,selected:r,key:x},_),i.createElement(xn,{triggerRef:f,isVisible:k,DialogComponent:F,onDismiss:I,width:400,key:"traveler-type-filter-sheet"},i.createElement(i.Fragment,null,P&&i.createElement(Ln,{...s?{onCloseButtonClick:T}:{},onClearAllButtonClick:D,id:"traveler-type-filter-toolbar",data:P,key:"traveler-type-filter-toolbar"}),i.createElement(L.Y,{padded:!0,key:"traveler-type-filter-content"},i.createElement(Vn,{options:b?[...b]:[],selectedRadioOption:m,onChange:C,groupName:"travelerType",idPrefix:"traveler-type",key:"traveler-type-filter-content-radio-button-group"})),M&&i.createElement(Pn,{data:M,onDoneClick:A,key:"traveler-type-filter-footer",eventName:Ie.travelerTypeApplied.name,extraEventDetails:{filters:[{category:m}]}})))))};$n.displayName="TravelerTypePill",$n.fragment=On;var Bn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"SortTypeLinkFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewsFilterViewModelFragment"},directives:[]}]}}]}}].concat(Mn.definitions)),loc:{start:0,end:134,source:{body:"\n  fragment SortTypeLinkFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...ReviewsFilterViewModelFragment\n    }\n  }\n  \n".concat([Mn.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},zn=({data:e,filters:n,onSubmit:t,activeFilter:a,setActiveFilter:l})=>{const d=(0,Y.eg)({viewSizes:Y.pf})===Y.pf.SMALL,s=(0,i.useMemo)(()=>e.sortAndFilter.find(e=>"sortBy"===e.title),[e.sortAndFilter]),[o,m]=(0,i.useState)(null),[v,y]=(0,i.useState)(""),[S,{openDialog:F,closeDialog:f},N]=(0,V.useDialog)(d?"reviews-sort-filter-small":"reviews-sort-filter","pwaDialogNested"),[E,b]=(0,i.useState)(!1),w=(0,i.useRef)(null),h=(0,i.useRef)(null),T=(0,u.iQ)(),R=(0,i.useMemo)(()=>(null==s?void 0:s.options)||[],[null==s?void 0:s.options]),C=(0,i.useMemo)(()=>{const e=R.find(e=>null==e?void 0:e.isSelected),n=R.find(e=>null==e?void 0:e.default);return e||n},[R]);(0,i.useEffect)(()=>{C&&(m(C),y(C.optionValue||""))},[C]);const I=(0,i.useCallback)(()=>{d&&(E||F()),b(!E)},[E,d,F]),A=(0,i.useCallback)(()=>{d&&f(),b(!1)},[f,d]),_=(0,i.useCallback)(()=>{E||(C&&y(C.optionValue||""),(null==s?void 0:s.clickStreamAnalytics)&&T((0,c.Ft)(Ie.sortByOpened.name,null==s?void 0:s.clickStreamAnalytics)),null==l||l("sortBy")),I()},[C,E,l,null==s?void 0:s.clickStreamAnalytics,I,T]),x=(0,i.useCallback)(e=>{var i,a;if(m(e),y(e.optionValue||""),e.clickStreamAnalytics&&T((0,c.Ft)(Ie.sortBy.name,e.clickStreamAnalytics)),t&&e.optionValue!==(null==n?void 0:n.sortBy)){const l={...null!=n?n:{},search:"",withPhotos:"",sortBy:null!=(i=e.optionValue)?i:"",travelerType:null!=(a=null==n?void 0:n.travelerType)?a:"",isFilterApplied:!0};t(l)}A()},[A,n,t,T]),P=(0,i.useCallback)(e=>{const{value:n}=e.target;y(n);const t=R.find(e=>e.optionValue===n);(null==t?void 0:t.clickStreamAnalytics)&&T((0,c.Ft)(Ie.sortBy.name,t.clickStreamAnalytics))},[R,T]),M=(0,i.useCallback)(()=>{const e=R.find(e=>!0===(null==e?void 0:e.default));e&&y(e.optionValue||"")},[R]),G=(0,i.useCallback)(()=>{b(!1)},[]),$=(0,i.useCallback)(()=>{var e;const i=R.find(e=>e.optionValue===v);if(i&&i.optionValue!==(null==n?void 0:n.sortBy)&&(m(i),t)){const i={...null!=n?n:{},search:"",withPhotos:"",sortBy:null!=v?v:"",travelerType:null!=(e=null==n?void 0:n.travelerType)?e:"",isFilterApplied:!0};t(i)}A()},[A,n,t,R,v]);if((0,i.useEffect)(()=>{!d&&a&&"sortBy"!==a&&A()},[a,A,d]),(0,i.useEffect)(()=>{d&&!S&&G()},[G,S,d]),Gn(h,A,E&&!d),!s||!s.label||!s.title)return null;const{label:B,toolbar:Q,submitButton:q}=s;return i.createElement(z.P,{type:"relative"},i.createElement(k.X,{direction:"row",space:"two",alignItems:"center",justifyContent:"end"},!d&&i.createElement(p.C,null,i.createElement("div",null,i.createElement(g.D,{align:"right"},B," "))),i.createElement(p.C,null,i.createElement("div",{ref:h},i.createElement(O.i,null,i.createElement("button",{type:"button",role:"link",onClick:_,ref:w,id:"sort-by-button","data-stid":"sort-by-button"},null==o?void 0:o.label," ",i.createElement(r.LD,{name:"expand_more",id:"expand_more"}))),i.createElement(xn,{triggerRef:w,isVisible:E,inlineTrailing:!0,DialogComponent:N,onDismiss:G,key:"sort-type-filter-sheet",width:200},i.createElement(i.Fragment,null,d?i.createElement(i.Fragment,null,Q&&i.createElement(Ln,{onCloseButtonClick:A,onClearAllButtonClick:M,id:"sort-and-filter-sort-by-toolbar",data:Q,key:"sort-and-filter-sort-by-toolbar"}),i.createElement(L.Y,{padded:!0,key:"sort-and-filters-revamp-sheet-content"},i.createElement(Vn,{options:R?[...R]:[],selectedRadioOption:v,onChange:P,groupName:"sortBy",idPrefix:"sort",key:"sort-and-filters-revamp-sheet-content-radio-button-group"})),q&&i.createElement(Pn,{data:q,onDoneClick:$,key:"sort-and-filters-revamp-sheet-footer",extraEventDetails:{sort_type:v},eventName:Ie.sortByApplied.name})):i.createElement(ie.I,null,R.map((e,n)=>e.optionValue&&e.label&&i.createElement(ae.P,{active:e.label===(null==o?void 0:o.label),key:`sort-${e.optionValue}-${n}`},i.createElement(le.x,null,i.createElement(D.u,{onClick:()=>x(e)},e.label)),e.label)))))))))};zn.displayName="SortTypeLink",zn.fragment=Bn;var Qn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"SearchInputFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewsFilterViewModelFragment"},directives:[]}]}}]}}].concat(Mn.definitions)),loc:{start:0,end:133,source:{body:"\n  fragment SearchInputFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...ReviewsFilterViewModelFragment\n    }\n  }\n  \n".concat([Mn.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},qn=i.forwardRef(({data:e,filters:n,onSearchSubmit:t},a)=>{const l=(0,i.useMemo)(()=>e.sortAndFilter.find(e=>"reviewsSearch"===e.title),[e.sortAndFilter]),[r,d]=(0,i.useState)((null==n?void 0:n.search)||""),s=(0,u.iQ)();(0,i.useEffect)(()=>{""===(null==n?void 0:n.search)&&d("")},[n]);const o=(0,i.useCallback)(e=>{d(e.target.value),""===e.target.value.trim()&&(null==n?void 0:n.search)&&t&&t({...n,isFilterApplied:!0,search:""})},[n,t]),m=(0,i.useCallback)(()=>{(null==l?void 0:l.initiatedAnalytics)&&s((0,c.Ft)(Ie.reviewSearchInit.name,l.initiatedAnalytics))},[s,l]),v=(0,i.useCallback)(e=>{"Enter"===e.key&&(null==r?void 0:r.trim().length)>0&&l&&(l.submittedAnalytics&&s((0,c.Ft)(Ie.reviewSearchSubmit.name,l.submittedAnalytics)),t&&r!==(null==n?void 0:n.search)&&t({...n,search:r,withPhotos:"",sortBy:"",travelerType:"",isFilterApplied:!0}))},[r,l,t,s,n]),g=(0,i.useCallback)(()=>{d(""),t&&n&&t({...n,isFilterApplied:!0,search:""})},[n,t]);if(!(null==l?void 0:l.label)||!(null==l?void 0:l.title))return null;const{label:y,title:S}=l;return i.createElement(k.X,{direction:"row"},i.createElement(p.C,null,i.createElement(H.V,{size:300,id:"search-input-box",value:r,onClick:m,label:y,name:S,onChange:o,onKeyDown:v,hasClearButton:!0,handleClear:g,domRef:null!=a?a:null})))});qn.fragment=Qn,qn.displayName="SearchInput";var Xn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"PhotosFilterPillFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SortAndFilterViewModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewsFilterViewModelFragment"},directives:[]}]}}]}}].concat(Mn.definitions)),loc:{start:0,end:138,source:{body:"\n  fragment PhotosFilterPillFragment on SortAndFilterViewModel {\n    sortAndFilter {\n      ...ReviewsFilterViewModelFragment\n    }\n  }\n  \n".concat([Mn.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},jn=({data:e,filters:n,onSearchSubmit:t,setActiveFilter:a})=>{const[l,r]=(0,i.useState)(!1),d=e.sortAndFilter.find(e=>"reviewsWithPhotos"===e.title),s=(0,u.iQ)();(0,i.useEffect)(()=>{""===(null==n?void 0:n.withPhotos)&&r(!1)},[n]);const o=(0,i.useCallback)(e=>{var i,o;if(r(!l),null==a||a("reviewsWithPhotos"),t){t({...n,withPhotos:`${e.target.checked}`,search:"",sortBy:"",travelerType:"",isFilterApplied:!0});const a=null==(o=null==(i=null==d?void 0:d.options)?void 0:i.find(n=>(null==n?void 0:n.label)===`${e.target.checked}`&&(null==n?void 0:n.clickStreamAnalytics)))?void 0:o.clickStreamAnalytics;e.target.checked?s((0,c.Ft)(Ie.reviewPhotosSelected.name,a)):s((0,c.Ft)(Ie.reviewPhotosDeselected.name,a))}},[n,l,t,null==d?void 0:d.options,a,s]);if(!d||!d.label||!d.title)return null;const{label:m,title:v}=d;return i.createElement(Z.B,{id:v,name:m,checked:l,onChange:o,key:v},m)};jn.displayName="PhotosFilterPill";var Kn={kind:"Document",definitions:de([{kind:"FragmentDefinition",name:{kind:"Name",value:"SortAndFiltersRevampFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ProductReviewDetails"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sortAndFilter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelerTypePillFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SortTypeLinkFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SearchInputFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"PhotosFilterPillFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}].concat((jn.fragment=Xn).definitions,qn.fragment.definitions,zn.fragment.definitions,$n.fragment.definitions)),loc:{start:0,end:253,source:{body:"\n  fragment SortAndFiltersRevampFragment on ProductReviewDetails {\n    sortAndFilter {\n      ...TravelerTypePillFragment\n      ...SortTypeLinkFragment\n      ...SearchInputFragment\n      ...PhotosFilterPillFragment\n      __typename\n    }\n  }\n  \n  \n  \n  \n".concat([jn.fragment.loc.source.body,qn.fragment.loc.source.body,zn.fragment.loc.source.body,$n.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Hn=({data:e,filters:n,onFiltersChange:t})=>{var a,l;const[r,s]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),m=(0,i.useRef)(null);if((0,i.useEffect)(()=>{r&&(setTimeout(()=>{var e;null==(e=m.current)||e.focus()},0),c("searchTerm"))},[r]),!e||!e.sortAndFilter)return null;const{sortAndFilter:u}=e,v=null==(l=null==(a=u.sortAndFilter)?void 0:a.find(e=>"reviewsSearch"===e.title))?void 0:l.graphic;return i.createElement("section",{"data-stid":"reviews-filters"},i.createElement(S.w,{space:"four"},i.createElement(F.T,null,i.createElement(S.w,{space:"two"},i.createElement(k.X,{direction:"row",space:"two"},i.createElement(p.C,null,v&&"Icon"===v.__typename&&i.createElement(_n,{data:v,onClick:()=>{s(e=>!e)}})),i.createElement(p.C,null,i.createElement($n,{data:u,filters:n,onSubmit:t,activeFilter:o,setActiveFilter:c})),i.createElement(p.C,null,i.createElement(jn,{data:u,filters:n,onSearchSubmit:t,setActiveFilter:c}))),r&&i.createElement(qn,{data:u,ref:m,filters:n,onSearchSubmit:t}))),i.createElement(F.T,null,i.createElement(d.N,null,i.createElement("div",null,i.createElement(W.j,{blockMargin:"unset"})))),i.createElement(F.T,null,i.createElement(d.N,{margin:{blockend:"three"}},i.createElement("div",null,i.createElement(zn,{data:u,filters:n,onSubmit:t,activeFilter:o,setActiveFilter:c}))))))};Hn.displayName="SortAndFiltersRevamp",Hn.fragment=Kn;var Yn={kind:"Document",definitions:de([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PWAReviewsSortingAndFiltersQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProductIdentifierInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productReviewDetails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"productIdentifier"},value:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}}},{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewsSectionHeading"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSStylizedTextFragment"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"SortAndFiltersFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"FilteredReviewsFragment"},directives:[]}]}}]}}].concat(c.Z3.fragment.definitions,An.fragment.definitions,Fn.fragment.definitions)),loc:{start:0,end:357,source:{body:"\n  query PWAReviewsSortingAndFiltersQuery($productIdentifier: ProductIdentifierInput!, $context: ContextInput!) {\n    productReviewDetails(productIdentifier: $productIdentifier, context: $context) {\n      reviewsSectionHeading {\n        ...EGDSStylizedTextFragment\n      }\n      ...SortAndFiltersFragment\n      ...FilteredReviewsFragment\n    }\n  }\n  \n  \n  \n".concat([c.Z3.fragment.loc.source.body,An.fragment.loc.source.body,Fn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Un={kind:"Document",definitions:de([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PWAReviewsSortingAndFiltersRevampQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ProductIdentifierInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productReviewDetails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"productIdentifier"},value:{kind:"Variable",name:{kind:"Name",value:"productIdentifier"}}},{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewsSectionHeading"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EGDSStylizedTextFragment"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"SortAndFiltersRevampFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"FilteredReviewsFragment"},directives:[]}]}}]}}].concat(c.Z3.fragment.definitions,Hn.fragment.definitions,Fn.fragment.definitions)),loc:{start:0,end:369,source:{body:"\n  query PWAReviewsSortingAndFiltersRevampQuery($productIdentifier: ProductIdentifierInput!, $context: ContextInput!) {\n    productReviewDetails(productIdentifier: $productIdentifier, context: $context) {\n      reviewsSectionHeading {\n        ...EGDSStylizedTextFragment\n      }\n      ...SortAndFiltersRevampFragment\n      ...FilteredReviewsFragment\n    }\n  }\n  \n  \n  \n".concat([c.Z3.fragment.loc.source.body,Hn.fragment.loc.source.body,Fn.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Wn=({inputs:e,skipSsr:n,batchKey:t})=>{var a,l;const[r,d]=(0,i.useState)(1),[c,m]=(0,i.useState)(!1),[u,v]=(0,i.useState)(ce),[k,p]=(0,i.useState)(!1),[g,y]=(0,i.useState)(ce),{context:f}=(0,o.R)(),N=null==(a=null==e?void 0:e.productIdentifier)?void 0:a.id,E={productIdentifier:{id:N,type:"PROPERTY_ID",travelSearchCriteria:{property:(0,i.useMemo)(()=>{var n;return ue(null==(n=e.productIdentifier.travelSearchCriteria)?void 0:n.property,0,g.sortBy,g.travelerType,g.search)},[null==(l=e.productIdentifier.travelSearchCriteria)?void 0:l.property,g.search,g.sortBy,g.travelerType])}},context:f},b=g.search.trim()!==ce.search?"cache-and-network":"cache-first",{data:w,previousData:h,error:T,loading:R,fetchMore:C}=(0,s.IT)(Yn,{context:{batchKey:null!=t?t:"default-product-details-experience-batch-key",shouldLogPerformance:!0},fetchPolicy:b,variables:E,ssr:!n,onCompleted:e=>{u.isFilterApplied&&(null==e?void 0:e.productReviewDetails)&&(v(e=>({...e,isFilterApplied:!1})),d(1),p(!1))}}),D=De(C,E);return(0,i.useEffect)(()=>{var e,n,t,i,a,l;((null==(t=null==(n=null==(e=null==w?void 0:w.productReviewDetails)?void 0:e.reviews)?void 0:n.details)?void 0:t.length)||0)>((null==(l=null==(a=null==(i=null==h?void 0:h.productReviewDetails)?void 0:i.reviews)?void 0:a.details)?void 0:l.length)||0)&&c&&m(!1)},[w,c,r,h]),(0,i.useEffect)(()=>{u.isFilterApplied&&!k&&(p(!0),y(u))},[u,k]),T?null:i.createElement(i.Fragment,null,R&&!u.isFilterApplied&&i.createElement(Nn,{times:8}),i.createElement("div",{"data-stid":"product-reviews-sorting-and-filters"},i.createElement(S.w,{space:"three"},i.createElement(F.T,null,i.createElement(An,{data:(null==w?void 0:w.productReviewDetails)||(null==h?void 0:h.productReviewDetails),filters:u,onSubmitFilters:v})),i.createElement(F.T,null,i.createElement(Fn,{data:null==w?void 0:w.productReviewDetails,propertyId:N,fetchMore:D,page:r,showNextPage:m,loading:u.isFilterApplied})))))};Wn.displayName="sharedui-ReviewsSortingAndFilters";var Zn=({inputs:e,skipSsr:n,batchKey:t})=>{var u,v,k;const{context:p}=(0,o.R)(),g={productIdentifier:{id:null==(u=null==e?void 0:e.productIdentifier)?void 0:u.id,type:"PROPERTY_ID",travelSearchCriteria:{property:(0,i.useMemo)(()=>{var n;return ue(null==(n=e.productIdentifier.travelSearchCriteria)?void 0:n.property,0,ce.sortBy,ce.travelerType,ce.search)},[null==(v=e.productIdentifier.travelSearchCriteria)?void 0:v.property])}},context:p},{data:y,error:S,loading:F}=(0,s.IT)(he,{context:{batchKey:null!=t?t:"default-product-details-experience-batch-key",shouldLogPerformance:!0},variables:g,ssr:!n});if(S)return null;const{summary:f,disclaimer:N,categories:E,tnlFields:b,reviewSummary:w}=(null==y?void 0:y.productReviewDetails)||{},h=null==(k=null==b?void 0:b.find(e=>"egtnl59480_badgeText"===e.key))?void 0:k.value,{expando:T,reviewCategory:R}=E||{};return i.createElement("div",{"data-stid":"product-reviews-details-revamp"},F&&i.createElement(Ee,null),!w&&h&&i.createElement(d.N,{padding:{blockend:"two"}},i.createElement("div",null,i.createElement(a.G,{theme:l.mc.INFO,text:h},i.createElement(r.LD,{name:"trophy",size:r.So.EXTRA_SMALL})))),!w&&f&&i.createElement(we,{data:f,disclaimer:null!=N?N:void 0}),w&&i.createElement(c.XM,{data:w}),w&&N&&i.createElement(pe,{data:N}),i.createElement(m.j,{inputs:{productIdentifier:{id:e.productIdentifier.id,type:m.W.PROPERTY_ID,travelSearchCriteria:e.productIdentifier.travelSearchCriteria}}}),R&&i.createElement(Y.LM,null,i.createElement(Y.NP,null,i.createElement(d.N,{padding:{blockstart:"four"}},i.createElement("div",null,i.createElement(c.h9,{data:R})))),i.createElement(Y.zQ,null,i.createElement(d.N,{padding:{blockstart:"four"}},i.createElement("div",null,i.createElement(c.D7,{data:R,expando:null!=T?T:void 0}))))))};Zn.displayName="sharedui-ProductReviewDetailsRevamp";var Jn=({inputs:e,skipSsr:n,batchKey:t})=>{var a,l,r,c,m,u;const[v,k]=(0,i.useState)(1),[p,g]=(0,i.useState)(!1),[y,f]=(0,i.useState)(me),[E,b]=(0,i.useState)(!1),[w,h]=(0,i.useState)(me),{context:T}=(0,o.R)(),R=null==(a=null==e?void 0:e.productIdentifier)?void 0:a.id,C={productIdentifier:{id:R,type:"PROPERTY_ID",travelSearchCriteria:{property:(0,i.useMemo)(()=>{var n;return ue(null==(n=e.productIdentifier.travelSearchCriteria)?void 0:n.property,0,w.sortBy,w.travelerType,w.search,w.withPhotos)},[null==(l=e.productIdentifier.travelSearchCriteria)?void 0:l.property,w.search,w.sortBy,w.travelerType,w.withPhotos])}},context:T},D=w.search.trim()!==me.search?"cache-and-network":"cache-first",{data:I,previousData:A,error:_,loading:x,fetchMore:P}=(0,s.IT)(Un,{context:{batchKey:null!=t?t:"default-product-details-experience-batch-key",shouldLogPerformance:!0},fetchPolicy:D,variables:C,ssr:!n,onCompleted:e=>{y.isFilterApplied&&(null==e?void 0:e.productReviewDetails)&&(f(e=>({...e,isFilterApplied:!1})),k(1),b(!1))}}),L=De(P,C);(0,i.useEffect)(()=>{var e,n,t,i,a,l;((null==(t=null==(n=null==(e=null==I?void 0:I.productReviewDetails)?void 0:e.reviews)?void 0:n.details)?void 0:t.length)||0)>((null==(l=null==(a=null==(i=null==A?void 0:A.productReviewDetails)?void 0:i.reviews)?void 0:a.details)?void 0:l.length)||0)&&p&&g(!1)},[I,p,v,A]),(0,i.useEffect)(()=>{y.isFilterApplied&&!E&&(b(!0),h(y))},[y,E]);const M=(0,i.useCallback)(()=>{f({...me,isFilterApplied:!0})},[]);if(_)return null;const V=(null==(c=null==(r=null==I?void 0:I.productReviewDetails)?void 0:r.reviewsSectionHeading)?void 0:c.text)||(null==(u=null==(m=null==A?void 0:A.productReviewDetails)?void 0:m.reviewsSectionHeading)?void 0:u.text);return i.createElement(i.Fragment,null,x&&!y.isFilterApplied&&i.createElement(bn,{times:2}),i.createElement("div",{"data-stid":"product-reviews-sorting-and-filters-revamp"},i.createElement(d.N,{margin:{small:{blockstart:"eight"},large:{blockstart:"unset"}}},i.createElement(i.Fragment,null,i.createElement(S.w,{space:"four"},i.createElement(F.T,null,i.createElement(N.M,{size:5},V)),i.createElement(F.T,null,i.createElement(Hn,{data:(null==I?void 0:I.productReviewDetails)||(null==A?void 0:A.productReviewDetails),filters:y,onFiltersChange:f}))),i.createElement(Fn,{data:null==I?void 0:I.productReviewDetails,propertyId:R,fetchMore:L,page:v,showNextPage:g,loading:y.isFilterApplied,clearFilters:M})))))};Jn.displayName="sharedui-ReviewsSortingAndFiltersRevamp";var et=({inputs:e})=>i.createElement(k.X,{direction:"column","data-stid":"product-review-details-compact-layout",space:"xlarge"},i.createElement(p.C,null,i.createElement("div",null,i.createElement(Zn,{inputs:e,skipSsr:!0}))),i.createElement(p.C,null,i.createElement("div",null,i.createElement(Jn,{inputs:e,skipSsr:!0})))),nt=({inputs:e})=>i.createElement(S.w,{columns:3,space:"six","data-stid":"product-review-details-wide-layout"},i.createElement(F.T,{colSpan:1},i.createElement("div",null,i.createElement(Zn,{inputs:e,skipSsr:!0}))),i.createElement(F.T,{colSpan:2},i.createElement("div",null,i.createElement(Jn,{inputs:e,skipSsr:!0})))),tt=({isDialogOpen:e,triggerRef:n,scrollRef:t,DialogComponent:a,children:l,inputs:r})=>{const d=(a,d)=>i.createElement(P.t,{type:a,isVisible:e,returnFocusOnClose:!0,triggerRef:n,height:d},l,i.createElement(L.Y,{contentDomRef:t},i.createElement(et,{inputs:r}))),s=i.createElement(re.R,{centeredSheetSize:"xxxlarge",height:1200,returnFocusOnClose:!0,isVisible:e,triggerRef:n},l,i.createElement(L.Y,{contentDomRef:t},i.createElement(nt,{inputs:r})));return i.createElement(x.K,{isVisible:e},i.createElement(a,null,i.createElement(Y.LM,null,i.createElement(Y.NP,null,d("full")),i.createElement(Y.rw,null,d("centered",1200)),i.createElement(Y.zQ,null,s))))};tt.displayName="ProductReviewsDialogWrapper";var it=({inputs:e,skipSsr:n,batchKey:t})=>{var a;return(null==(a=null==e?void 0:e.productIdentifier)?void 0:a.id)?i.createElement(S.w,{space:"six"},i.createElement(F.T,null,i.createElement(Te,{inputs:e,skipSsr:n,batchKey:t})),i.createElement(F.T,null,i.createElement(Wn,{inputs:e,skipSsr:n,batchKey:t}))):null};it.displayName="shared-ui-ProductReviewsDialogContent";var at=({inputs:e})=>i.createElement(Y.LM,null,i.createElement(Y.NP,null,i.createElement(et,{inputs:e})),i.createElement(Y.rw,null,i.createElement(et,{inputs:e})),i.createElement(Y.zQ,null,i.createElement(nt,{inputs:e})));at.displayName="ProductReviewsDetailsLayout"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-retail-product-review-details.09029137a20db05327cc.js.map