/*@license For license information please refer to shared-ui-lodging-form.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[347],{12970:function(e,n,t){t.d(n,{E1:function(){return H},Jf:function(){return U},b7:function(){return Ke},g$:function(){return Q},jx:function(){return Z},p0:function(){return He},rB:function(){return X},vM:function(){return Qe},xJ:function(){return Ge}});var a=t(96540),i=t(1023),r=t(22913),o=t(73128),d=t(23752),l=t(22828),m=t(93065),s=t(62547),c=t(59671),u=t(2507),v=t(39656),k=t(96912),g=t(6057),p=t(16721),f=t(66090),y=t(38347),N=t(3169),D=t(65113),S=t(85911),F=t(59836),b=t(8997),h=t(53735),I=t(28667),E=t(26143),R=t(72195),C=t(80105),A=t(39366),T=t(8983),x=t(14679),O=t(72127);const L=e=>{const n={};return e.filter(e=>{if("FragmentDefinition"!==e.kind)return!0;const t=e.name.value;return!n[t]&&(n[t]=!0,!0)})};var P=Object.defineProperty,_=Object.defineProperties,V=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,q=(e,n,t)=>n in e?P(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,G=(e,n)=>{for(var t in n||(n={}))M.call(n,t)&&q(e,t,n[t]);if($)for(var t of $(n))B.call(n,t)&&q(e,t,n[t]);return e},w=(e,n)=>_(e,V(n)),U=(e=>(e.ON_CHANGE="ON_CHANGE",e.ON_LOAD="ON_LOAD",e.ON_SUBMIT="ON_SUBMIT",e))(U||{}),j=a.createContext(()=>{}),Q=()=>a.useContext(j),H=j.Provider,K=a.createContext(null),Y=()=>a.useContext(K),W=({children:e,value:n})=>{const{context:t}=(0,r.R)();return a.createElement(K.Provider,{value:w(G({},n),{context:t})},e)},z=a.createContext({addExecutor:e=>[e]}),J=z.Provider,X=e=>{const{inputs:n,data:t,children:i,formRef:o}=e,{context:d}=(0,r.R)(),[l,m]=a.useState([]),s=a.useCallback(e=>{m([...l,e])},[l,m]),c=w(G({},n||{}),{context:d}),u=Q(),v=a.useCallback(e=>{const n=new FormData(e.target);l.some(e=>!e(n,"ON_SUBMIT"))?e.preventDefault():u({type:"submit",event:e,data:n})},[u,l]);if(!t)return null;const{method:k,action:g,id:p}=t;return a.createElement("form",{method:k,action:g,id:p,onSubmit:v,"data-stid":"lodging-form",ref:o},a.createElement(W,{value:c},a.createElement(J,{value:{addExecutor:s}},i)))};X.displayName="sharedui-LodgingForm";var Z=(0,a.createContext)({referrer:{pagePrefix:""}});function ee(){return(0,a.useContext)(Z)}var ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DateFieldRatesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"roomInput"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RoomInput"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dateRange"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PropertyDateRangeInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"propertyInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"propertyId"},value:{kind:"Variable",name:{kind:"Name",value:"propertyId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"propertyCalendar"},arguments:[{kind:"Argument",name:{kind:"Name",value:"dateRange"},value:{kind:"Variable",name:{kind:"Name",value:"dateRange"}}},{kind:"Argument",name:{kind:"Name",value:"roomInput"},value:{kind:"Variable",name:{kind:"Name",value:"roomInput"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"propertyCalendarRates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoFormat"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"displayPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessibilityLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"theme"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"disclaimer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:511,source:{body:"\n  query DateFieldRatesQuery($context: ContextInput!, $propertyId: String!, $roomInput: [RoomInput!]!, $dateRange: PropertyDateRangeInput!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      id\n      propertyCalendar(dateRange: $dateRange, roomInput: $roomInput) {\n        propertyCalendarRates {\n          date {\n            isoFormat\n          }\n          displayPrice\n          accessibilityLabel\n          theme\n        }\n        disclaimer {\n          value\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},te=()=>({}),ae=e=>{switch(e){case"AGGRESSIVE":return"negative";case"HIGHLIGHT":return"positive";default:return""}},ie=(e,n)=>{const t=new Set,a=n.map(e=>(t.add(e.date.isoFormat),e));return e.filter(e=>!t.has(e.date.isoFormat)).forEach(e=>{a.push(e)}),a},re=(e,{fetchMoreResult:n})=>n?!e||"object"==typeof e&&0===Object.keys(e).length?n:{propertyInfo:w(G({},e.propertyInfo),{propertyCalendar:w(G({},e.propertyInfo.propertyCalendar),{disclaimer:n.propertyInfo.propertyCalendar.disclaimer,propertyCalendarRates:ie(e.propertyInfo.propertyCalendar.propertyCalendarRates,n.propertyInfo.propertyCalendar.propertyCalendarRates)})})}:e,oe=(e,n)=>t=>{const{startDate:a,endDate:i}=((e,n)=>{const t=new Date,a=new Date(e);a.setDate(e.getDate()-n/2);let i=a;a<t&&(i=t);const r=new Date(i);return r.setDate(r.getDate()+n),{startDate:i,endDate:r}})(t,90),r={checkInDate:{day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()},checkOutDate:{day:i.getDate(),month:i.getMonth()+1,year:i.getFullYear()}},o=w(G({},n||{}),{dateRange:r});null==e||e({variables:o,updateQuery:re})},de=e=>{const n=Y(),t=w(G({},n),{roomInput:[{adults:2}]}),[r,{data:o,fetchMore:d}]=(0,i._l)(ne,{ssr:!1,variables:t||{}});if(a.useEffect(()=>{e&&r()},[r,e]),!e)return[{},"",te];return[(e=>{if(e)return e.reduce((e,n)=>{const t=G({},e);return t[n.date.isoFormat]={text:n.displayPrice,className:ae(n.theme),ariaLabel:n.accessibilityLabel},t},{})})(null==o?void 0:o.propertyInfo.propertyCalendar.propertyCalendarRates),(null==o?void 0:o.propertyInfo.propertyCalendar.disclaimer.value)||"",oe(d,t)]},le=(e,n,t)=>({id:e,description:n,callback:()=>t(e,n,!0)}),me=e=>e,se={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DateOrderValidationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DateOrderValidation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}],loc:{start:0,end:90,source:{body:"\n  fragment DateOrderValidationFragment on DateOrderValidation {\n    events\n    error\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EndDateRequiredValidationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EndDateRequiredValidation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}],loc:{start:0,end:102,source:{body:"\n  fragment EndDateRequiredValidationFragment on EndDateRequiredValidation {\n    events\n    error\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var ue={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MaxDateRangeValidationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MaxDateRangeValidation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maxDateRange"},arguments:[],directives:[]}]}}],loc:{start:0,end:113,source:{body:"\n  fragment MaxDateRangeValidationFragment on MaxDateRangeValidation {\n    events\n    error\n    maxDateRange\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var ve={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"StartDateRequiredValidationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StartDateRequiredValidation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}],loc:{start:0,end:106,source:{body:"\n  fragment StartDateRequiredValidationFragment on StartDateRequiredValidation {\n    events\n    error\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function ke(e,n,t){return n&&n.length?n.reduce((n,a)=>{let[i,r]=[!0,null];const o=[...n];if(!a.events.find(n=>n===e))return o;switch(a.__typename){case"DateOrderValidation":[i,r]=function(e,n){const{startDate:t,endDate:a}=n;return t&&a&&fe(t)&&fe(a)?[t<a,"end"]:[!0,"start"]}(0,t);break;case"MaxDateRangeValidation":[i,r]=function(e,n){const{startDate:t,endDate:a}=n;if(!(t&&a&&fe(t)&&fe(a)))return[!0,"end"];const i=new Date(t);return i.setDate(i.getDate()+e.maxDateRange),[a<=i,"end"]}(a,t);break;case"StartDateRequiredValidation":[i,r]=function(e,n){const{startDate:t}=n;return t&&fe(t)?[!0,"start"]:[!1,"start"]}(0,t);break;case"EndDateRequiredValidation":[i,r]=function(e,n){const{endDate:t}=n;return t&&fe(t)?[!0,"start"]:[!1,"end"]}(0,t)}return i?o:(o.push({message:a.error,dateType:r}),[...o])},[]):[]}var ge=new Date,pe={kind:"Document",definitions:L([{kind:"FragmentDefinition",name:{kind:"Name",value:"DateFieldFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LodgingFormDateField"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startPlaceholder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startInvalid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endPlaceholder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endInvalid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"buttonText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"daysBookableInAdvance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"midnightBookingOffset"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DateOrderValidationFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"MaxDateRangeValidationFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"StartDateRequiredValidationFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"EndDateRequiredValidationFragment"},directives:[]}]}}]}}].concat(se.definitions,ue.definitions,ve.definitions,ce.definitions)),loc:{start:0,end:480,source:{body:"\n  fragment DateFieldFragment on LodgingFormDateField {\n    startId\n    startName\n    startLabel\n    startPlaceholder\n    startInvalid\n\n    endId\n    endName\n    endLabel\n    endPlaceholder\n    endInvalid\n\n    buttonText\n    daysBookableInAdvance\n    midnightBookingOffset\n\n    validations {\n      ...DateOrderValidationFragment\n      ...MaxDateRangeValidationFragment\n      ...StartDateRequiredValidationFragment\n      ...EndDateRequiredValidationFragment\n    }\n  }\n\n  \n  \n  \n  \n".concat([se.loc.source.body,ue.loc.source.body,ve.loc.source.body,ce.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},fe=e=>Boolean(e&&"Invalid Date"!==e.toDateString()),ye=e=>{if(!e)return;const{year:n,month:t,day:a}=e;return new Date(n,t-1,a)},Ne=e=>({day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}),De=e=>{var n;"function"==typeof(null==(n=null==e?void 0:e.current)?void 0:n.focus)&&e.current.focus()},Se=({autoOpenCalendar:e,closeOnSubmit:n=!0,data:t,endDateRef:i,fieldName:r,isOpenOverride:k,startDateRef:g,onDismiss:p,mediumDateFormatProp:f,showCalendar:y})=>{const N=t,{buttonText:D,daysBookableInAdvance:S,midnightBookingOffset:F,validations:b}=N,h=((e,n)=>{var t={};for(var a in e)M.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&$)for(var a of $(e))n.indexOf(a)<0&&B.call(e,a)&&(t[a]=e[a]);return t})(N,["buttonText","daysBookableInAdvance","midnightBookingOffset","validations"]),{referrer:I}=ee(),[E,R]=a.useState(!1),[C,A]=a.useState(h.startInvalid),[T,x]=a.useState(h.endInvalid),O=Q(),L=Y(),{addExecutor:P}=a.useContext(z),{formatDateString:_,getWeekData:V}=(0,s.useLocalization)(),{warning:q}=(0,c.useLogger)(),U=(0,l.KY)(),j=a.useMemo(()=>{var e;return ye(null==(e=null==L?void 0:L.dateRange)?void 0:e.checkInDate)},[L]),H=a.useMemo(()=>{var e;return ye(null==(e=null==L?void 0:L.dateRange)?void 0:e.checkOutDate)},[L]),K=a.useMemo(()=>((e,n,t)=>({startAnalytics:le(`${e}:ChangeDatesCheckIn`,"Open Date Picker",n),endAnalytics:le(`${e}:ChangeDatesCheckOut`,"Open Date Picker",n),datePickerAnalytics:{closeAnalytics:le(`${e}:ChangeDatesClose`,"Close Date Picker",n),doneAnalytics:t?le(`${e}:ChangeDatesDone`,"Apply Date Picker",n):le(`${e}:Datepicker-Done-Button-Pressed`,"Search Date Picker",n),nextPageAnalytics:le(`${e}:NextMonthClick`,"Next Month Click",n),previousPageAnalytics:le(`${e}:PreviousMonthClick`,"Previous Month Click",n)}}))(I.pagePrefix,U,Boolean(j||H)),[U,j,H,I]),[W,J,X]=(()=>{const[e,n,t]=(0,v.useDialog)("datepicker-start"),[i,r,o]=(0,v.useDialog)("datepicker-end");return[(n,r)=>r===d.mn.END?a.createElement(u.K,{isVisible:i},a.createElement(o,null,a.createElement(a.Fragment,null,n))):a.createElement(u.K,{isVisible:e},a.createElement(t,null,a.createElement(a.Fragment,null,n))),e=>{e===d.mn.END?r.openDialog():n.openDialog()},()=>{i?r.closeDialog():n.closeDialog()}]})(),{exposure:Z,logExperiment:ne}=(0,m.useExperiment)("AvailCal_High_and_Low_Web"),te=a.useMemo(()=>(e,n,t)=>{var a;const o=ke(e,b,{startDate:n,endDate:t});return!o.length||(O({type:"error",field:r,errors:o}),"ON_LOAD"!==e&&("start"===(null==(a=o[0])?void 0:a.dateType)?De(g):De(i)),o.forEach(e=>{"end"===e.dateType?x(e.message):A(e.message)}),!1)},[b,O,r,g,i]),[ae,ie,re]=de(fe(j)&&fe(H)),oe=parseInt(o.aF[V().firstDay.toUpperCase()],10);a.useEffect(()=>{P((e,n)=>{const a=new Date(e.get(t.startName)),i=new Date(e.get(t.endName));return te(n,a,i)}),j&&H&&te("ON_LOAD",j,H),e&&R(!0)},[]),a.useEffect(()=>{R(!!e)},[e]);const se=w(G({},h),{endInvalid:T,startInvalid:C,routerLinkWrapper:me,showDatePicker:void 0!==k?k:E,startAnalytics:K.startAnalytics,endAnalytics:K.endAnalytics,mediumDateFormatProp:f}),ce={analytics:K.datePickerAnalytics,dateFieldProps:se,datePickerContent:ae,footerText:ie,dialogWrapper:W,onOpenCB:(e,n)=>{j&&(null==re||re(j)),n&&(J(e),y&&y(!0)),ne(Z),ae&&Object.keys(ae).length>0&&U(`${I.pagePrefix}.Property_Calendar.Rates`,"Calendar Rates visible to user"),R(!0)},onSubmitCB:(e,t,a)=>{a?(n&&X(),y&&y(!1)):R(!1),(null==e?void 0:e.toDateString())===(null==j?void 0:j.toDateString())&&(null==t?void 0:t.toDateString())===(null==H?void 0:H.toDateString())||(A(""),x(""),te("ON_CHANGE",e,t)?O({type:"change",field:r,value:{dates:e&&t?{checkInDate:Ne(e),checkOutDate:Ne(t)}:void 0}}):a&&n&&X())},onDismissCB:e=>{if(!e||!p)return e?(X(),void(y&&y(!1))):void R(!1);p()},buttonText:D,startDate:j&&fe(j)?_(j,{raw:"yyyy-MM-dd"}):"",endDate:H&&fe(H)?_(H,{raw:"yyyy-MM-dd"}):"",doubleMonths:!0,daysBookableInAdvance:S||void 0,firstDayOfWeek:oe,midnightBookingOffset:F||void 0,validStartDate:_(ge,{raw:"yyyy-MM-dd"}),startDateRef:g,endDateRef:i};return(C||T)&&q("SEARCH_FORM_DATE_RANGE_ERROR",`${C} | ${T}`,`startDate=${j} endDate=${H}`),a.createElement(d.e5,G({},ce))};Se.displayName="DateField",(Se.fragment=pe).__typename="LodgingFormDateField";var Fe=({data:e,className:n,inputRef:t})=>{const{label:i}=e,[r]=(0,a.useContext)(f.I),{amenitiesAdaptExSuccessEvents:o}=r,{referrer:d}=ee(),m=(0,l.KY)(),{track:s}=(0,l._q)();return a.createElement(k.y,{onClick:()=>{m(`${d.pagePrefix}:Datepicker-Check-Availability`,"Check Availability"),[...o].forEach(e=>{s(l.p3.EVENT,{data:(0,p.rPv)(G({},e))})})},className:n,type:"submit",domRef:t,isFullWidth:!0,size:g.V.LARGE},i)};(Fe.fragment={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SubmitButtonFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LodgingFormSubmitButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}}],loc:{start:0,end:76,source:{body:"\n  fragment SubmitButtonFragment on LodgingFormSubmitButton {\n    label\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}).__typename="LodgingFormSubmitButton",Fe.displayName="SubmitButton";var be={kind:"Document",definitions:L([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FormFieldQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ContextInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"propertyInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}},{kind:"Argument",name:{kind:"Name",value:"propertyId"},value:{kind:"Variable",name:{kind:"Name",value:"propertyId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchForm"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DateFieldFragment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"SubmitButtonFragment"},directives:[]}]}}]}}]}}]}}].concat(Se.fragment.definitions,Fe.fragment.definitions)),loc:{start:0,end:280,source:{body:"\n  query FormFieldQuery($context: ContextInput!, $propertyId: String!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      searchForm @client {\n        fields {\n          ...DateFieldFragment\n          ...SubmitButtonFragment\n        }\n      }\n    }\n  }\n\n  \n  \n".concat([Se.fragment.loc.source.body,Fe.fragment.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}};function he(e){const n=function(e){const n=n=>{var t;const{skipSsr:r}=n,o=Y(),{data:d,error:l,loading:m}=(0,i.IT)(be,{context:{shouldLogPerformance:!0},variables:o||{},ssr:!r});if(l||m)return null;const s=null==(t=null==d?void 0:d.propertyInfo.searchForm)?void 0:t.fields.find(n=>n.__typename===e.fragment.__typename);return s?a.createElement(e,G({data:s},n)):null};return n.displayName=`${e.displayName}Query`,n}(e),t=a.memo(t=>{const{data:i}=t;return void 0!==i?a.createElement(e,w(G({},t),{data:i})):a.createElement(n,G({},t))});return t.displayName=`${e.displayName}Isomorphic`,t}function Ie(e,...n){return e.replace(/({\d})/g,e=>{const t=parseInt(e.slice(1,-1),10);return n[t]})}var Ee=a.createContext(()=>{}),Re=()=>a.useContext(Ee),Ce=Ee.Provider,Ae={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelersSummaryFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TravelersSummary"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roomsAndGuests"},arguments:[],directives:[]}]}}],loc:{start:0,end:82,source:{body:"\n  fragment TravelersSummaryFragment on TravelersSummary {\n    roomsAndGuests\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Te=(e,n,t=!0)=>{const{rooms:i}=e,r=a.useMemo(()=>i&&i.length>0?i.reduce((e,n)=>e+(n.adults||0),0):0,[i])+a.useMemo(()=>i&&i.length>0?i.reduce((e,n)=>{var t;return e+((null==(t=n.children)?void 0:t.length)||0)},0):0,[i]),{formatText:o}=(0,s.useLocalization)();if(!t)return r.toString();const d=i.length,{roomsAndGuests:l}=n;return o(l,d,r)},xe=(e,...n)=>{let t=e;return n.forEach((e,n)=>{const a=new RegExp(`\\{${n}\\}`,"g");t=t.replace(a,e.toString())}),t},Oe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ChildrenAgesFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ChildrenAges"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"childAgeUpdatedLiveAnnounce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"selectChildAgeLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"youngestChildAgeText"},arguments:[],directives:[]}]}}],loc:{start:0,end:136,source:{body:"\n  fragment ChildrenAgesFragment on ChildrenAges {\n    childAgeUpdatedLiveAnnounce\n    selectChildAgeLabel\n    youngestChildAgeText\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Le=({childAge:e,childIndex:n,roomIndex:t,data:i})=>{const{childAgeUpdatedLiveAnnounce:r,selectChildAgeLabel:o,youngestChildAgeText:d}=i,m=Re(),s=(0,l.KY)(),{referrer:c}=ee(),u=a.useMemo(()=>(e=>{const n=[];for(let t=0;t<=17;t+=1){const a=0===t?Ie(e,1):t.toString();n.push({value:`${t}`,name:a})}return n})(d),[d]),v=`child-${t}-${n}`,k=`age-${n}`;return a.createElement(x._,{label:Ie(o,n+1),id:k,name:v,value:e.toString(),onChange:e=>{const a=parseInt(e.target.value,10);Number.isNaN(a)||m({type:"UPDATE_CHILD_AGE",roomIndex:t,childIndex:n,childAge:a}),s(`${c.pagePrefix}:ROOM.${t}.Child.${n}.AGE.${a}`,"Child age update"),(0,A.liveAnnounce)(Ie(r,n,a),A.Level.POLITE)}},u.map(e=>a.createElement("option",{key:e.value,value:e.value},e.name)))};Le.displayName="ChildrenAges",Le.fragment=Oe;var Pe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelersStepInputFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StepInput"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"increaseText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"decreaseText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[]}]}}],loc:{start:0,end:114,source:{body:"\n  fragment TravelersStepInputFragment on StepInput {\n    title\n    increaseText\n    decreaseText\n    caption\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},_e=({data:e,min:n,max:t,roomIndex:i,roomCount:r,room:o,travelerType:d})=>{var m;const{title:s,increaseText:c,decreaseText:u,caption:v}=e,{referrer:k}=ee(),g=(0,l.KY)(),p=Re(),f="adults"===d?"UPDATE_ADULTS_COUNT":"UPDATE_CHILDREN_COUNT",y=a.useMemo(()=>({id:`${k.pagePrefix}:Guest`,description:"Adjust guest count in change search",callback:(e,n)=>g(e,n)}),[g]),N=`room-${r}-${i}-${d}`,D="adults"===d?o.adults:null==(m=o.children)?void 0:m.length;return a.createElement(O.W,{label:s,incrementText:Ie(c,i+1),incrementId:`${N}-increase`,decrementText:Ie(u,i+1),decrementId:`${N}-decrease`,description:v||void 0,min:n,max:t,value:D,onChange:e=>{const n=parseInt(e.target.value,10);Number.isNaN(n)||p({type:f,roomIndex:i,count:n})},analytics:y,id:N})};_e.displayName="TravelersStepInput",_e.fragment=Pe;var Ve={kind:"Document",definitions:L([{kind:"FragmentDefinition",name:{kind:"Name",value:"RoomFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RoomField"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roomTitleAriaLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roomTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removeRoomButtonLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removeRoomButtonAriaLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roomRemovedLiveAnnounce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"adultsStepInput"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelersStepInputFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"childrenStepInput"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelersStepInputFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"childrenAges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ChildrenAgesFragment"},directives:[]}]}}]}}].concat(Pe.definitions,Oe.definitions)),loc:{start:0,end:359,source:{body:"\n  fragment RoomFragment on RoomField {\n    roomTitleAriaLabel\n    roomTitle\n    removeRoomButtonLabel\n    removeRoomButtonAriaLabel\n    roomRemovedLiveAnnounce\n\n    adultsStepInput {\n      ...TravelersStepInputFragment\n    }\n    childrenStepInput {\n      ...TravelersStepInputFragment\n    }\n\n    childrenAges {\n      ...ChildrenAgesFragment\n    }\n  }\n\n  \n  \n".concat([Pe.loc.source.body,Oe.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},$e=({headerRef:e,room:n,roomCount:t,roomIndex:i,singleUnit:r,totalTravelers:o,data:d})=>{var m,s,c;const u=t===i+1,{roomTitleAriaLabel:v,roomTitle:k,removeRoomButtonLabel:g,removeRoomButtonAriaLabel:p,adultsStepInput:f,childrenStepInput:y,childrenAges:N,roomRemovedLiveAnnounce:D}=d,S=(0,l.KY)(),b=Re(),{referrer:E}=ee();return a.createElement(R.N,{key:`room-${t}-${i}`,padding:r?{blockend:"three"}:{block:"three"},margin:r?{blockend:"three"}:{block:"three"},border:r?void 0:["blockend"]},a.createElement("div",null,a.createElement("h3",{tabIndex:-1,className:"uitk-type-200 uitk-type-medium","aria-label":Ie(v,i+1,t),ref:u?e:null},a.createElement("span",{"aria-hidden":"true"},Ie(k,i+1))),a.createElement(_e,{travelerType:"adults",min:1,max:n.adults+14-o,roomIndex:i,roomCount:t,room:n,data:f}),a.createElement(_e,{travelerType:"children",min:0,max:Math.min(6,((null==(m=n.children)?void 0:m.length)||0)+14-o),roomIndex:i,roomCount:t,room:n,data:y}),n.children&&(null==(s=n.children)?void 0:s.length)>0&&a.createElement(T.w,{space:"two",columns:2},null==(c=n.children)?void 0:c.map(({age:e},n)=>a.createElement(Le,{key:n,childAge:e,childIndex:n,roomIndex:i,data:N}))),0!==i&&a.createElement(R.N,{padding:{blockstart:"four"}},a.createElement(h.X,{justifyContent:"end"},a.createElement(I.C,null,a.createElement(F.q,{onClick:()=>{b({type:"REMOVE_ROOM",roomIndex:i}),S(`${E.pagePrefix}:RemoveRoom`,"Remove room"),(0,A.liveAnnounce)(Ie(D,t))},"aria-label":xe(p,i+1,t)},g))))))};$e.displayName="Room",$e.fragment=Ve;var Me={kind:"Document",definitions:L([{kind:"FragmentDefinition",name:{kind:"Name",value:"RoomPickerFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LodgingFormTravelers"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roomPicker"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessibility"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"toolBarIconLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"toolBarTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"addRoomText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"doneLabel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roomAddedLiveAnnounce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"room"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RoomFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"travelersSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelersSummaryFragment"},directives:[]}]}}]}}].concat(Ve.definitions,Ae.definitions)),loc:{start:0,end:323,source:{body:"\n  fragment RoomPickerFragment on LodgingFormTravelers {\n    roomPicker {\n      accessibility\n      toolBarIconLabel\n      toolBarTitle\n      addRoomText\n      doneLabel\n      roomAddedLiveAnnounce\n      room {\n        ...RoomFragment\n      }\n    }\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n  }\n\n  \n  \n".concat([Ve.loc.source.body,Ae.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Be=({data:e,onDismiss:n,onSave:t,onUpdate:i,submitDisabled:r=!1,travelersInput:o,triggerRef:d})=>{const[m,s]=a.useReducer((e,n)=>{const t=((e,n)=>{var t,a,i;switch(n.type){case"ADD_ROOM":return w(G({},e),{rooms:e.rooms.concat([{adults:1}])});case"REMOVE_ROOM":{const{roomIndex:t}=n;return w(G({},e),{rooms:e.rooms.filter((e,n)=>n!==t)})}case"UPDATE_ADULTS_COUNT":{const{roomIndex:t,count:a}=n;return w(G({},e),{rooms:e.rooms.map((e,n)=>n===t?w(G({},e),{adults:a}):e)})}case"UPDATE_CHILDREN_COUNT":{const{roomIndex:r,count:o}=n,d=o>(null!=(i=null==(a=null==(t=e.rooms[r])?void 0:t.children)?void 0:a.length)?i:0);return w(G({},e),{rooms:e.rooms.map((e,n)=>{var t,a;return n===r?w(G({},e),{children:d?(null==(t=e.children)?void 0:t.concat([{age:0}]))||[{age:0}]:null==(a=e.children)?void 0:a.slice(0,-1)}):e})})}case"UPDATE_CHILD_AGE":{const{roomIndex:t,childIndex:a,childAge:i}=n;return w(G({},e),{rooms:e.rooms.map((e,n)=>{var r;return t===n?w(G({},e),{children:null==(r=e.children)?void 0:r.map((e,n)=>a===n?{age:i}:e)}):e})})}default:return e}})(e,n);return i&&i(t),t},o),{roomPicker:c}=e,{accessibility:u,toolBarIconLabel:v,toolBarTitle:k,addRoomText:p,doneLabel:f,room:y,roomAddedLiveAnnounce:N}=c,D=a.useRef(null),{referrer:S}=ee(),T=(0,l.KY)();a.useEffect(()=>{var e;p&&"function"==typeof(null==(e=null==D?void 0:D.current)?void 0:e.focus)&&D.current.focus()},[m.rooms.length,p]);const x=()=>{(0,A.liveAnnounce)("",A.Level.ASSERTIVE)},O=a.useMemo(()=>({id:`${S.pagePrefix}:ChangeRoomGuest`,description:"Close Room Picker",callback:(e,n)=>T(e,n)}),[T]),L=m.rooms.reduce((e,n)=>{var t;return e+n.adults+((null==(t=n.children)?void 0:t.length)||0)},0),P=m.rooms.length>=8||L>=14;return a.createElement(Ce,{value:s},a.createElement(E.t,{type:"centered",centeredSheetSize:"small",isVisible:!0,triggerRef:d},a.createElement(C.p,{toolbarTitleA11yText:u,toolbarTitle:k,navigationContent:{onClick:()=>{n&&(x(),n())},onClickAnalytics:O,navType:"close",navIconLabel:v}}),a.createElement(R.N,{className:"uitk-scroll-vertical",padding:{inline:"four",blockstart:"half",blockend:"three"}},a.createElement("section",null,m.rooms.map((e,n)=>a.createElement($e,{data:y,headerRef:D,key:n,room:e,roomCount:m.rooms.length,roomIndex:n,singleUnit:!p,totalTravelers:L})),p&&a.createElement(R.N,{padding:{blockstart:"four",blockend:"twelve"}},a.createElement(h.X,{justifyContent:"end"},a.createElement(I.C,null,a.createElement(F.q,{onClick:()=>{s({type:"ADD_ROOM"}),T(`${S.pagePrefix}:AddRoom`,"Add room"),(0,A.liveAnnounce)(Ie(N,m.rooms.length),A.Level.POLITE)},disabled:P},p)))),a.createElement(b.t,{size:g.V.LARGE,onClick:()=>{t&&(x(),t(m))},disabled:r},f)))))};Be.displayName="RoomPicker",Be.fragment=Me;var qe=({rooms:e})=>{const{adultsString:n,childrenString:t}=(e=>({adultsString:a.useMemo(()=>e.map(e=>e.adults).filter(e=>e>0).join(","),[e]),childrenString:a.useMemo(()=>e.map((e,n)=>{var t;return null==(t=e.children)?void 0:t.map(e=>`${n+1}_${e.age}`).join(",")}).filter(e=>e&&""!==e).join(","),[e])}))(e);return a.createElement(a.Fragment,null,n&&a.createElement("input",{type:"hidden",name:"adults",value:n,readOnly:!0}),t&&a.createElement("input",{type:"hidden",name:"children",value:t,readOnly:!0}))};qe.displayName="TravelersHiddenInput";var Ge=(e=>(e.INPUT="input",e.LINK="link",e))(Ge||{}),we={kind:"Document",definitions:L([{kind:"FragmentDefinition",name:{kind:"Name",value:"TravelersFieldFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LodgingFormTravelers"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"travelersSummary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TravelersSummaryFragment"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"RoomPickerFragment"},directives:[]}]}}].concat(Me.definitions,Ae.definitions)),loc:{start:0,end:171,source:{body:"\n  fragment TravelersFieldFragment on LodgingFormTravelers {\n    label\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n    ...RoomPickerFragment\n  }\n\n  \n  \n".concat([Me.loc.source.body,Ae.loc.source.body].join("\n")),name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ue=[{adults:2}],je=({fieldName:e,className:n,data:t,closeOnSubmit:i=!0,trigger:r})=>{const[o,d]=a.useState(!1),m=a.useRef(null),{referrer:s}=ee(),c=Q(),k=Y(),[g,{closeDialog:p,openDialog:f},F]=(0,v.useDialog)("travelerPicks"),b=(0,l.KY)(),h=a.useRef(null),I=(null==k?void 0:k.roomInput)||Ue,[E,R]=a.useState(I);a.useEffect(()=>{I&&R(I)},[I]);const{label:C,travelersSummary:A}=t,T={rooms:E},x=Te(T,A,o),O=Te({rooms:E},A,o);a.useEffect(()=>{d(!0)},[]);const L=()=>{var e;"function"==typeof(null==(e=null==m?void 0:m.current)?void 0:e.focus)&&m.current.focus()},P=n=>{const{rooms:t}=n;R(t),c({type:"change",field:e,value:n}),b(`${s.pagePrefix}:ChangeRoomGuestDone`,"Apply Room Picker"),L(),i&&p()},_=()=>{f(),b(`${s.pagePrefix}:ChangeRoomGuest`,"Open Room Picker")};if("link"===r)return a.createElement(a.Fragment,null,a.createElement(D.i,{onClick:_,inline:!0},a.createElement("button",{type:"button",ref:h},a.createElement(S.D,{size:300},O))),a.createElement(qe,{rooms:E}),a.createElement(u.K,{isVisible:g},a.createElement(F,null,a.createElement(Be,{travelersInput:T,onSave:P,onDismiss:p,data:t,triggerRef:h}))));const V={id:"travelers-field-id",label:C,icon:"person"},$=w(G({},V),{name:"adults"}),M=w(G({},V),{onChange:_,onClick:_,domRef:m});return a.createElement("div",{className:n},o?a.createElement(a.Fragment,null,a.createElement(y.H,w(G({},M),{value:x,domRef:h})),a.createElement(qe,{rooms:E})):a.createElement(N.V,w(G({},$),{value:x,domRef:h})),a.createElement(u.K,{isVisible:g},a.createElement(F,null,a.createElement(Be,{travelersInput:T,onSave:P,onDismiss:()=>{p(),L()},data:t,triggerRef:h}))))};je.displayName="TravelersField",je.fragment=w(G({},we),{__typename:"LodgingFormTravelers"});var Qe=he(Se),He=he(je),Ke=he(Fe)}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/shared-ui-lodging-form.4356f9075356618e2d22.js.map