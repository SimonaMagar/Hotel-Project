/*@license For license information please refer to eg-distances.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9440],{35084:function(t,e,n){t.exports=function(){var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{EGDistances:function(){return Rt}});var r={providers:{mapbox:"mapbox",google:"google",eg:"eg"},modes:{driving:"driving",walking:"walking",cycling:"cycling",transit:"transit"},units:{meter:"meter",kilometer:"kilometer",mile:"mile",foot:"foot",second:"second",minute:"minute",hour:"hour"},statuses:{success:"SUCCESS",notFound:"NOT_FOUND",failure:"FAILURE"},fetch:{fetch:"fetch",axios:"axios",nodeFetch:"nodeFetch"}},o={provider:r.providers.mapbox,providers:{mapbox:{key:"SET_ME",url:"https://api.mapbox.com",overview:"full"},google:{key:"SET_ME",url:"https://maps.googleapis.com"},eg:{key:"SET_ME",url:""}},fetch:{use:r.fetch.fetch,options:{timeout:0}}},i=n(63970),a=t.n(i);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var s=u(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});try{s.isEcmaIntlSupported="1 m"===new Intl.NumberFormat("en-US",{style:"unit",unit:r.units.meter,unitDisplay:"short"}).format(1)}catch(t){s.isEcmaIntlSupported=!1}s.format=function(t,e,n){if(t&&void 0!==e&&n&&s.isEcmaIntlSupported)try{return new Intl.NumberFormat(t,{style:"unit",unit:n,unitDisplay:"short"}).format(e)}catch(t){}},s.round=function(t,e){switch(e){case r.units.meter:case r.units.foot:switch(!0){case Math.round(t)<100:return Math.round(t);case Math.round(t)<1e3:return 10*Math.round(t/10);default:return 100*Math.round(t/100)}case r.units.kilometer:case r.units.mile:switch(!0){case 0==Math.round(100*t):case Math.round(100*t)<100:return Math.round(100*t)/100;case Math.round(t)>100:return Math.round(t);default:return Math.round(10*t)/10}case r.units.second:return 1==Math.round(t)<30?Math.round(t):10*Math.round(t/10);case r.units.minute:return 1==Math.round(10*t)<10?Math.round(10*t)/10:Math.round(t);case r.units.hour:return Math.round(10*t)/10;default:throw new Error("round for ".concat(e," not implemented"))}},s.convert=function(t,e){var n=p(e),o=t.find(function(t){return p(t.unit)===n});if(o){if(o.unit===e)return o.value;if(0===n){var i=f(o);switch(e){case r.units.meter:return i;case r.units.kilometer:return i/1e3;case r.units.mile:return i/1609.344;case r.units.foot:return i/.3048}}else if(1===n){var a=l(o);switch(e){case r.units.second:return a;case r.units.minute:return a/60;case r.units.hour:return a/3600}}}};var l=function(t){switch(t.unit){case r.units.second:return t.value;case r.units.minute:return 60*t.value;case r.units.hour:return 3600*t.value}},f=function(t){switch(t.unit){case r.units.meter:return t.value;case r.units.kilometer:return 1e3*t.value;case r.units.mile:return 1609.344*t.value;case r.units.foot:return.3048*t.value}},p=function(t){switch(t){case r.units.meter:case r.units.kilometer:case r.units.mile:case r.units.foot:return 0;case r.units.second:case r.units.minute:case r.units.hour:return 1;default:throw new Error("Invalid distance unit ".concat(t))}};function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=y(function t(e,n){h(this,t),this.value=e,this.unit=n}),m=y(function t(e,n,r,o){h(this,t),this.origin=e,this.destination=n,this.modes={},r&&(this.modes[r]=o,this.modes[r].as=function(t,e,n){var r=s.convert(o,t);return e&&(r=s.round(r,t)),n&&s.format(n,r,t)||r})}),b=function(){function t(e,n){h(this,t),this.matrix=e,this.errors=n||[]}return y(t,[{key:"status",get:function(){return this.errors&&this.errors.length>0?r.statuses.failure:r.statuses.success}}]),t}();function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var O=w(function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.origin=e,this.destination=n,this.mode=r,o&&(this.distance=o,this.distance.as=function(t,e,n){var r=s.convert(o,t);return e&&(r=s.round(r,t)),n&&s.format(n,r,t)||r})}),j=new WeakMap,_=function(t){var e=new AbortController,n=setTimeout(function(){e.abort()},t);return j.set(e.signal,n),e.signal},E=function(t){clearTimeout(j.get(t))};function S(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timeout;if("undefined"==typeof fetch)throw new Error("You are not using node 18.x which provide the fetch global variable");var e=t&&t>0?_(t):void 0;return function(n){return fetch(n,{signal:e}).then(function(t){return e&&E(e),t}).catch(function(e){return/The operation was aborted/.test(e.message)?Promise.reject(new Error("timeout of ".concat(t,"ms exceeded"))):Promise.reject("error from fetch: ".concat(e.message))})}}function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=Object.values(r.modes),A=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=null==e||null===(n=e.fetch)||void 0===n?void 0:n.use;switch(o){case r.fetch.axios:this._fetch=function(t){var e=t.axios,n=t.timeout;if(!e)throw new Error("You need to pass in config.fetch.options.axios the import result of axios package");var r=n?e.create({timeout:n}):e.create();return function(t){return new Promise(function(e,n){r.get(t).then(function(t){t.status>=200&&t.status<300?e({ok:!0,status:t.status,statusText:t.statusText,json:function(){return Promise.resolve(t.data)},text:function(){return Promise.resolve(JSON.stringify(t.data))}}):e({ok:!1,status:t.status,statusText:t.statusText})}).catch(function(t){return n(new Error("error from axios: ".concat(t.message)))})})}}(e.fetch.options);break;case r.fetch.nodeFetch:this._fetch=S(e.fetch.options);break;case r.fetch.fetch:default:this._fetch=function(){return o.apply(void 0,arguments)}}}var e,n,o;return e=t,(n=[{key:"getDistances",value:function(t,e,n){if(!t||!e)return Promise.reject(new Error("Missing origin/destination information: ".concat(t," / ").concat(e)));var o=Array.isArray(t)?t:[t],i=Array.isArray(e)?e:[e],a=n?Array.isArray(n)?n:[n]:[r.modes.driving];return this._getDistances(this._validateAllLatLng(o),this._validateAllLatLng(i),this._validateModes(a))}},{key:"_getDistances",value:function(t,e,n){var r=this,o=n.map(function(n){return r._computeDistancesForMode(t,e,n).then(function(t){return{mode:n,matrix:t}}).catch(function(o){return{mode:n,matrix:r._emptyMatrix(t,e),error:o}})});return Promise.all(o).then(function(n){var o=n.reduce(function(t,e){return t.map(function(t,n){return t.map(function(t,r){return t.modes[e.mode]=e.matrix[n][r]?e.matrix[n][r].modes[e.mode]:void 0,t})})},r._emptyMatrix(t,e)),i=n.map(function(t){return t.error}).filter(function(t){return!!t});return new b(o,i)})}},{key:"_computeDistancesForMode",value:function(t,e,n){return Promise.reject(new Error("NOT IMPLEMENTED."))}},{key:"_validateMode",value:function(t){if(!x.includes(t))throw new Error("Unknown mode ".concat(t," - valid modes are ").concat(x));return t}},{key:"_validateModes",value:function(t){var e,n=M(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._validateMode(r)}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"_validateLatLng",value:function(t){if(!t)throw new Error("no data for latLng");if(!t.lat)throw new Error("Missing lat information in ".concat(t));if(!t.lng)throw new Error("Missing lng information in ".concat(t));return t}},{key:"_validateAllLatLng",value:function(t){var e,n=M(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this._validateLatLng(r)}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"_emptyMatrix",value:function(t,e){return new Array(t.length).fill([]).map(function(n,r){return new Array(e.length).fill(null).map(function(n,o){return new m(t[r],e[o])})})}},{key:"getRoute",value:function(t,e,n,o){return this._computeRouteForMode(this._validateLatLng(t),this._validateLatLng(e),this._validateMode(n),o).then(function(t){return{status:t.path||t.polyline?r.statuses.success:r.statuses.notFound,route:t}}).catch(function(o){return{status:r.statuses.failure,error:(null==o?void 0:o.message)||o,route:new O(t,e,n)}})}},{key:"_computeRouteForMode",value:function(t,e,n){return Promise.reject(new Error("NOT IMPLEMENTED."))}}])&&P(e.prototype,n),o&&P(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var D,L=R(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=K(t);if(e){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}L.isNullOrEmpty=function(t){return!t||0===t.length};var Y,$=(J(D={},r.modes.driving,"driving"),J(D,r.modes.cycling,"bicycling"),J(D,r.modes.transit,"transit"),J(D,r.modes.walking,"walking"),D),z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(c,t);var e,n,o,i=B(c);function c(t){var e,n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).config=null===(e=t.providers)||void 0===e?void 0:e.google,!n.config||L.isNullOrEmpty(n.config.url)||L.isNullOrEmpty(n.config.key))throw new Error("Invalid google configuration.");return n}return e=c,(n=[{key:"_computeDistancesForMode",value:function(t,e,n){var r=this,o="origins=".concat(t.map(function(t){return"".concat(t.lat,",").concat(t.lng)}).join("|")),i="destinations=".concat(e.map(function(t){return"".concat(t.lat,",").concat(t.lng)}).join("|")),a="mode=".concat($[n]),c="key=".concat(this.config.key),u="".concat(this.config.url,"/maps/api/distancematrix/json?").concat(o,"&").concat(i,"&").concat(a),s=encodeURI("".concat(u,"&").concat(c));return this._fetch(s).then(function(o){if(o.ok)return o.json().then(function(o){return r._parseDistancesMatrixForMode(t,e,n,o)});throw new Error("Unable to fetch distances from URL [".concat(u,"]: ").concat(o.status," ").concat(o.statusText))}).catch(function(t){throw t.message="Error raised fetching distances from URL [".concat(u,"]. Message: ").concat(t.message),t})}},{key:"_parseDistancesMatrixForMode",value:function(t,e,n,o){return o.rows.map(function(o,i){return o.elements.map(function(o,a){if("OK"===o.status){var c=new v(o.distance.value,r.units.meter),u=new v(o.duration.value,r.units.second);return new m(t[i],e[a],n,[c,u])}})})}},{key:"_computeRouteForMode",value:function(t,e,n,r){var o=this,i="origin=".concat(t.lat,",").concat(t.lng),a="destination=".concat(e.lat,",").concat(e.lng),c="mode=".concat($[n]),u="key=".concat(this.config.key),s="".concat(this.config.url,"/maps/api/directions/json?").concat(i,"&").concat(a,"&").concat(c),l=encodeURI("".concat(s,"&").concat(u));return this._fetch(l).then(function(i){if(i.ok)return i.json().then(function(i){return o._parseRoute(t,e,n,r,i)});throw new Error("Unable to fetch directions from URL [".concat(s,"]: ").concat(i.status," ").concat(i.statusText))}).catch(function(t){throw t.message="Error raised fetching directions from URL [".concat(s,"]. Message: ").concat(t.message),t})}},{key:"_parseRoute",value:function(t,e,n,o,i){var c;switch(i.status){case"OK":if((null==i||null===(c=i.routes)||void 0===c?void 0:c.length)>0){var u,s,l=U(i.routes,1)[0],f=[];if((null===(u=l.legs)||void 0===u?void 0:u.length)>0){var p=U(l.legs,1)[0];p.distance&&f.push(new v(p.distance.value,r.units.meter)),p.duration&&f.push(new v(p.duration.value,r.units.second))}var d=new O(t,e,n,f);return null!==(s=l.overview_polyline)&&void 0!==s&&s.points&&(o?d.polyline=l.overview_polyline.points:d.path=a().decode(l.overview_polyline.points).map(function(t){return{lat:t[0],lng:t[1]}})),d.copyrights=l.copyrights,d}throw new Error("Status OK returned by Direction service but failed to analyze data: ".concat(JSON.stringify(i)));case"ZERO_RESULTS":return new O(t,e,n);default:throw new Error("Status ".concat(i.status," returned by Direction service not handled"))}}}])&&F(e.prototype,n),o&&F(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(A);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=tt(t);if(e){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nt,rt=(et(Y={},r.modes.driving,"DRIVING"),et(Y,r.modes.cycling,"BICYCLING"),et(Y,r.modes.transit,"TRANSIT"),et(Y,r.modes.walking,"WALKING"),Y),ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(c,t);var e,n,o,i=Q(c);function c(t){var e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this)).config=null===(e=t.providers)||void 0===e?void 0:e.google,n.distanceMatrixService=new google.maps.DistanceMatrixService,n.directionsService=new google.maps.DirectionsService,n}return e=c,(n=[{key:"_computeDistancesForMode",value:function(t,e,n){var r,o,i=this;if(null===(r=google)||void 0===r||null===(o=r.maps)||void 0===o||!o.DistanceMatrixService)throw new Error("Unable to load Google Maps DistanceMatrixService - make sure Google API library is initialized.");var a=t.map(function(t){return new google.maps.LatLng(t.lat,t.lng)}),c=e.map(function(t){return new google.maps.LatLng(t.lat,t.lng)});return new Promise(function(r,o){i.distanceMatrixService.getDistanceMatrix({origins:a,destinations:c,travelMode:rt[n]},function(a,c){"OK"===c?r(i._parseDistancesMatrixForMode(t,e,n,a)):o(new Error("Unable to fetch distances from Google: ".concat(c," ").concat(JSON.stringify(a))))})})}},{key:"_parseDistancesMatrixForMode",value:function(t,e,n,o){return o.rows.map(function(o,i){return o.elements.map(function(o,a){if("OK"===o.status){var c=new v(o.distance.value,r.units.meter),u=new v(o.duration.value,r.units.second);return new m(t[i],e[a],n,[c,u])}})})}},{key:"_computeRouteForMode",value:function(t,e,n,o){var i,c,u=this;if(null===(i=google)||void 0===i||null===(c=i.maps)||void 0===c||!c.DirectionsService)throw new Error("Unable to load Google Maps DirectionsService - make sure Google API library is initialized.");return new Promise(function(i,c){u.directionsService.route({origin:new google.maps.LatLng(t.lat,t.lng),destination:new google.maps.LatLng(e.lat,e.lng),travelMode:rt[n]},function(u,s){switch(s){case"OK":var l,f,p=u.routes,d=[];if((null==p?void 0:p.length)>0){var y,h=W(p,1)[0];if((null===(y=h.legs)||void 0===y?void 0:y.length)>0){var m=W(h.legs,1)[0];m.distance&&d.push(new v(m.distance.value,r.units.meter)),m.duration&&d.push(new v(m.duration.value,r.units.second))}(f=new O(t,e,n,d)).path=p[0].overview_path.map(function(t){return{lat:t.lat(),lng:t.lng()}}),h.overview_path&&(o?f.polyline=a().encode(h.overview_path.map(function(t){return[t.lat(),t.lng()]})):f.path=h.overview_path.map(function(t){return{lat:t.lat(),lng:t.lng()}})),f.copyrights=u.routes[0].copyrights,f.warnings=u.warnings}null!==(l=f)&&void 0!==l&&l.path?i(f):c("no result found");break;case"ZERO_RESULTS":i(new O(t,e,n));break;default:c("Status ".concat(s," not handled"))}})})}}])&&V(e.prototype,n),o&&V(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(A);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=pt(t);if(e){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function pt(t){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pt(t)}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yt=(dt(nt={},r.modes.driving,"mapbox/driving"),dt(nt,r.modes.cycling,"mapbox/cycling"),dt(nt,r.modes.transit,"mapbox/transit"),dt(nt,r.modes.walking,"mapbox/walking"),nt),ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(c,t);var e,n,o,i=lt(c);function c(t){var e,n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t)).config=null===(e=t.providers)||void 0===e?void 0:e.mapbox,!n.config||L.isNullOrEmpty(n.config.url)||L.isNullOrEmpty(n.config.key))throw new Error("Invalid mapbox configuration.");return n}return e=c,(n=[{key:"_computeDistancesForMode",value:function(t,e,n){var r=this,o=t.map(function(t){return"".concat(t.lng,",").concat(t.lat)}).concat(e.map(function(t){return"".concat(t.lng,",").concat(t.lat)})).join(";"),i=Array(t.length).fill().map(function(t,e){return e}).join(";"),a=Array(e.length).fill().map(function(e,n){return n+t.length}).join(";"),c="".concat(this.config.url,"/directions-matrix/v1/").concat(yt[n],"/").concat(o,"?sources=").concat(i,"&destinations=").concat(a,"&annotations=duration,distance");return this._fetch("".concat(c,"&access_token=").concat(this.config.key)).then(function(o){if(o.ok)return o.json().then(function(o){if(o.code&&"Ok"===o.code)return r._parseDistancesMatrixForMode(t,e,n,o);throw new Error("Unable to fetch distances from Mapbox URL ".concat(c,": ").concat(JSON.stringify(o)))});throw new Error("Unable to fetch distances from Mapbox URL ".concat(c,": ").concat(o.status," ").concat(o.statusText))})}},{key:"_parseDistancesMatrixForMode",value:function(t,e,n,o){return o.distances.map(function(i,a){return i.map(function(i,c){var u=new v(i,r.units.meter),s=new v(o.durations[a][c],r.units.second);return new m(t[a],e[c],n,[u,s])})})}},{key:"_computeRouteForMode",value:function(t,e,n,o){var i="".concat(t.lng,",").concat(t.lat,";").concat(e.lng,",").concat(e.lat),c="overview=".concat(this.config.overview),u="".concat(this.config.url,"/directions/v5/").concat(yt[n],"/").concat(i,"?geometries=geojson&").concat(c);return this._fetch("".concat(u,"&access_token=").concat(this.config.key)).then(function(i){if(i.ok)return i.json().then(function(i){if("Ok"===i.code){var c,s,l=i.routes,f=l&&l.length>0?l[0]:{},p=null===(c=f.geometry)||void 0===c?void 0:c.coordinates;(f.distance||f.duration)&&(s=[],f.distance&&s.push(new v(f.distance,r.units.meter)),f.duration&&s.push(new v(f.duration,r.units.second)));var d=new O(t,e,n,s);return p&&(o?d.polyline=a().encode(p.map(function(t){var e=at(t,2),n=e[0];return[e[1],n]})):d.path=p.map(function(t){var e=at(t,2),n=e[0];return{lat:e[1],lng:n}})),d}throw new Error("Unable to fetch directions from Mapbox URL ".concat(u,": ").concat(JSON.stringify(i)))});throw new Error("Unable to fetch directions from Mapbox URL ".concat(u,": ").concat(i.status," ").concat(i.statusText))})}}])&&ut(e.prototype,n),o&&ut(e,o),Object.defineProperty(e,"prototype",{writable:!1}),c}(A);function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bt(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=Ot(t);if(e){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}var jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(i,t);var e,n,r,o=gt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this)}return e=i,(n=[{key:"_getDistances",value:function(t,e,n){return Promise.reject(new Error("NOT IMPLEMENTED YET."))}}])&&mt(e.prototype,n),r&&mt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(A);function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e,n){return e&&_t(t.prototype,e),n&&_t(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var St=Et(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function Mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e,n){return e&&Pt(t.prototype,e),n&&Pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}St.create=function(t){var e,n,o,i,a;switch(t.provider){case r.providers.google:return"undefined"!=typeof google&&((null===(n=google)||void 0===n||null===(o=n.maps)||void 0===o?void 0:o.DistanceMatrixService)||(null===(i=google)||void 0===i||null===(a=i.maps)||void 0===a?void 0:a.DirectionsService))?new ot(t):new z(t);case r.providers.mapbox:return new ht(t);case r.providers.eg:return new jt(t);default:throw new Error("Invalid provider: ".concat(null===(e=t.provider)||void 0===e?void 0:e.type))}};var At=xt(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}At.isObject=function(t){return t&&"object"===kt(t)&&!Array.isArray(t)},At.merge=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var o=n.shift();if(At.isObject(t)&&At.isObject(o))for(var i in o)At.isObject(o[i])?(t[i]||Object.assign(t,Mt({},i,{})),At.merge(t[i],o[i])):Object.assign(t,Mt({},i,o[i]));return At.merge.apply(At,[t].concat(n))};var Rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=At.merge({},o,e||{}),this.provider=St.create(this.config)}var e,n,i;return e=t,n=[{key:"getDistances",value:function(t,e,n){return this.provider.getDistances(t,e,n)}},{key:"getRoute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.modes.driving,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.provider.getRoute(t,e,n,o)}}],n&&Tt(e.prototype,n),i&&Tt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();return Object.assign(Rt,r),e}()}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/landing-pwa/eg-distances.3f49660179d30b705532.js.map