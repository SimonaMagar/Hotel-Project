(this.$WP=this.$WP||[]).push(["hlz86o",(e,t)=>{var l,i,a,r,n,o,s,d,c,m,u,f,b,h,_,v,p,g,y,S,w,C,A,N,R,E,x,L,M,I,k,W,T,O,B,F,G,D,P,V,z,H,j,Y,q,$,U,K,Z,Q,X,J,ee,et,el,ei,ea,er,en=({title:e,thumbnailSource:t,sizeHint:a,selected:r,onClick:n,altDynamicSource:o})=>l("button",{type:"button",onClick:n,className:"JYJOz Gi _S Wh",children:[i("div",{className:S("YjpDv",{"fGzmW Re z":r}),children:i(w,{roundingMode:"all",roundingSize:"medium",source:t,altDynamicSource:o,height:"100%",alt:e,sizeHint:a})}),i("div",{className:"Lxcbp",children:i(C,{atlasVariant:r?"fixed-label-20":"fixed-body-20",marginTop:"spacing-02",lineClamp:2,color:"onSurface",children:e})})]}),eo=()=>l("div",{className:"RlbWn",children:[i("div",{className:"njdDx",children:i(A,{height:"100%"})}),i("div",{className:"Mj",children:i(A,{width:"65%",height:"17px"})})]}),es={albumContainer:"DvMLl _e Q2",albumItem:"F0"},ed=e=>{if(e&&"object"==typeof e&&"urlTemplate"in e&&e.urlTemplate&&"maxHeight"in e&&e.maxHeight&&"maxWidth"in e&&e.maxWidth)return{urlTemplate:e.urlTemplate,maxWidth:e.maxWidth,maxHeight:e.maxHeight}},ec=({albums:e,fetching:t,selectedAlbumSpecifier:l,onAlbumSelected:a})=>{var r=!t&&e.length?e.map(e=>e?.albumSpecifier&&e.thumbnail?.source&&e.count?i("div",{className:es.albumItem,children:i(K,{title:e.title||"",thumbnailSource:e.thumbnail.source,altDynamicSource:ed(e.thumbnail.altDynamicSource),sizeHint:{mobile:"25vw",tablet:"15vw",desktop:"11vw"},onClick:()=>{e.albumSpecifier&&a?.(e.albumSpecifier)},selected:f(l,e.albumSpecifier)})},`item-${b(e.albumSpecifier)}`):null):t&&[,,,,].fill(null).map((e,t)=>i("div",{className:es.albumItem,children:i(Z,{})},t))||null;return i("div",{className:es.albumContainer,children:r})},em={container:"jjPPF f w u",showAllPills:"hNtfM",pills:"BRNuY f K",seeAllButton:"CFZYs NM"},eu=(e,t)=>{var l=t-((e.button||0)+16);return e.pills.filter(Boolean).reduce((i,a)=>{var r=i.totalWidth+a+8;return{totalPills:r<=l||i.totalPills+1===e.pills.length&&r-8<=t?i.totalPills+1:i.totalPills,totalWidth:r}},{totalPills:0,totalWidth:0}).totalPills},ef=({collapsible:e,selectorConfig:{options:t,onSelect:a,selected:c}})=>{var m=R(),{containerRef:u,pillsRef:b,buttonRef:h}=r({containerRef:n(),pillsRef:t.map(()=>n()),buttonRef:n()}).current,[_,v]=o(e),[p,g]=o(t.length),[y,w]=o({pills:t.map(()=>null),button:null}),C=s(()=>{if(!e){var t=eu(y,u.current?.offsetWidth||0);y.pills.some(Boolean)&&g(t)}},[e,y,u]);d(()=>{!e&&b.some(e=>e.current?.offsetWidth)&&y.pills.length&&y.pills.every(e=>null===e)&&w({pills:b.map(e=>e.current?.offsetWidth||0),button:h.current?.offsetWidth||0}),C()},[e,b,h,h.current?.offsetWidth,y,C]);var A=!y.button||p!==t.length;return l("div",{className:S(em.container,{[em.showAllPills]:_}),ref:u,"data-testid":"pills",children:[i(F,{callback:C,throttle:100}),i("div",{className:em.pills,children:t.slice(0,_?t.length:p).map(({label:e,value:t},l)=>i("div",{ref:b[l],"data-testid":"pill",children:i(B,{selected:f(t,c),onClick:()=>a(t,"GALLERY_VIEWER"),children:i(N,{id:"airm_geo_fffff486",args:{0:e.name,1:e.count?m.formatNumber("integer",e.count):void 0},messages:"{0} ({1})"})})},e.name))}),!e&&A&&i("div",{className:S(em.seeAllButton,{[em.showAllPills]:_}),ref:h,children:i(W,{icon:_?O:T,trailing:!0,variant:"primary-small",onClick:()=>v(!_),children:_?i(N,{id:"mv_hide_filters",messages:"Hide filters"}):i(N,{id:"mv_see_all_filters",messages:"See all filters"})})})]})},eb=(e,t)=>{switch(t){case h.allUnrestricted:case h.allIncludingRestricted:return e.string("everyone","mv_photos_from_everyone");case h.traveler:return e.string("travelers","mv_photos_from_travelers");case h.staff:return e.string("professionals","mv_photos_from_professionals");case h.management:return e.string("management","mv_photos_from_management");default:return t||""}},eh=(e,t,l,i)=>e.string("From {source} ({count})","mg_from_with_source_count",{source:eb(e,l),count:t.formatNumber("integer",i||0)}),e_=(e,t)=>{switch(t){case"featured":return e.string("Featured","hr_mediaviewer_filter_by_featured");case"recency":return e.string("Recency","hr_mediaviewer_filter_by_recency");default:return t}},ev={divider:"mbZgu",chips:"pgZiU f k",sorting:"OvmHR",tabs:"xGcnX"},ep=({sourceControl:e,subAlbumControl:t,sortControl:r,fetching:n})=>{var o=t.options.map(({label:e})=>e.name.length).join(""),{localize:s}=E(),d=R();return l("div",{"data-testid":"header_controller",children:[i("div",{className:ev.tabs,children:!n&&e.options.length&&l(a,{children:[i(M,{value:e.selected,onChange:t=>e.onSelect(t,"GALLERY_VIEWER"),children:e.options.map(({label:{name:e,count:t},value:l})=>i(I,{value:l,children:eh(s,d,e,t)},e))}),i("div",{className:ev.divider,children:i(x,{})})]})||n&&i(A,{width:"40%",height:"37px"})||null}),l("div",{className:ev.chips,children:[!n&&t.options.length&&i(X,{selectorConfig:t},o)||n&&i(A,{width:"20%",height:"35px"})||null,r&&i("div",{className:ev.sorting,children:i(L,{mode:"select",trigger:"chip",label:s.string("Sort by","hr_mediaviewer_sort_by_label"),menuVariant:"trailing-top-caret",value:r.selected,options:r.options.map(({label:e,value:t})=>({displayName:e_(s,e.name),value:t})),onChange:e=>r.onSelect(e,"GALLERY_VIEWER")})})]})]})},eg=({closeModal:e,onReset:t,onClose:a,sourceControl:r,subAlbumControl:n})=>{var{localize:o}=E(),s=R();return l(P,{"data-testid":"filters_modal",variant:"fixed-height-sticky-footer",onClose:()=>{e(),a("FILTER_MODAL")},title:i(N,{id:"gallery_controller_filters",messages:"Filters"}),buttonsAlignment:"space-between",secondaryButton:l(W,{onClick:()=>{t(),e()},children:[i(N,{id:"media_viewer_mobile_filter_reset",messages:"Reset"})," "]}),primaryButton:l(k,{onClick:()=>{r.onSelect(r.selected,"GALLERY_VIEWER"),n.onSelect(n.selected,"GALLERY_VIEWER"),e()},children:[i(N,{id:"h_show_results",messages:"Show results"})," "]}),children:[l(C,{atlasVariant:"fixed-title-10",marginTop:"spacing-04",marginBottom:"spacing-03",color:"onSurface",children:[i(N,{id:"mv_mw_filter_source_section_header",messages:"Source"})," "]}),i(V,{name:"sources",children:r.options.map(e=>i(z,{value:e.value,selected:e.value===r.selected,onSelect:e=>{r.onSelect(e,"FILTER_MODAL")},label:eh(o,s,e.label.name,e.label.count)},e.label.name))}),l(C,{atlasVariant:"fixed-title-10",marginTop:"spacing-06",marginBottom:"spacing-03",color:"onSurface",children:[i(N,{id:"mv_mw_filter_category_section_header",messages:"Category"})," "]}),i(X,{collapsible:!0,selectorConfig:{...n,selected:n.selected,onSelect:e=>{n.onSelect(e,"FILTER_MODAL")}}})]})},ey=({closeModal:e,onClose:t,sortControl:a,selected:r,onSelection:n})=>{var{localize:o}=E();return i(P,{"data-testid":"sort_modal",variant:"fixed-height-sticky-footer",title:i(N,{id:"hr_mediaviewer_sort_by_label",messages:"Sort by"}),onClose:()=>{e(),t("SORT_MODAL")},buttonsAlignment:"space-between",primaryButton:l(k,{onClick:()=>{a.onSelect(r,"GALLERY_VIEWER"),e(),t("SORT_MODAL")},children:[i(N,{id:"h_show_results",messages:"Show results"})," "]}),children:i(V,{name:"Sort",children:a.options.map(e=>i(z,{value:e.value,selected:e.value===r,onSelect:e=>n("sortOption",e),label:e_(o,e.label.name)},e.label.name))})})},eS="filters",ew="sortBy",eC=({sourceControl:e,subAlbumControl:t,sortControl:a,onReset:r,onClose:n})=>{var[s,d]=o(null),c={source:e.selected,subAlbum:t.selected,sortOption:a?a.selected:""},[m,u]=o(c),f=(e,t)=>u(l=>({...l,[e]:t})),b=()=>d(null);return l("div",{"data-testid":"modal_controller",children:[l("div",{className:"f k Ma Nl MA NN",children:[l(W,{"data-testid":"filters_button",icon:G,onClick:()=>{d(()=>(u(c),eS))},children:[i(N,{id:"media_viewer_mobile_filter_menu_button",messages:"Filter"})," "]}),l(W,{"data-testid":"sort_button",icon:D,onClick:()=>{d(()=>(u(c),ew))},children:[i(N,{id:"media_viewer_mobile_sort_menu_button",messages:"Sort"})," "]})]}),(l=>{switch(l){case eS:return i(ee,{closeModal:b,onClose:n,onReset:r,sourceControl:e,subAlbumControl:t});case ew:if(a)return i(et,{closeModal:b,onClose:n,sortControl:a,selected:m.sortOption,onSelection:f});return null;default:return null}})(s)]})},eA=({headerLabel:e,sourceControl:t,subAlbumControl:r,sortControl:n,albumsFetching:o,subAlbumsFetching:s,onReset:d,onClose:c})=>{var m="MOBILE"===u(),f=R();return l(a,{children:[i("div",{className:"uCgNk","data-testid":"header_label",children:i(C,{atlasVariant:m?"fixed-title-10":"fixed-title-20",children:!o&&e.name&&e.count&&i(N,{id:"airm_geo_fffff486",args:{0:e.name,1:f.formatNumber("integer",e.count)},messages:"{0} ({1})"})||o&&i(A,{width:"10%",height:m?"22px":"29px"})||null})}),m?i(el,{sourceControl:t,subAlbumControl:r,sortControl:n,onReset:d,onClose:c}):i(J,{sourceControl:t,subAlbumControl:r,sortControl:n,fetching:s})]})},eN=({data:{id:e,uploadDate:t,source:a,caption:r,type:n,review:o,supplierCategory:s,userProfile:d,photoSizeDynamic:c},onClick:m,sizeHint:u,positionInContext:f})=>{var b,h=R(),{localize:_}=E(),v=t?h.formatDate("date_medium_month_year",new Date(t)):"";return b="OWNER"===s?_.string("Management","Photoviewer_mgmtFilter"):"STAFF"===s?_.string("Photo commissioned by Tripadvisor","gallery_image_tripadvisor_provider"):d?.displayName,l("button",{className:"vKCIi w B- _S",type:"button",onClick:()=>m?.(f,e),"data-testid":"image_button_container",children:[i("div",{className:"BtGfv",children:i(w,{source:a,sizeHint:u,height:"100%",alt:r||"",lazy:!1,altDynamicSource:c})}),l("div",{className:"TQwng Y",children:[i("div",{className:"HGiFx s _U l"}),l("div",{className:"HqAGE f e Q1 s l Pi PW Pv PI Wh w z _a","data-testid":"information_overlay",children:[b&&l(C,{atlasVariant:"fixed-label-20",color:"primaryFixed",children:[i("span",{children:b}),v&&l("span",{children:["\xa0â€¢\xa0",v]})]}),(o?.rating||o?.rating===0)&&i(H,{rating:o.rating})]})]}),i(j,{type:n})]})},eR={gridContainer:"qgoXE A w",isHero:"PfqCp",skeleton:"OduDW w Gz"},eE=(e,t)=>`${e?"fetching":"fetched"}}_${t}}`,ex=({handleViewed:e,scrollableRef:t,isHero:l,medias:a})=>{var r=$(q(t=>{t&&a.some(e=>!e.node)&&e()},250),500,0,t);return a.every(e=>e&&!e.fetching&&!e.node)?null:i("div",{className:S(eR.gridContainer,{[eR.isHero]:l}),ref:r,"data-testid":"mosaic_layout",children:a.map(({fetching:e,node:t,position:l})=>e||t?t||i("div",{className:eR.skeleton,"data-testid":"skeleton"},eE(e,l)):null)})},eL=(e,t,l)=>l&&0===e?[0]:[0,1,2].reduce((i,a)=>{var r=3*e+a-(l?2:0);return r<t?[...i,r]:i},[]),eM=(e,t,l)=>{var i="MOBILE"===u(),[a,r]=o(10),n=i?Math.ceil((e.totalMediasCount-1)/3)+1:Math.ceil(e.totalMediasCount/3),m=c(()=>Array.from({length:n},(t,l)=>({viewed:!1,medias:eL(l,e.totalMediasCount,i).map(e=>({position:e,node:null,fetching:!0}))})),[i,n,e]),[f,b]=o(m);d(()=>{b(m)},[m]);var h=s(e=>{b(t=>{if(!t[e])return t;var i=[...t],{medias:a}=i[e];return i[e]={...t[e],viewed:!0,medias:a.map(e=>{var t=l(e.position)||{...e,fetching:!1};return{...e,...t}})},i})},[l]);return d(()=>{t||f.forEach((e,t)=>{e.viewed&&e.medias.some(e=>!e.node&&e.fetching)&&h(t)})},[t,h,f]),{lastMosaicIndexToRender:a+20,mosaics:f,getViewedHandler:e=>()=>{r(t=>Math.max(t,e)),h(e)},isMobile:i}},eI=e=>e.map(e=>`${e.position}_${e.fetching?"fetching":"fetched"}`).join("_"),ek=({mediaRendererWithStatus:e,fetching:t,galleryAlbumParams:l,scrollableRef:a})=>{var{lastMosaicIndexToRender:r,mosaics:n,getViewedHandler:o,isMobile:s}=er(l,t,e);return i("div",{className:"w",children:n.map((e,t)=>t>=r?null:i(ea,{scrollableRef:a,handleViewed:o(t),isHero:s&&0===t,medias:e.medias},eI(e.medias)))})},eW={viewer:"hgUDK l _Z Gi",footerOffer:"TObvI s Gi",header:"XXwWp Gi",albumSectionContainer:"KydbY Gi z",content:"TIhWB",gallery:"eRCDo Gi",albumSection:"kIHZa",placementAds:"ILNVu",main:"lYaEG",albumSectionAd:"kcSdQ"},eT=({albums:e=[],subAlbums:t,location:n,selectedAlbumSpecifier:o,controlsSelected:s,fetching:b,hideControls:S,adSlot:w,headerOfferSlot:C,footerOfferSlot:A,getMediaData:N,actionHandler:R,saveButton:E})=>{var{locationFetching:x,albumsFetching:L,subAlbumsFetching:M,pageFetching:I}=b,k=e=>{null!=e&&R?.({type:g.galleryItemClicked,mediaOffsetIndex:e})},W="MOBILE"===u(),T="TABLET"===u(),{subAlbumSpecifier:O,subAlbumSpecifierInModal:B,albumSource:F,albumSourceInModal:G,sortStrategy:D}=s||{},P=D===_.recency?v.recency:v.featured,V=r(null),z=r(null),{subAlbumOptions:H,sourceOptions:j,sortOptions:q}=U({subAlbums:t,albumSource:G,albumSpecifier:o,subAlbumSpecifier:B}),$=c(()=>e.find(e=>f(e.albumSpecifier,o)),[e,o]),K=c(()=>j.find(e=>e.value===G)||j[0],[j,G]),Z=c(()=>K?.label.count||$?.count||0,[$?.count,K?.label.count]),{rating:X,count:J}=n?.reviewSummary||{},ee=(X||0===X)&&!!J,et={options:c(()=>{if(W)return H;var e=H?.find(e=>f(e.value,O));return e?[e,...H.filter(t=>t!==e)]:H},[W,H,O]),selected:B||p("aws-proxy"===o.type),onSelect:(e,t)=>{R?.({type:"FILTER_MODAL"===t?g.subAlbumSelectedInModal:g.subAlbumSelected,subAlbumSpecifier:e})}},el={options:j,selected:K?.value||h.allUnrestricted,onSelect:(e,t)=>{R?.({type:"FILTER_MODAL"===t?g.sourceAlbumSelectedInModal:g.sourceAlbumSelected,albumSource:e})}},ea=Z>1?{options:q,selected:P,onSelect:e=>{R?.({type:g.sortSelected,sort:e===v.recency?_.recency:_.featured})}}:null,er=c(()=>({totalMediasCount:Z,albumSpecifier:o,subAlbumSpecifier:O,albumSource:F,sort:P}),[Z,o,O,F,P]);return d(()=>{V.current&&V.current.scrollTo?.({top:0})},[Z,o,O,F,P]),l("div",{className:`${eW.viewer}`,ref:z,children:[i("div",{className:eW.header,"data-testid":"header",children:i(Y,{titleText:n?.name,secondaryTitleContent:l(a,{children:[ee&&i(m,{rating:X,reviewCount:J}),E]}),secondaryHeaderContent:C,onCloseClick:()=>R?.({type:g.close,component:y.GALLERY_VIEWER}),fetching:x})}),l("div",{className:eW.main,children:[l("div",{className:eW.albumSectionContainer,children:[i("div",{className:`${eW.albumSection} ${w?eW.albumSectionAd:""}`,"data-testid":"album_section",children:i(Q,{albums:e,fetching:b.albumsFetching,selectedAlbumSpecifier:o,onAlbumSelected:e=>R?.({type:g.albumSelectedFromGallery,albumSpecifier:e})})}),w&&i("div",{className:eW.placementAds,children:w})]}),l("div",{className:eW.content,children:[!S&&i("div",{"data-testid":"controls_section",children:i(ei,{headerLabel:{name:$?.title||"",count:$?.count||0},subAlbumControl:et,sourceControl:el,sortControl:ea,albumsFetching:L,subAlbumsFetching:M,onReset:()=>{R?.({type:g.resetFilter,subAlbumSpecifier:H[0]?.value??p("aws-proxy"===o.type),albumSource:j[0]?.value||h.allUnrestricted})},onClose:e=>{"FILTER_MODAL"===e&&R?.({type:g.resetFilterInModal})}})}),i("div",{className:eW.gallery,"data-testid":"tile_gallery",ref:V,children:i(ek,{scrollableRef:W||T?z:V,galleryAlbumParams:er,fetching:I,mediaRendererWithStatus:e=>{var t=N?.(e);return t?.data?.id?{node:i(eN,{data:t.data,sizeHint:{desktop:"500px",tablet:"50vw",mobile:"50vw"},positionInContext:e,onClick:k},t.data.id),fetching:t.fetching}:{node:null,fetching:t?.fetching}}})})]})]}),A&&W&&i("div",{className:eW.footerOffer,children:A})]})};return[()=>{K=en,Z=eo,Q=ec,X=ef,J=ep,ee=eg,et=ey,el=eC,ei=eA,ea=ex,er=eM,e("default",eT)},[e=>(l=e.jsxs,i=e.jsx,a=e.Fragment),e=>(r=e.useRef,n=e.createRef,o=e.useState,s=e.useCallback,d=e.useEffect,c=e.useMemo),e=>m=e.BubbleRating,e=>u=e.useViewportCategory,e=>(f=e.isAlbumSpecifierEqual,b=e.buildAlbumSpecifierKey,h=e.mediaSources,_=e.dataStrategySort,v=e.mediaSorts,p=e.getFallbackAlbumSpecifier,g=e.MG_ACTIONS,y=e.COMPONENT_NAME),e=>S=e.default,e=>w=e.default,e=>C=e.default,e=>A=e.Skeleton,e=>(N=e.default,R=e.useIntlFormatter,E=e.useLocalize),e=>x=e.default,e=>L=e.DropdownMenu,e=>(M=e.TabBar,I=e.Tab),e=>(k=e.default,W=e.ButtonBorderless),e=>T=e.default,e=>O=e.default,e=>B=e.ChipButton,e=>F=e.default,e=>G=e.default,e=>D=e.default,e=>P=e.Modal,e=>(V=e.RadioGroup,z=e.RadioButton),e=>H=e.BubbleRating,e=>j=e.default,e=>Y=e.default,e=>q=e.useDebouncedCallback,e=>$=e.useVisibleEffect,e=>U=e.getControlsOptions]]},["21h32l","o4yt4q","trf9tg","ys6v1o","2xdx75","fkji80","34bu7w","essqvy","voa3hw","7thqz4","covaqn","ntn269","227h6c","jppfwt","i0z8n1","4ilds0","mqfj4j","d6vj30","la678j","8e77a5","i3sz5h","frf6ac","bkeq24","aefqpw","fsp8dm","dsbyen","3btuy0","umcxmq"]]);
